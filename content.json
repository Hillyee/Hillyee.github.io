{"meta":{"title":"Hillyee-blog","subtitle":"","description":"","author":"Hillyee","url":"https://hillyee.github.io","root":"/"},"pages":[{"title":"Categories","date":"2022-03-30T15:45:28.276Z","updated":"2022-03-30T15:45:28.276Z","comments":false,"path":"categories/index.html","permalink":"https://hillyee.github.io/categories/index.html","excerpt":"","text":"categories111"},{"title":"About","date":"2022-03-30T15:53:22.543Z","updated":"2022-03-30T15:53:22.543Z","comments":false,"path":"about/index.html","permalink":"https://hillyee.github.io/about/index.html","excerpt":"","text":""},{"title":"Tags","date":"2022-03-30T10:42:50.892Z","updated":"2022-03-30T10:42:50.892Z","comments":false,"path":"tags/index.html","permalink":"https://hillyee.github.io/tags/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2022-03-30T05:15:58.514Z","updated":"2022-03-30T05:15:58.514Z","comments":false,"path":"repository/index.html","permalink":"https://hillyee.github.io/repository/index.html","excerpt":"","text":""}],"posts":[{"title":"éšç¬”","slug":"éšç¬”","date":"2022-04-03T04:57:12.000Z","updated":"2022-04-03T05:09:39.127Z","comments":true,"path":"2022/04/03/éšç¬”/","link":"","permalink":"https://hillyee.github.io/2022/04/03/%E9%9A%8F%E7%AC%94/","excerpt":"","text":"ä¸»è¦æ˜¯ç®€å•çš„åšä¸€äº›å°æ€»ç»“","categories":[],"tags":[]},{"title":"å…³äºJSæ•°æ®ç±»å‹","slug":"å…³äºJSæ•°æ®ç±»å‹","date":"2022-04-03T03:09:28.000Z","updated":"2022-04-03T04:32:34.281Z","comments":true,"path":"2022/04/03/å…³äºJSæ•°æ®ç±»å‹/","link":"","permalink":"https://hillyee.github.io/2022/04/03/%E5%85%B3%E4%BA%8EJS%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/","excerpt":"","text":"JS æ•°æ®ç±»å‹è½¬æ¢ ç±»å‹è½¬æ¢å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šéšå¼ç±»å‹è½¬æ¢ å’Œ æ˜¾å¼ç±»å‹è½¬æ¢ æ˜¾å¼ï¼šæ¯”å¦‚ Number(value) String(value) â€¦ éšå¼ï¼šå¯¹ä¸åŒç±»å‹çš„å€¼ä½¿ç”¨è¿ç®—ç¬¦æ—¶ï¼Œå€¼å¯ä»¥è‡ªåŠ¨è½¬æ¢ï¼Œæ¯”å¦‚ 1 == null æˆ‘ä»¬éœ€è¦çŸ¥é“ï¼šåœ¨ JS ä¸­åªæœ‰3ä¸­ç±»å‹çš„è½¬æ¢ï¼šè½¬æ¢ä¸º Numberï¼ŒStringï¼ŒBooleanç±»å‹ æ‰€ä»¥æˆ‘ä»¬åªéœ€è¦å¼„æ¸…æ¥šåœ¨ä»€ä¹ˆåœºæ™¯ä¸‹åº”è¯¥è½¬æˆå“ªç§ç±»å‹å°±å¯ä»¥äº† è½¬æ¢ä¸ºboolean æ˜¾å¼ï¼šBoolean() æ–¹æ³•å¯ä»¥ç›´æ¥ç”¨æ¥å°†å€¼è½¬æ¢æˆå¸ƒå°”å‹ Boolean(2) // true éšå¼ï¼šé€šå¸¸åœ¨é€»è¾‘åˆ¤æ–­æˆ–è€…æœ‰é€»è¾‘è¿ç®—ç¬¦æ—¶è¢«è§¦å‘ if(2) &#123;&#125; // é€»è¾‘åˆ¤æ–­!!2 // é€»è¾‘è¿ç®—2 || &#x27;hello&#x27; // é€»è¾‘è¿ç®—let x = &#x27;hello&#x27; &amp;&amp; 123 // x === 123// é€»è¾‘è¿ç®—ç¬¦ï¼ˆæ¯”å¦‚ || å’Œ &amp;&amp;ï¼‰æ˜¯åœ¨å†…éƒ¨åšäº† boolean ç±»å‹è½¬æ¢ï¼Œä½†å®é™…ä¸Šè¿”å›çš„æ˜¯åŸå§‹æ“ä½œæ•°çš„å€¼ booleanç±»å‹è½¬æ¢åªæœ‰ trueï¼Œfalseä¸¤ç§ç»“æœã€‚ é™¤äº† 0ã€NaNã€ç©ºå­—ç¬¦ä¸²ã€nullã€undefinedäº”ä¸ªå€¼æ˜¯falseï¼Œå…¶ä½™éƒ½æ˜¯true é¢å¤–è¡¥å……ï¼š é€»è¾‘æˆ– ||ï¼šä¸€çœŸä¸ºçœŸï¼Œa || bï¼Œåªè¦aä¸ºçœŸå°±è¿”å›açš„æ‰§è¡Œç»“æœï¼Œbä¸æ‰§è¡Œï¼›aä¸ºå‡åˆ™æ‰§è¡Œbï¼Œå¹¶è¿”å›bæ‰§è¡Œåçš„ç»“æœ é€»è¾‘ä¸ &amp;&amp;ï¼šä¸€å‡ä¸ºå‡ï¼Œa &amp;&amp; bï¼Œåªè¦aä¸ºå‡å°±è¿”å›açš„æ‰§è¡Œç»“æœï¼Œbä¸æ‰§è¡Œï¼›aä¸ºçœŸåˆ™æ‰§è¡Œbï¼Œå¹¶è¿”å›bæ‰§è¡Œåçš„ç»“æœ è½¬æ¢ä¸ºä¸ºstring æ˜¾å¼ï¼šString() æ–¹æ³•å¯ä»¥ç”¨æ¥æ˜¾å¼å°†å€¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚ String([1,2,3]) // &quot;1,2,3&quot;String(&#123;&#125;) // &#x27;[object Object]&#x27;String(true) // &#x27;true&#x27; éšå¼ï¼šéšå¼è½¬æ¢é€šå¸¸åœ¨æœ‰ + è¿ç®—ç¬¦å¹¶ä¸”åªæ˜¯è‡³å°‘æœ‰ä¸€ä¸ªæ“ä½œæ•°æ˜¯ string ç±»å‹æ—¶è¢«è§¦å‘ï¼Œå³å­—ç¬¦ä¸²æ‹¼æ¥ 1 + &#x27;123&#x27; //&quot;1123&quot; 1 + &#123;&#125; // &#x27;1[object Object]&#x27;&#x27;1&#x27; + null // &#x27;1null&#x27; æŠŠå¼•ç”¨ç±»å‹è½¬æ¢ä¸ºStringæ—¶å°±ä¼šè°ƒç”¨Object.prototype.toString(), è¾“å‡ºçš„æ ¼å¼æ˜¯[object å¯¹è±¡çš„ç±»å‹] null ä¸å­—ç¬¦ä¸²æ‹¼æ¥æ—¶nullç›´æ¥è½¬ä¸º â€˜nullâ€™ (å†…éƒ¨çš„å®ç°) è½¬æ¢ä¸ºnumber æ˜¾å¼ï¼šNumber()æ–¹æ³•å¯ä»¥ç”¨æ¥æ˜¾å¼å°†å€¼è½¬æ¢æˆæ•°å­—ç±»å‹ å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—ï¼šç©ºå­—ç¬¦ä¸²å˜ä¸º0ï¼Œå¦‚æœå‡ºç°ä»»ä½•ä¸€ä¸ªéæœ‰æ•ˆæ•°å­—å­—ç¬¦ï¼Œç»“æœéƒ½æ˜¯NaN Number(&quot;&quot;) //0Number(&quot;10px&quot;) //NaNNumber(&quot;10&quot;) //10 å¸ƒå°”è½¬æ¢ä¸ºæ•°å­— Number(true) // 1Number(false) // 0 null å’Œ undefined è½¬æ¢æˆæ•°å­— Number(null) // 0Number(undefined) // NaN Symbolæ— æ³•è½¬æ¢ä¸ºæ•°å­— Number(Symbol()) // Cannot convert a Symbol value to a number BigInt Number(BigInt(10)) // 10Number(10n) // 10 BigInt æ˜¯ä¸€ç§å†…ç½®å¯¹è±¡ï¼Œå®ƒæä¾›äº†ä¸€ç§æ–¹æ³•æ¥è¡¨ç¤ºå¤§äº 2^53 - 1 çš„æ•´æ•°ã€‚BigInt å¯ä»¥è¡¨ç¤ºä»»æ„å¤§çš„æ•´æ•°ã€‚ å¯ä»¥ç”¨åœ¨ä¸€ä¸ªæ•´æ•°å­—é¢é‡åé¢åŠ  n çš„æ–¹å¼å®šä¹‰ä¸€ä¸ª BigInt ï¼Œå¦‚ï¼š10nï¼Œæˆ–è€…è°ƒç”¨å‡½æ•° BigInt()ï¼ˆä½†ä¸åŒ…å« new è¿ç®—ç¬¦ï¼‰å¹¶ä¼ é€’ä¸€ä¸ªæ•´æ•°å€¼æˆ–å­—ç¬¦ä¸²å€¼,å¦‚BigInt(10) å¯¹è±¡è½¬æ¢ä¸ºæ•°å­—ï¼Œä¼šæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤æ‰§è¡Œ å…ˆè°ƒç”¨å¯¹è±¡çš„ Symbol.toPrimitive è¿™ä¸ªæ–¹æ³•ï¼Œå¦‚æœä¸å­˜åœ¨è¿™ä¸ªæ–¹æ³• MDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol/toPrimitive å†è°ƒç”¨å¯¹è±¡çš„ valueOf() è·å–åŸå§‹å€¼ï¼Œå¦‚æœè·å–çš„å€¼ä¾ç„¶ä¸æ˜¯æ•°å­— valueOf() æ–¹æ³•è¿”å›æŒ‡å®šå¯¹è±¡çš„åŸå§‹å€¼ã€‚ å†è°ƒç”¨å¯¹è±¡çš„ toString() æŠŠå…¶å˜ä¸ºå­—ç¬¦ä¸² æŠŠå¼•ç”¨ç±»å‹è½¬æ¢ä¸ºStringæ—¶å°±ä¼šè°ƒç”¨Object.prototype.toString(), è¾“å‡ºçš„æ ¼å¼æ˜¯[object å¯¹è±¡çš„ç±»å‹] æœ€åå†æŠŠå­—ç¬¦ä¸²åŸºäºNumber()æ–¹æ³•è½¬æ¢ä¸ºæ•°å­— let obj = &#123; name:&#x27;xxx&#x27;&#125;console.log(obj-10) // æ•°å­¦è¿ç®—ï¼šå…ˆæŠŠobjéšå¼è½¬æ¢ä¸ºæ•°å­—ï¼Œå†è¿›è¡Œè¿ç®—//è¿è¡Œæœºåˆ¶obj[Symbol.toPrimitive] //undifined obj.valueof() // &#123;name:xxx&#125;obj.toString() // &#x27;[object Object]&#x27;Number (&quot;[object object]&quot;) // NaNNaN-10 // NaN éšå¼ number çš„éšå¼ç±»å‹è½¬æ¢æ˜¯æ¯”è¾ƒå¤æ‚çš„ï¼Œå› ä¸ºå®ƒå¯ä»¥åœ¨ä¸‹é¢å¤šç§æƒ…å†µä¸‹è¢«è§¦å‘ æ¯”è¾ƒæ“ä½œï¼ˆ&gt;, &lt;, &lt;=, &gt;=ï¼‰ æŒ‰ä½æ“ä½œï¼ˆ| &amp; ^ ~ï¼‰ ç®—æ•°æ“ä½œï¼ˆ- + * / %ï¼‰ï¼Œ æ³¨æ„ï¼šå½“ +å­˜åœ¨ä»»æ„çš„æ“ä½œæ•°æ˜¯ string ç±»å‹æ—¶ï¼Œè½¬æ¢åˆ°stringç±»å‹ä¸ºæ­¢ï¼Œä¸ä¼šè§¦å‘ number ç±»å‹çš„éšå¼è½¬æ¢ ä¸€å…ƒ + æ“ä½œ ä¸€å…ƒå°±æ˜¯åªæœ‰ä¸€ä¸ªæ“ä½œæ•°ï¼Œ+5 +[] +[] --&gt; 0 ç›¸å½“äºNumber([]) +{} --&gt; NaN ç›¸å½“äºString({})=â€˜[object,Object]â€™ï¼›Number(â€˜[object,Object]â€™) --&gt;NaN éœ€è¦æ³¨æ„çš„æƒ…å†µ javascriptä¸­åŠ æ³•ä¼šè§¦å‘3ç§ç±»å‹è½¬æ¢ï¼Œå³å°†å€¼è½¬æ¢ä¸ºåŸå§‹å€¼ï¼Œè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºæ•°å­—ã€‚è¿™åˆšå¥½å¯¹åº”äº†javascriptå¼•æ“å†…éƒ¨çš„è½¬æ¢æ“ä½œï¼šToPrimitive(),toString(),toNumber() &#123;&#125; + [] === 0 // true[] + &#123;&#125; === 0 // false// &#123;&#125; + []ï¼Œå¯¹äºç¼–è¯‘å™¨æ¥è¯´,&#123;&#125;åœ¨å¼€å¤´ï¼Œè¢«è§£ææˆä»£ç å—ï¼Œä¸ä¼šè¿”å›ä»»ä½•å€¼// æ‰€ä»¥&#123;&#125; + []å®é™…ä¸Šå°±æ˜¯ +[]// []é€šè¿‡ToPrimitive(),toString() å˜æˆ &quot;&quot;// æœ€å toNumber() --&gt; 0[] + &#123;&#125; // è¿™é‡Œ&#123;&#125;å°±æ˜¯ä¸€ä¸ªå¯¹è±¡// String([])=&#x27;&#x27; String(&#123;&#125;)=&#x27;[object Object]&#x27; // æœ‰stringç±»å‹ä¸ä¼šè§¦å‘numberè½¬æ¢äº†,ä¸¤è¾¹éƒ½æ˜¯stringç›´æ¥æ‹¼æ¥// æ‰€ä»¥ &#x27;&#x27; + &#x27;[object Object]&#x27; --&gt; &#x27;[object Object]&#x27; æ“ä½œç¬¦ == ä¸¤è¾¹çš„éšå¼è½¬æ¢ å¦‚æœä¸¤è¾¹çš„æ•°æ®ç±»å‹ä¸åŒï¼Œéœ€è¦å…ˆè½¬ä¸ºç›¸åŒç±»å‹å†è¿›è¡Œæ¯”è¾ƒ å¯¹è±¡ == å­—ç¬¦ä¸² [1,2,3] == &#x27;1,2,3&#x27; // true// è½¬ä¸ºå­—ç¬¦ä¸²// [1,2,3].toString() --&gt; &#x27;1,2,3&#x27;&#123;name:&#x27;helo&#x27;&#125; == &quot;&#123;name:&#x27;helo&#x27;&#125;&quot; // false// &#123;name:&#x27;helo&#x27;&#125;.valueOf().toString() --&gt; &#x27;[object Object]&#x27; null/ undefined null == undefined // truenull === undefined // false//null/undefinedå’Œå…¶ä»–ä»»ä½•å€¼éƒ½ä¸ç›¸ç­‰ å¯¹è±¡ == å¯¹è±¡ &#123;&#125; == &#123;&#125; // false æ¯”è¾ƒçš„æ˜¯å †å†…å­˜åœ°å€ï¼Œåœ°å€ç›¸åŒæ‰ç›¸ç­‰ NaN NaN == xxx éƒ½æ˜¯false é™¤äº†ä»¥ä¸Šçš„å››ç§æƒ…å†µï¼Œåªè¦ä¸¤è¾¹ç±»å‹ä¸ä¸€è‡´ï¼Œéƒ½æ˜¯è½¬æ¢ä¸ºæ•°å­—å†è¿›è¡Œæ¯”è¾ƒ æœ€åï¼Œçœ‹é¢˜ï¼š let result = 100 + true + 21.2 + null + undefined + &quot;Tencent&quot; + [] + null + 9 + false å‚è€ƒèµ„æ–™ï¼š https://juejin.cn/post/6956170676327677966 æ•°æ®ç±»å‹çš„åˆ¤æ–­ https://juejin.cn/post/7061588533214969892#heading-29 æŠŠå¼•ç”¨ç±»å‹è½¬æ¢ä¸ºStringæ—¶å°±ä¼šè°ƒç”¨Object.prototype.toString(), è¾“å‡ºçš„æ ¼å¼æ˜¯[object å¯¹è±¡çš„ç±»å‹] Object.prototype.toString.call() æœ‰æ˜¾å¼ç»‘å®šï¼Œ å› æ­¤ Object.prototype.toString.call(xxx)å°±æ˜¯ æ‰¾åˆ°xxxä¸­çš„toStringæ–¹æ³•ï¼Œè¾“å‡ºçš„å¯¹è±¡çš„ç±»å‹å°±æ˜¯æ ¹æ®xxxæ¥çš„ ç¥å¥‡çš„åŠ æ³• https://blog.csdn.net/dk2290/article/details/86534595","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hillyee.github.io/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"08_JSé¢å‘å¯¹è±¡","slug":"08-JSé¢å‘å¯¹è±¡","date":"2022-04-02T08:37:13.000Z","updated":"2022-04-03T07:40:44.013Z","comments":true,"path":"2022/04/02/08-JSé¢å‘å¯¹è±¡/","link":"","permalink":"https://hillyee.github.io/2022/04/02/08-JS%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/","excerpt":"","text":"æ·±å…¥JSé¢å‘å¯¹è±¡ é¢å‘å¯¹è±¡åˆè¯† åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ // æ–¹å¼ä¸€ï¼šé€šè¿‡new Object()åˆ›å»ºvar obj = new Object()obj.name = &quot;hill&quot;obj.age = 18obj.running = function() &#123; console.log(this.name + &quot; is running&quot;);&#125;// æ–¹å¼äºŒï¼šå­—é¢é‡å½¢å¼var info = &#123; name: &#x27;hill&#x27;, age: 18, eating: function() &#123; console.log(this.name + &#x27;is&#x27; + this.age); &#125;&#125; å¯¹å±æ€§çš„æ“ä½œ var obj = &#123; name: &quot;yuzi&quot;, age: 18&#125;// 1.è·å–å±æ€§console.log(obj.name); // yuzi// 2.ç»™å±æ€§èµ‹å€¼obj.name = &quot;jackson&quot;console.log(obj.name); // jackson// 3.åˆ é™¤å±æ€§// delete obj.name// console.log(obj); // &#123;age: 18&#125;// 4.éå†å±æ€§for (var key in obj) &#123; console.log(key); // name age&#125; è¿™ç§ç›´æ¥å®šä¹‰åœ¨å¯¹è±¡å†…éƒ¨æˆ–è€…ç›´æ¥æ·»åŠ åˆ°å¯¹è±¡å†…éƒ¨çš„å±æ€§ï¼Œæˆ‘ä»¬ä¸èƒ½å¯¹å…¶åšå‡ºé™åˆ¶ï¼šæ¯”å¦‚è¿™ä¸ªå±æ€§æ˜¯å¦å¯ä»¥é€šè¿‡deleteåˆ é™¤ï¼Œæ˜¯å¦å¯ä»¥åœ¨for-inéå†çš„æ—¶å€™è¢«éå†å‡ºæ¥ Object.defineProperty() å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹ä¸€ä¸ªå±æ€§è¿›è¡Œæ¯”è¾ƒç²¾å‡†çš„æ“ä½œæ§åˆ¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å±æ€§æè¿°ç¬¦ é€šè¿‡å±æ€§æè¿°ç¬¦å¯ä»¥ç²¾å‡†çš„æ·»åŠ æˆ–ä¿®æ”¹å¯¹è±¡çš„å±æ€§ å±æ€§æè¿°ç¬¦éœ€è¦ä½¿ç”¨ Object.defineProperty æ¥å¯¹å±æ€§è¿›è¡Œæ·»åŠ æˆ–ä¿®æ”¹ Object.defineProperty() æ–¹æ³•ä¼šç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰ä¸€ä¸ªæ–°å±æ€§ï¼Œæˆ–è€…ä¿®æ”¹ä¸€ä¸ªå¯¹è±¡çš„ç°æœ‰å±æ€§ï¼Œå¹¶è¿”å›æ­¤å¯¹è±¡ æ¥æ”¶ä¸‰ä¸ªå‚æ•° obj:è¦å®šä¹‰å±æ€§çš„å¯¹è±¡ prop: è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°æˆ–Symbol descriptorï¼šè¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦ ç¬¬ä¸‰ä¸ªå‚æ•°çš„å±æ€§æè¿°ç¬¦åˆ†ä¸ºä¸¤ç±»ï¼š æ•°æ®å±æ€§æè¿°ç¬¦ configurableï¼Œenumerableï¼Œwritableï¼Œvalue // ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰æŸä¸ªå±æ€§æ—¶ï¼Œæè¿°ç¬¦çš„é»˜è®¤å€¼ä¸º// value: èµ‹å€¼çš„value// configurable: true// enumerable: true// writable: truevar obj = &#123; name: &#x27;jackson&#x27;, age: 18&#125;Object.defineProperty(obj, &quot;height&quot;, &#123; value: 1.88, // å±æ€§å€¼(é»˜è®¤ä¸º undefined) enumerable: true, // å¯¹åº”å±æ€§æ˜¯å¦å¯ä»¥æšä¸¾(é»˜è®¤ä¸ºfalse) writable: true, // æ˜¯å¦å¯ä»¥ä¿®æ”¹å±æ€§å€¼(é»˜è®¤ä¸ºfalse) configurable: true, // å±æ€§èƒ½å¦è¢«åˆ é™¤(é»˜è®¤ä¸ºfalse),å±æ€§çš„æè¿°ç¬¦èƒ½å¦è¢«æ”¹å˜&#125;)// æšä¸¾for(var key in obj) &#123; console.log(key); // name age height å¯æšä¸¾&#125;console.log(Object.keys(obj)); // [ &#x27;name&#x27;, &#x27;age&#x27;, &#x27;height&#x27; ] å¯æšä¸¾// ä¿®æ”¹å±æ€§å€¼obj.height = 2console.log(obj.height); // 2 å¯ä¿®æ”¹// åˆ é™¤å±æ€§delete obj.heightconsole.log(obj.height); // undefined åˆ é™¤æˆåŠŸ å­˜å–å±æ€§æè¿°ç¬¦ enumerableï¼Œconfigurableï¼Œgetï¼Œset ä¸ç”¨value,writableï¼Œè€Œæ˜¯ç”¨ get,set var obj = &#123; name: &#x27;jackson&#x27;, age: 18, _address: &quot;å¹¿ä¸œ&quot; &#125;// ç§æœ‰å±æ€§ï¼Œjsé‡Œé¢æ˜¯æ²¡æœ‰ä¸¥æ ¼æ„ä¹‰çš„ç§æœ‰å±æ€§çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å®é™…ä¸Šä¹Ÿèƒ½ç›´æ¥è®¿é—®ï¼Œä½†æ˜¯åœ¨ç¤¾åŒºäººä»¬çº¦å®š ä¸‹åˆ’çº¿_å¼€å¤´çš„å±æ€§å®šä¹‰ä¸ºç§æœ‰å±æ€§// 1.éšè—æŸä¸€ä¸ªç§æœ‰å±æ€§(address)ä¸å¸Œæœ›ç›´æ¥è¢«å¤–ç•Œä½¿ç”¨å’Œèµ‹å€¼// 2.å¦‚æœæˆ‘ä»¬å¸Œæœ›æˆªè·æŸä¸ªå±æ€§è¢«è®¿é—®å’Œè®¾ç½®å€¼çš„è¿‡ç¨‹æ—¶ï¼Œä¹Ÿä¼šä½¿ç”¨å­˜å‚¨å±æ€§æè¿°ç¬¦Object.defineProperty(obj, &quot;address&quot;, &#123; enumerable: true, // å¯æšä¸¾ configurable: true, // å¯åˆ é™¤ï¼Œå¯ä¿®æ”¹æè¿°ç¬¦ get: function() &#123; console.log(&quot;è·å–äº†ä¸€æ¬¡addressçš„å€¼&quot;) return this._address &#125;, set: function(value) &#123; console.log(&quot;è®¾ç½®äº†addressçš„å€¼&quot;) this._address = value &#125;&#125;)console.log(obj.address); // å¹¿ä¸œ å¯æšä¸¾å±æ€§çš„è¡¥å…… var obj = &#123; name: &quot;why&quot;, age: 18&#125;Object.defineProperty(obj, &quot;address&quot;, &#123; value: &quot;åŒ—äº¬å¸‚&quot;&#125;)console.log(obj)// addresså±æ€§é»˜è®¤æ˜¯ä¸å¯æšä¸¾çš„ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸Šé¢æ˜¯å¯ä»¥çœ‹åˆ°çš„ï¼ˆç¨å¾®æµ…è‰²ä¸€ç‚¹ï¼‰ï¼Œè¿™æ˜¯æµè§ˆå™¨ä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•åšçš„å¤„ç† Object.defineProperties() Object.defineProperties() æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸Šå®šä¹‰å¤šä¸ªæ–°çš„å±æ€§ var obj = &#123; _age: 18&#125;Object.defineProperties(obj, &#123; name: &#123; writable: true, value: &#x27;jackson&#x27; &#125;, age: &#123; get: function() &#123; return this._age &#125; &#125;&#125;) å¯¹è±¡æ–¹æ³•è¡¥å……(äº†è§£) è·å–å¯¹è±¡çš„å±æ€§æè¿°ç¬¦ getOwnPropertyDescriptor getOwnPropertyDescriptors ç¦æ­¢å¯¹è±¡æ‰©å±•æ–°å±æ€§ preventExtensionsï¼šç»™ä¸€ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ä¼šå¤±è´¥(åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ¥é”™) å¯†å°å¯¹è±¡ï¼Œä¸å…è®¸é…ç½®å’Œåˆ é™¤å±æ€§ï¼šseal å®é™…æ˜¯è°ƒç”¨preventExtensions å¹¶ä¸”å°†ç°æœ‰å±æ€§çš„configurable:false å†»ç»“å¯¹è±¡ï¼Œä¸å…è®¸ä¿®æ”¹ç°æœ‰å±æ€§ï¼šfreeze å®é™…ä¸Šæ˜¯è°ƒç”¨seal å¹¶ä¸”å°†ç°æœ‰å±æ€§çš„writable: false åˆ›å»ºå¤šä¸ªå¯¹è±¡çš„æ–¹å¼ é€šè¿‡æƒ³è¦åˆ›å»ºå¤šä¸ªå¯¹è±¡çš„ç›®çš„ï¼Œæ¥å¼•å‡ºåé¢çš„æ„é€ å‡½æ•° å‰é¢æˆ‘ä»¬é€šè¿‡ new Objectï¼Œå­—é¢é‡çš„æ–¹å¼åˆ›å»ºå¯¹è±¡ï¼Œä½†æ˜¯è¿™ä¸¤ç§æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ï¼š åˆ›å»ºåŒæ ·çš„å¯¹è±¡æ—¶ï¼Œéœ€è¦ç¼–å†™é‡å¤ä»£ç  æ¯”å¦‚è¯´å­—é¢é‡ï¼š var p1 = &#123;name: , age: &#125;var p2 = &#123;name: , age: &#125;var p3 = &#123;name: , age: &#125; // å®ƒä»¬æœ‰åŒæ ·çš„å±æ€§æˆ–è€…æ–¹æ³• åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ - å·¥å‚æ¨¡å¼ å·¥å‚æ¨¡å¼å…¶å®æ˜¯ä¸€ç§å¸¸è§çš„è®¾è®¡æ¨¡å¼ é€šå¸¸æˆ‘ä»¬ä¼šæœ‰ä¸€ä¸ªå·¥å‚æ–¹æ³•ï¼Œé€šè¿‡è¯¥å·¥å‚æ–¹æ³•æˆ‘ä»¬å¯ä»¥äº§ç”Ÿæƒ³è¦çš„å¯¹è±¡ å·¥å‚æ–¹æ³•åˆ›å»ºå¯¹è±¡æœ‰ä¸€ä¸ªæ¯”è¾ƒå¤§çš„é—®é¢˜ï¼šæˆ‘ä»¬åœ¨æ‰“å°å¯¹è±¡æ—¶ï¼Œå¯¹è±¡çš„ç±»å‹éƒ½æ˜¯Objectç±»å‹ ä½†æ˜¯ä»æŸäº›è§’åº¦æ¥è¯´ï¼Œè¿™äº›å¯¹è±¡åº”è¯¥æœ‰ä¸€ä¸ªä»–ä»¬å…±åŒçš„ç±»å‹ function createPerson(name, age, height) &#123; var p = &#123;&#125; // å®šä¹‰ä¸€ä¸ªå¯¹è±¡ p.name = name p.age = age p.height = height p.eating = function() &#123; console.log(this.name + &quot;is eating&quot;); &#125; return p // æŠŠå¯¹è±¡è¿”å›&#125;var p1 = createPerson(&quot;å¼ ä¸‰&quot;, 18, 1.88)var p2 = createPerson(&quot;æå››&quot;, 20, 1.98)var p3 = createPerson(&quot;ç‹äº”&quot;, 30, 1.78)// å·¥å‚æ¨¡å¼çš„ç¼ºç‚¹ï¼šè·å–ä¸åˆ°å¯¹è±¡æœ€çœŸå®çš„ç±»å‹console.log(p1, p2, p3); // æˆ‘åªçŸ¥é“ä½ æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä½†æˆ‘ä¸çŸ¥é“ä½ æ˜¯personç±»å‹ è®¤è¯†æ„é€ å‡½æ•° ä»€ä¹ˆæ˜¯æ„é€ å‡½æ•°ï¼Ÿ æ„é€ å‡½æ•°ä¹Ÿç§°ä¹‹ä¸ºæ„é€ å™¨ï¼ˆconstructorï¼‰ï¼Œé€šå¸¸æˆ‘ä»¬åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¼šè°ƒç”¨çš„å‡½æ•° JavaScript ä¸­ï¼Œå¦‚æœä¸€ä¸ªæ™®é€šçš„å‡½æ•°è¢«ä½¿ç”¨ new æ“ä½œç¬¦æ¥è°ƒç”¨äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±ç§°ä¹‹ä¸ºæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•° æ‰€ä»¥è¯´æ„é€ å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼Œåªä¸è¿‡ç”¨ new å»è°ƒç”¨ï¼Œå°±ç§°ä¸ºæ„é€ å‡½æ•° newä¹Ÿæ˜¯å¯ä»¥è°ƒç”¨å‡½æ•°çš„å–” newæ“ä½œç¬¦ å¦‚æœä¸€ä¸ªå‡½æ•°è¢«ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨äº†ï¼Œé‚£ä¹ˆå®ƒä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆç©ºå¯¹è±¡ï¼‰ è¿™ä¸ªå¯¹è±¡å†…éƒ¨çš„ **[[prototype]]**å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºè¯¥æ„é€ å‡½æ•°çš„ prototypeå±æ€§ æ„é€ å‡½æ•°çš„ this ï¼Œä¼šæŒ‡å‘åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡ æ‰§è¡Œå‡½æ•°çš„å†…éƒ¨ä»£ç  å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡ æ„é€ å‡½æ•°åˆ›å»ºå¯¹è±¡ // è§„èŒƒï¼šæ„é€ å‡½æ•°çš„é¦–å­—æ¯ä¸€èˆ¬æ˜¯å¤§å†™function Person(name, age, height, address) &#123; this.name = name this.age = age this.height = height this.address = address this.eating = function() &#123; console.log(this.name + &quot;is eating&quot;); &#125; this.running = function() &#123; console.log(this.name + &#x27;is running&#x27;); &#125;&#125;var p1 = new Person(&quot;å¼ ä¸‰&quot;, 18, 1.88, &#x27;å¹¿å·&#x27;)var p2 = new Person(&quot;æå››&quot;, 20, 1.78, &#x27;åŒ—äº¬&#x27;)console.log(p1); // Person &#123;...&#125; æ˜¯å¯ä»¥çœ‹è§ç±»å‹çš„console.log(p2); è¿™ä¸ªæ„é€ å‡½æ•°å¯ä»¥ç¡®ä¿æˆ‘ä»¬çš„å¯¹è±¡æ˜¯æœ‰Personçš„ç±»å‹çš„ ä½†æ˜¯ä¹Ÿæœ‰ç¼ºç‚¹ï¼šæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªå¯¹è±¡çš„å‡½æ•°å»åˆ›å»ºä¸€ä¸ªå‡½æ•°å¯¹è±¡å®ä¾‹ï¼ˆå¼€è¾Ÿæ–°çš„å†…å­˜ç©ºé—´ï¼‰ å¯¹è±¡çš„åŸå‹ [[prototype]] JavaScript ä¸­ï¼Œæ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å†…ç½®å±æ€§ [[prototype]]ï¼Œè¿™ä¸ªå±æ€§ç§°ä¹‹ä¸ºå¯¹è±¡çš„åŸå‹ï¼ˆéšå¼åŸå‹ï¼‰ï¼ˆåªè¦æ˜¯å¯¹è±¡ï¼Œå°±ä¼šæœ‰è¿™ä¸ªå†…ç½®å±æ€§ï¼‰ [[prototype]] æŒ‡å‘ä¸€ä¸ªå¯¹è±¡ï¼ˆä¹Ÿå°±æ˜¯è¯´å®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼‰ é‚£ä¹ˆè¿™ä¸ªå¯¹è±¡æœ‰ä»€ä¹ˆç”¨å‘¢ï¼Ÿ å½“æˆ‘ä»¬é€šè¿‡å¼•ç”¨å¯¹è±¡çš„å±æ€§keyæ¥è·å–ä¸€ä¸ªvalueæ—¶ï¼Œå®ƒä¼šè§¦å‘ [[Get]]çš„æ“ä½œ è¿™ä¸ªæ“ä½œä¼šé¦–å…ˆæ£€æŸ¥è¯¥å±æ€§æ˜¯å¦æœ‰å¯¹åº”çš„å±æ€§ï¼Œå¦‚æœæœ‰çš„è¯å°±ä½¿ç”¨å®ƒ å¦‚æœå¯¹è±¡ä¸­æ²¡æœ‰è¯¥å±æ€§ï¼Œ é‚£ä¹ˆä¼šæ²¿ç€å®ƒçš„åŸå‹å»æŸ¥æ‰¾ [[prototype]] å¦‚æœé€šè¿‡å­—é¢é‡ç›´æ¥åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡ä¹Ÿæœ‰[[prototype]]è¿™ä¸ªå±æ€§ å¦‚ä½•æŸ¥çœ‹è¿™ä¸ªå±æ€§å‘¢ var obj = &#123; name: &quot;jackson&quot;&#125;var info = &#123;&#125;// åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡ä¸Šéƒ½æœ‰ [[prototype]]å±æ€§// å¦‚ä½•æŸ¥çœ‹è¿™ä¸ªå±æ€§ï¼Ÿ// æ—©æœŸçš„ECMAæ˜¯æ²¡æœ‰è§„èŒƒå¦‚ä½•å»æŸ¥çœ‹ [[prototype]]// ç»™å¯¹è±¡ä¸­æä¾›äº†ä¸€ä¸ªå±æ€§ __proto__, å¯ä»¥è®©æˆ‘ä»¬æŸ¥çœ‹ä¸€ä¸‹è¿™ä¸ªåŸå‹å¯¹è±¡(æµè§ˆå™¨æä¾›)console.log(obj.__proto__);// [Object: null prototype] &#123;&#125;// ç›¸å½“äº(ä¼ªä»£ç )var obj = &#123;name: &#x27;jackson&#x27;, __proto__: &#123;&#125;&#125;// ES5ä¹‹åæä¾›çš„Object.getPrototypeOf()æŸ¥çœ‹console.log(Object.getPrototypeOf(obj)); // &#123;&#125;// ä¾‹å¦‚æ‰¾ age è¿™ä¸ªå±æ€§ï¼Œè¯¥å¯¹è±¡æœ¬èº«æ²¡æœ‰ï¼Œæ²¿ç€åŸå‹æŸ¥æ‰¾obj.__proto__.age = 18console.log(obj.age); // 18 å‡½æ•°çš„åŸå‹ prototype æ‰€æœ‰çš„å‡½æ•°éƒ½æœ‰ä¸€ä¸ª prototype å±æ€§ï¼ˆæ˜¾å¼åŸå‹ï¼‰ function Foo() &#123;&#125;// å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæ‰€ä»¥å®ƒä¹Ÿæ˜¯æœ‰[[prototype]]éšå¼å±æ€§// å¦å¤–ï¼Œå‡½æ•°è¿˜ä¼šå¤šå‡ºæ¥ä¸€ä¸ªæ˜¾å¼åŸå‹å±æ€§ï¼šprototypeconsole.log(Foo.prototype); å†çœ‹å›newæ“ä½œç¬¦å…¶ä¸­çš„ä¸€ä¸ªæ­¥éª¤ï¼š è¿™ä¸ªå¯¹è±¡å†…éƒ¨çš„[[prototype]]å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºè¯¥æ„é€ å‡½æ•°çš„prototypeå±æ€§ ä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬é€šè¿‡ Foo æ„é€ å‡½æ•°åˆ›å»ºå‡ºçš„æ‰€æœ‰å¯¹è±¡çš„ [[prototype]] éƒ½æŒ‡å‘ Foo.prototype var f1 = new Foo()var f2 = new Foo()console.log(f1.__proto__ === Foo.prototype); // trueconsole.log(f2.__proto__ === Foo.prototype); // true åˆ›å»ºå¯¹è±¡çš„å†…å­˜è¡¨ç° å¯ä»¥çœ‹åˆ°ï¼š æ„é€ å‡½æ•°çš„ prototype å±æ€§æŒ‡å‘è¯¥å‡½æ•°çš„åŸå‹å¯¹è±¡ åŸå‹å¯¹è±¡èº«ä¸Šæœ‰ä¸€ä¸ª constructor å±æ€§æŒ‡å›æ„é€ å‡½æ•°æœ¬èº« newå‡ºæ¥çš„å®ä¾‹å¯¹è±¡ p1ï¼Œp2 å¯¹è±¡èº«ä¸Šæœ‰ __proto__å±æ€§ä¹ŸæŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ å‡½æ•°åŸå‹ä¸Šçš„å±æ€§constructor é»˜è®¤æƒ…å†µä¸‹åŸå‹ä¸Šéƒ½ä¼šæ·»åŠ ä¸€ä¸ªå±æ€§å«åšconstructorï¼Œè¿™ä¸ªconstructoræŒ‡å‘å½“å‰çš„å‡½æ•°å¯¹è±¡ function Foo() &#123;&#125;// 1. constructorå±æ€§// Foo.prototypeè¿™ä¸ªå¯¹è±¡ä¸­æœ‰ä¸€ä¸ªconstructorå±æ€§console.log(Foo.prototype); // &#123;&#125; ä¸ºä»€ä¹ˆæ²¡çœ‹åˆ°constructorï¼Ÿ// é‚£æ¢ä¸€ç§æ–¹å¼çœ‹console.log(Object.getOwnPropertyDescriptors(Foo.prototype));//æ‰“å° // &#123;// constructor: &#123;// value: [Function: Foo],// writable: true, // enumerable: false,// configurable: true// &#125;// &#125;// å¯ä»¥çœ‹åˆ°enumerableä¸ºfalseï¼Œæ‰€ä»¥ç¬¬ä¸€ç§æ–¹å¼ä¸èƒ½çœ‹åˆ°constructor// æ—¢ç„¶è¿™æ ·ï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½é‡å†™è¿™ä¸ªå¯¹è±¡çš„å±æ€§constructorå‘¢ï¼Ÿè‚¯å®šå¯ä»¥å‘€Object.defineProperty(Foo.prototype, &quot;constructor&quot;, &#123; enumerable: true, //å¯æšä¸¾ configurable: true, // å¯åˆ é™¤ï¼Œæè¿°ç¬¦å¯ä¿®æ”¹ writable: true, // å¯å†™ value: &#x27;hahahha&#x27;&#125;)// è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†æ¥ç›´æ¥æ‰“å°ï¼Œå°±å¯ä»¥çœ‹åˆ°constructoräº†(è¢«æˆ‘ä»¬æ”¹æˆå¯æšä¸¾äº†)console.log(Foo.prototype);// &#123; constructor: &#x27;hahahha&#x27; &#125; æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨prototypeä¸Šæ·»åŠ è‡ªå·±çš„å±æ€§ Foo.prototype.name = &quot;jackson&quot;Foo.prototype.age = 18Foo.prototype.eating = function() &#123;&#125;// æˆ‘ä»¬å†newå¯¹è±¡çš„æ—¶å€™ï¼Œè¿™äº›å±æ€§éƒ½å¯ä»¥é€šè¿‡å®ä¾‹çš„åŸå‹__proto__æ‰¾åˆ°var f1 = new Foo()console.log(f1.name); // jacksonconsole.log(f1.__proto__); // æ‰“å°// &#123;// constructor: &#x27;hahahha&#x27;,// name: &#x27;jackson&#x27;,// age: 18,// eating: [Function (anonymous)]// &#125; ç›´æ¥ä¿®æ”¹æ•´ä¸ªprototypeå¯¹è±¡ï¼ˆèµ‹å€¼ï¼Œæ–°å¼€å†…å­˜ç©ºé—´ï¼‰ Foo.prototype = &#123; constructor: Foo, // è®©å®ƒæŒ‡å›æœ¬èº«(ä½†è¿™æ ·å®ƒé»˜è®¤æ˜¯å¯æšä¸¾çš„) name: &quot;jackson&quot;, age: 20&#125;var f1 = new Foo()console.log(f1.name); // &quot;jackson&quot;// ä¸ºäº†å¯ä»¥è‡ªå®šå±æ€§æè¿°ç¬¦,çœŸå®å¼€å‘ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡Object.definePropertyæ·»åŠ constructorObject.defineProperty(Foo.prototype, &quot;constructor&quot;, &#123; enumerable: false, configurable: true, writable: true, value: Foo&#125;) åŸæ¥çš„fooå‡½æ•°çš„åŸå‹å¯¹è±¡å› ä¸ºæ²¡æœ‰å¯¹å®ƒçš„å¼•ç”¨ï¼Œä¼šè¢«å›æ”¶çš„ åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ â€” æ„é€ å‡½æ•°å’ŒåŸå‹ç»„åˆ function Person(name, age, address) &#123; this.name = name this.age = age this.address = address // this.fn = function() // ä¸ºäº†ä¸ç»™æ¯ä¸ªå®ä¾‹éƒ½æ–°å¼€å†…å­˜ç©ºé—´ä¿å­˜ç›¸åŒçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸æŠŠå…±åŒçš„æ–¹æ³•å®šä¹‰åœ¨è¿™&#125;// æˆ‘ä»¬å¯ä»¥æŠŠä¸€äº›å…¬å…±çš„æ–¹æ³•ç›´æ¥é€šè¿‡åŸå‹å¯¹è±¡æ·»åŠ Person.prototype.eating = function() &#123; console.log(this.name + &#x27;is eating&#x27;); // è¿™é‡Œçš„thisæ€ä¹ˆæ‰¾åˆ°å®ä¾‹å¯¹è±¡çš„ï¼Ÿ // è°ƒç”¨å‡½æ•°çš„æ—¶å€™éšå¼ç»‘å®šå•Š&#125;Person.prototype.running = function() &#123; console.log(this.name + &#x27;is running&#x27;);&#125;var p1 = new Person(&quot;jackson&quot;, 18, &quot;guangdong&quot;)var p2 = new Person(&quot;yuzi&quot;, 18, &quot;beijing&quot;)p1.eating()p2.eating() JavaScriptä¸­çš„ç±»å’Œå¯¹è±¡ function Person() &#123;&#125; åœ¨ JS ä¸­ï¼ŒPersonåº”è¯¥è¢«ç§°ä¹‹ä¸ºæ˜¯ä¸€ä¸ªæ„é€ å‡½æ•° ä½†æ˜¯ä»å¾ˆå¤šé¢å‘å¯¹è±¡è¯­è¨€çš„å¼€å‘è€…ä¹ æƒ¯ç§°ä¹‹ä¸ºç±»ï¼Œå› ä¸ºç±»å¯ä»¥å¸®æˆ‘ä»¬åˆ›å»ºå‡ºæ¥å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ é¢å‘å¯¹è±¡çš„ç‰¹æ€§ - ç»§æ‰¿ é¢å‘å¯¹è±¡æœ‰ä¸‰å¤§ç‰¹æ€§ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ å°è£…ï¼šæˆ‘ä»¬å‰é¢å°†å±æ€§å’Œæ–¹æ³•å°è£…åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¯ä»¥ç§°ä¹‹ä¸ºå°è£…çš„è¿‡ç¨‹ ç»§æ‰¿ï¼šç»§æ‰¿æ˜¯é¢å‘å¯¹è±¡ä¸­éå¸¸é‡è¦çš„ï¼Œä¸ä»…ä»…å¯ä»¥å‡å°‘é‡å¤ä»£ç çš„æ•°é‡ï¼Œä¹Ÿæ˜¯å¤šæ€å‰æï¼ˆçº¯é¢å‘å¯¹è±¡ä¸­ï¼‰ å¤šæ€ï¼šä¸åŒçš„å¯¹è±¡åœ¨æ‰§è¡Œæ—¶è¡¨ç°å‡ºä¸åŒçš„å½¢æ€ JavaScriptåŸå‹é“¾ åŸå‹é“¾çš„ç†è§£ var obj = &#123; name: &quot;jackson&quot;, age: 18&#125;// å½“æˆ‘ä»¬&quot;.&quot;çš„æ—¶å€™å°±æ˜¯[[get]]æ“ä½œ// 1.åœ¨å½“å‰çš„å¯¹è±¡ä¸­æŸ¥æ‰¾å±æ€§// 2.å¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œè¿™ä¸ªæ—¶å€™ä¼šå»åŸå‹é“¾(__proto__)å¯¹è±¡ä¸ŠæŸ¥æ‰¾obj.__proto__ = &#123; // address: &quot;å¹¿å·å¸‚&quot;&#125;// åŸå‹é“¾obj.__proto__.__proto__= &#123; // address: &quot;å¹¿å·å¸‚&quot;&#125;obj.__proto__.__proto__.__proto__= &#123; address: &quot;å¹¿å·å¸‚&quot;&#125;console.log(obj.address); // &quot;å¹¿å·å¸‚&quot;// åªè¦åœ¨åŸå‹é“¾ä¸Šéƒ½å¯ä»¥æ‰¾åˆ°çš„ è¿™æ ·ä¸€ç›´å‘ä¸Šæ‰¾çš„è¯ï¼Œé‚£ä¹ˆé¡¶å±‚åŸå‹ç©¶ç«Ÿæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ var obj = &#123;name: &quot;Jackson&quot;&#125;// æ‰¾åˆ°é‚£ä¸€å±‚å¯¹è±¡ä¹‹åä¼šåœæ­¢ç»§ç»­æŸ¥æ‰¾å‘¢ï¼Ÿconsole.log(obj.__proto__); // å¯ä»¥çœ‹åˆ°å­—é¢é‡objçš„åŸå‹æ˜¯ [Object: null prototype] &#123;&#125;// æˆ‘ä»¬ç»§ç»­å¾€ä¸Šçœ‹çœ‹console.log(obj.__proto__.__proto__); // null// æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¯´ [Object: null prototype] &#123;&#125; å°±æ˜¯é¡¶å±‚çš„åŸå‹ é¡¶å±‚å¯¹è±¡æœ‰ä»€ä¹ˆç‰¹åˆ«å—ï¼Ÿè¯¥å¯¹è±¡ä¸Šæœ‰å¾ˆå¤šé»˜è®¤çš„å±æ€§å’Œæ–¹æ³• é¡¶å±‚åŸå‹åˆæ¥è‡ªå“ªé‡Œå‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬åˆ›å»ºObjectå¯¹è±¡çœ‹çœ‹ // åˆ›å»ºä¸€ä¸ªå¯¹è±¡(è¿™ç§æ–¹å¼ç›¸å½“äºä¸‹é¢ä¸€ç§æ–¹å¼çš„è¯­æ³•ç³–ï¼Œæœ¬è´¨éƒ½æ˜¯åˆ›å»ºä¸€ä¸ªå¯¹è±¡)var obj1 = &#123;&#125; var obj2 = new Object() // åˆ›å»ºäº†ä¸€ä¸ªå¯¹è±¡// åˆ›å»ºå¯¹è±¡çš„è¯ï¼Œå…¶ä¸­æœ‰ä¸€æ­¥æ˜¯ï¼šå°†Objectå‡½æ•°çš„æ˜¾å¼åŸå‹prototypeèµ‹å€¼ç»™å®ä¾‹çš„éšå¼åŸå‹// ç›¸å½“äºè¿™é‡Œ// Object.prototype = obj2.__proto__// å› æ­¤ï¼ˆæˆ‘ä»¬çŸ¥é“è¿™é‡Œobj1/2.__proto__å·²ç»æ˜¯åˆ°é¡¶å±‚äº†ï¼‰console.log(Object.prototype === obj1.__proto__); // trueconsole.log(Object.prototype === obj2.__proto__); // true// Object.prototypeä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆå®ƒåº”è¯¥ä¹Ÿæœ‰ __proto__console.log(Object.prototype.__proto__); // null// å› æ­¤Object.prototypeæŒ‡å‘çš„å·²ç»æ˜¯é¡¶å±‚åŸå‹äº†console.log(Object.getOwnPropertyDescriptors(Object.prototype)) // æœ‰constructor,toStringç­‰å±æ€§å’Œæ–¹æ³• å› æ­¤ï¼ŒåŸå‹é“¾æœ€é¡¶å±‚çš„åŸå‹å¯¹è±¡å°±æ˜¯Objectçš„åŸå‹å¯¹è±¡ ä¹Ÿå°±æ˜¯è¯´ï¼ŒObjectæ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±» function Person(name) &#123; this.name = name&#125;// çœ‹çœ‹æ„é€ å‡½æ•°Personçš„åŸå‹console.log(Person.prototype);// &#123;&#125; çœ‹ä¸åˆ°ï¼åº”è¯¥æ˜¯ä¸å¯æšä¸¾å§console.log(Object.getOwnPropertyDescriptors(Person.prototype));//è¾“å‡º &#123;constructor: &#123;...&#125;&#125;console.log(Person.prototype.__proto__);//[Object: null prototype] &#123;&#125; é€šè¿‡åŸå‹é“¾å®ç°ç»§æ‰¿ ä¸ºä»€ä¹ˆéœ€è¦æœ‰ç»§æ‰¿ï¼Ÿ å¦‚æœæ²¡æœ‰ç»§æ‰¿ï¼Œæˆ‘ä»¬æƒ³åˆ›å»ºå¤šä¸ªç±»ï¼Œç±»é‡Œé¢çš„å±æ€§å’Œæ–¹æ³•å¾ˆå¤šæ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šå†™å¾ˆå¤šé‡å¤çš„ä»£ç ï¼Œæ‰€ä»¥ä¸»è¦æ˜¯ä¸ºäº†ä»£ç çš„å¤ç”¨ // Studentfunction Student(name, age, sno) &#123; this.name = name this.age = age this.sno = sno&#125;Student.prototype.running = function() &#123;&#125;// Teacherfunction Teacher(name, age, title) &#123; this.name = name this.age = age this.title = title&#125;Teacher.prototype.running = function() &#123;&#125; åŸå‹é“¾çš„ç»§æ‰¿æ–¹æ¡ˆ è‡ªå·±ç”»ç”»å›¾æ›´å¥½ç†è§£ // çˆ¶ç±»ï¼šå…¬å…±å±æ€§å’Œæ–¹æ³•function Person() &#123; this.name = &quot;Jackson&quot;, this.friends = []&#125;Person.prototype.eating = function() &#123; console.log(this.name + &quot;is eating&quot;);&#125;// å­ç±»ï¼šç‰¹æœ‰å±æ€§å’Œæ–¹æ³•function Student() &#123; this.sno = 111&#125;// newä¸€ä¸ªpersonvar p = new Person()Student.prototype = p var stu = new Student()// console.log(stu.sno); // 111// console.log(stu.name);// Jackson// stu.eating()// åŸå‹é“¾å®ç°ç»§æ‰¿çš„å¼Šç«¯ï¼š// 1.æ‰“å°stuå¯¹è±¡ï¼Œç»§æ‰¿çš„å±æ€§æ˜¯çœ‹ä¸åˆ°çš„// console.log(stu); // Person &#123; sno: 111 &#125;// 2.åˆ›å»ºå‡ºæ¥ä¸¤ä¸ªstuå¯¹è±¡var stu1 = new Student()var stu2 = new Student()// è·å–å¼•ç”¨ï¼Œä¿®æ”¹å¼•ç”¨ä¸­çš„å€¼ï¼Œä¼šç›¸äº’å½±å“// å› ä¸ºè¿™ä¸ªfre1è¢«åŠ åˆ°på¯¹è±¡ï¼Œè€Œstu1,stu2çš„__proto__éƒ½æŒ‡å‘pstu1.friends.push(&quot;fre1&quot;)console.log(stu1.friends); // [ &#x27;fre1&#x27; ]console.log(stu2.friends); // [ &#x27;fre1&#x27; ]// 3. åœ¨å‰é¢å®ç°ç±»çš„è¿‡ç¨‹ä¸­éƒ½æ²¡æœ‰ä¼ é€’å‚æ•°var stu3 = new Student(&quot;jeccy&quot;, 112)// ç›´æ¥åœ¨function Student(name,age)&#123;this.name = name this.age = age&#125;ï¼Ÿ// è‚¯å®šä¸è¡Œå•Šï¼Œæˆ‘ä»¬æ˜¯æƒ³è¦æŠŠnameçš„å¤„ç†æ”¾åœ¨Personçš„ å€Ÿç”¨æ„é€ å‡½æ•°å®ç°ç»§æ‰¿ // çˆ¶ç±»ï¼šå…¬å…±å±æ€§å’Œæ–¹æ³•function Person(name, age, friends) &#123; this.name = name, this.age = age this.friends = friends&#125;Person.prototype.eating = function() &#123; console.log(this.name + &quot;is eating&quot;);&#125;// å­ç±»ï¼šç‰¹æœ‰å±æ€§å’Œæ–¹æ³•function Student(name, age, friends, sno) &#123; // æˆ‘ä»¬åœ¨è¿™é‡Œè°ƒç”¨Person,å¹¶æŠŠéœ€è¦Personå¤„ç†çš„å‚æ•°ä¼ è¿‡å» // this å°±æ˜¯Studentçš„å®ä¾‹ Person.call(this, name, age, friends) // !!! this.sno = sno&#125;// newä¸€ä¸ªpersonvar p = new Person()Student.prototype = p // è§£å†³å¼Šç«¯3var stu1 = new Student(&quot;aaa&quot;, 18, [&#x27;fred1&#x27;], 111)console.log(stu1); // Person &#123; name: &#x27;aaa&#x27;, age: 18, friends: [ &#x27;fred1&#x27; ], sno: 111 &#125; è§£å†³å¼Šç«¯1var stu2 = new Student(&quot;vvv&quot;, 20, [&#x27;fred2&#x27;], 112)stu1.friends.push(&quot;hahaha&quot;)console.log(stu1.friends); // [ &#x27;fred2&#x27; ]console.log(stu2.friends); // [ &#x27;fred1&#x27;, &#x27;hahaha&#x27; ]// è§£å†³å¼Šç«¯2 ä½†æ˜¯è¿™ç§æ–¹æ³•ä¾ç„¶å­˜åœ¨å¼Šç«¯ï¼š Person è‡³å°‘è¢«è°ƒç”¨ä¸¤æ¬¡ï¼ˆä¸€å¼€å§‹new Personä¸€æ¬¡ï¼Œåé¢Person.callåˆä¼šè°ƒç”¨Personï¼‰ stuçš„åŸå‹å¯¹è±¡ä¸Šä¼šå¤šå‡ºä¸€äº›å±æ€§, ä½†æ˜¯è¿™äº›å±æ€§æ˜¯æ²¡æœ‰å­˜åœ¨çš„å¿…è¦ï¼ˆnew Personçš„æ—¶å€™çš„ï¼‰ æ³¨æ„ï¼šç›´æ¥å°†çˆ¶ç±»åŸå‹èµ‹å€¼ç»™å­ç±»ï¼Œä»¥åç»™æŸä¸ªå­ç±»æ·»åŠ æ–¹æ³•çš„æ—¶å€™ï¼Œä¼šä½¿æ‰€æœ‰çš„å­ç±»éƒ½æœ‰è¯¥æ–¹æ³•ï¼Œæ˜¾ç„¶æ˜¯ä¸è¡Œçš„ å› ä¸ºæ‰€æœ‰å­ç±»çš„prototypeéƒ½æŒ‡å‘åŒä¸€ä¸ªçˆ¶ç±»çš„åŸå‹ åŸå‹å¼ç»§æ‰¿å‡½æ•° - å¯¹è±¡ æˆ‘ä»¬å…ˆå®ç°å¯¹è±¡çš„ç»§æ‰¿ï¼Œåé¢å†æ‰©å±•åˆ°ç±» var obj = &#123; name: &quot;Jackson&quot;, age: 18&#125;// åŸå‹å¼ç»§æ‰¿å‡½æ•°// è¿™ä¸ªå‡½æ•°è¦åšåˆ°çš„æ˜¯ï¼Œä½ ç»™æˆ‘ä¼ å…¥çš„å¯¹è±¡ï¼Œä½œä¸ºæ–°å¯¹è±¡çš„åŸå‹function createObject(o) &#123; var newObj = &#123;&#125; // è¿™ä¸ªæ–¹æ³•æ˜¯æŠŠoè®¾ç½®ä¸ºnewObjçš„åŸå‹ Object.setPrototypeOf(newObj, o) return newObj&#125;// Douglas çš„å®ç°(å½“æ—¶è¿˜æ²¡æœ‰setPrototypeOfè¿™ä¸ªæ–¹æ³•)function createObject2(o) &#123; function Fn() &#123;&#125; Fn.prototype = o var newObj = new Fn() // å› æ­¤ newObj.__proto__ = Fn.prototype = o return newObj&#125;// ç°åœ¨ï¼Œæˆ‘ä»¬æƒ³è¦æ–°å»ºçš„å¯¹è±¡infoçš„åŸå‹æŒ‡å‘objï¼ˆåé¢æ‰©å±•åˆ°ç±»ï¼‰// var info = createObject(obj)// ä½†æ˜¯ æ–°çš„ECMA ç»™æˆ‘ä»¬æä¾›äº†æ–°çš„æ–¹æ³•ï¼šObject.create(obj)// Object.create()æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œä½¿ç”¨ç°æœ‰çš„å¯¹è±¡æ¥æä¾›æ–°åˆ›å»ºçš„å¯¹è±¡çš„__proto__// å®é™…ä¸Šè¿™ä¸ªæ–¹æ³•è·Ÿæˆ‘ä»¬ä¸Šé¢çš„ä¸¤ç§å®ç°æ–¹æ³•å®ç°çš„åŠŸèƒ½æ˜¯ä¸€æ ·çš„var info = Object.create(obj)console.log(info);// å·²ç»å®ç°äº†æˆ‘ä»¬çš„ç›®çš„console.log(info.__proto__); // &#123; name: &#x27;Jackson&#x27;, age: 18 &#125; Object.create() ï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/create å¯„ç”Ÿå¼ç»§æ‰¿å‡½æ•°ï¼ˆäº†è§£ï¼‰ å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯æ˜¯ç»“åˆåŸå‹ç±»ç»§æ‰¿å’Œå·¥å‚æ¨¡å¼çš„ä¸€ç§æ–¹å¼ å³åˆ›å»ºä¸€ä¸ªå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°, è¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†å°†è¿™ä¸ªå¯¹è±¡è¿”å› var personObj = &#123; running: function() &#123; console.log(&#x27;running&#x27;); &#125;&#125;// ç›®çš„ï¼šç»§æ‰¿ personObjé‡Œé¢çš„æ–¹æ³•function createStudent(name) &#123; var stu = Object.create(personObj) stu.name = name stu.studying = function() &#123; console.log(&quot;studying&quot;); &#125; return stu&#125;var stuObj = createStudent(&quot;why&quot;) å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿(æœ€ç»ˆæ–¹æ¡ˆ) åˆ©ç”¨å¯„ç”Ÿå¼ç»§æ‰¿å°†ç»„åˆå¼ç»§æ‰¿çš„ä¸¤ä¸ªé—®é¢˜è§£å†³ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ˜ç¡®ï¼Œå½“æˆ‘ä»¬åœ¨å­ç±»çš„æ„é€ å‡½æ•°ä¸­è°ƒç”¨çˆ¶ç±».call(thisï¼Œå‚æ•°)çš„æ—¶å€™ï¼Œå°±ä¼šå°†çˆ¶ç±»çš„å±æ€§å’Œæ–¹æ³•å¤åˆ¶ä¸€ä»½åˆ°å­ç±»ä¸­ï¼Œæ‰€ä»¥çˆ¶ç±»æœ¬èº«é‡Œé¢çš„å†…å®¹æˆ‘ä»¬æ˜¯ä¸éœ€è¦çš„ ç„¶åï¼Œæˆ‘ä»¬è¿˜éœ€è¦è·å–åˆ°ä¸€ä»½çˆ¶ç±»çš„åŸå‹å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³• // å¦‚æœä¸æƒ³ä½¿ç”¨Object.createè¿™ä¸ªæ–¹æ³•çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰å‰é¢è¯´è¿‡çš„æ–¹æ³•function createObject(o) &#123; function Fn() &#123;&#125; Fn.prototype = o return new Fn()&#125;function inheritPrototype(SubType, SuperType) &#123; // SubType.prototype = Object.create(SuperType.prototype) SubType.prototype = createObject(SuperType.prototype) // å½“ç„¶prototypeè¿˜éœ€è¦æœ‰constructor // è€Œä¸”æ§åˆ¶å°æ‰“å°å‡ºæ¥çš„ ç±»å‹çš„åç§°ï¼Œå®é™…ä¸Šå°±æ˜¯constructor.name // ä¹Ÿå°±æ˜¯constructoræŒ‡å‘çš„é‚£ä¸ªæ„é€ å‡½æ•°çš„åç§° // æ‰€ä»¥æˆ‘ä»¬è¿™é‡Œè¦æ·»åŠ constructorçš„valueæŒ‡å‘å­æ„é€ å‡½æ•°æœ¬èº« Object.defineProperty(SubType.prototype, &quot;constructor&quot;, &#123; enumerable: false, configurable: true, writable: true, value: SubType &#125;)&#125;// çˆ¶ç±»function Person(name, age, friends) &#123; this.name = name this.age = age this.friends = friends&#125;Person.prototype.running = function() &#123; console.log(&quot;running~&quot;)&#125;// å­ç±»function Student(name, age, friends, sno) &#123; Person.call(this, name, age, friends) // è·å–ä¸€ä»½Personä¸­çš„å±æ€§å’Œæ–¹æ³• this.sno = sno&#125;// Studentç±»è¿˜éœ€è¦è·å–ä¸€ä»½çˆ¶ç±»çš„prototypeçš„å±æ€§å’Œæ–¹æ³•inheritPrototype(Student, Person)var stu = new Student(&quot;why&quot;, 18, [&quot;kobe&quot;], 111)console.log(stu); // æ‰“å° Student &#123; name: &#x27;why&#x27;,age: 18,friends: [ &#x27;kobe&#x27; ],sno: 111,&#125; JSåŸå‹çš„è¡¥å…… hasOwnProperty åˆ¤æ–­å¯¹è±¡æ˜¯å¦æœ‰æŸä¸ªå±äºè‡ªå·±çš„å±æ€§ï¼Œä¸åŒ…æ‹¬åœ¨åŸå‹ä¸Šçš„ in/ for in æ“ä½œç¬¦ åˆ¤æ–­æŸä¸ªå±æ€§æ˜¯å¦åœ¨æŸä¸ªå¯¹è±¡æˆ–è€…å¯¹è±¡çš„åŸå‹ä¸Š var obj = &#123; name: &#x27;jackson&#x27;, age: 18&#125;// ç¬¬äºŒä¸ªå‚æ•°æ˜¯infoæ·»åŠ å±äºè‡ªå·±çš„å±æ€§var info = Object.create(obj, &#123; address: &#123; value: &quot;åŒ—äº¬&quot;, enumerable: true &#125;&#125;)// hasOwnPropertyconsole.log(info.hasOwnProperty(&quot;address&quot;)); // trueconsole.log(info.hasOwnProperty(&quot;name&quot;)); // false// in æ“ä½œç¬¦: ä¸ç®¡åœ¨å½“å‰å¯¹è±¡è¿˜æ˜¯åŸå‹ä¸­è¿”å›çš„éƒ½æ˜¯trueconsole.log(&quot;address&quot; in info); // trueconsole.log(&quot;name&quot; in info); // true// for in (åŒ…æ‹¬åŸå‹ä¸Šçš„å±æ€§éƒ½å¯ä»¥éå†åˆ°)for(var key in info) &#123; console.log(key); // address name age&#125; instanceof ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š function Person() &#123;&#125;function Student() &#123;&#125;// ä½¿ç”¨å‰é¢çš„å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿inheritPrototype(Student, Person)console.log(Person.prototype.__proto__); // [Object: null prototype] &#123;&#125;var stu = new Student()// stuæ˜¯å¦å‡ºç°åœ¨æ„é€ å‡½æ•° Student çš„åŸå‹é“¾ä¸Šconsole.log(stu instanceof Student); // trueconsole.log(stu instanceof Person); // trueconsole.log(stu instanceof Object); // true isPrototypeOf(äº†è§£) ç”¨äºæ£€æµ‹æŸä¸ªå¯¹è±¡ï¼Œæ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Š var info = Object.create(obj)// objæ˜¯å¦å‡ºç°åœ¨infoçš„åŸå‹é“¾ä¸Šconsole.log(obj.isPrototypeOf(info)) å¯¹è±¡-å‡½æ•°-åŸå‹ä¹‹é—´çš„å…³ç³» var obj = &#123; name: &quot;jackson&quot;&#125;// åªè¦æ˜¯å¯¹è±¡ï¼Œé‡Œé¢å°±ä¼šæœ‰ä¸€ä¸ª__proto__å¯¹è±¡ï¼ˆéšå¼åŸå‹å¯¹è±¡ï¼‰console.log(obj.__proto__);// [Object: null prototype] &#123;&#125;function Foo() &#123;&#125;// æ‰€æœ‰çš„ function xx() &#123;&#125;// æˆ‘ä»¬éƒ½å¯ä»¥è®¤ä¸º xx æ˜¯ new Function åˆ›å»ºå‡ºæ¥çš„// ç›¸å½“äº var xxx = new Function// åªè¦æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆå®ƒå°±ä¼šæœ‰ä¸€ä¸ªæ˜¾å¼åŸå‹å¯¹è±¡ï¼šFoo.prototype// é‚£ Foo.prototype è¿™ä¸ªå¯¹è±¡åˆæ¥è‡ªå“ªé‡Œå‘¢ï¼Ÿ// åˆ›å»ºå‡½æ•°çš„æ—¶å€™ï¼ŒJSå†…éƒ¨å°±ä¼šåˆ›å»ºä¸€ä¸ªå¯¹è±¡// å¹¶æ·»åŠ åˆ°å‡½æ•°çš„prototypeå±æ€§ä¸­ï¼šFoo.prototype = &#123;constructor: Foo&#125;// Fooä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œåªè¦æ˜¯å¯¹è±¡ï¼Œå°±ä¼šæœ‰éšå¼åŸå‹å¯¹è±¡ Foo.__proto__// Foo.__proto__æ¥è‡ªå“ªé‡Œï¼Ÿ// var Foo = new Function() console.log(Foo.__proto__ === Function.prototype); // true// è€Œ Function.prototypeå¯¹è±¡æ˜¯æˆ‘ä»¬åˆ›å»ºFunctionå‡½æ•°çš„æ—¶å€™åˆ›å»ºå‡ºæ¥çš„// Function.prototype = &#123;constructor: Function&#125;// åˆ›å»ºFunctionå‡½æ•°// function Function() &#123;&#125;// Function.prototype// Function åˆæ˜¯ä¸€ä¸ªå¯¹è±¡// Function.__proto__// å”¯ä¸€ä¸€ä¸ªæ¯”è¾ƒç‰¹æ®Šçš„ä¸œè¥¿console.log(Function.__proto__ === Function.prototype); // true// å¦å¤–è¿˜æœ‰ function Object() &#123;&#125;// Objectä½œä¸ºå‡½æ•°, å°±ä¼šæœ‰Object.prototype// Objectä½œä¸ºå¯¹è±¡, å°±ä¼šæœ‰Object.__proto__// Objectå‡½æ•°æ˜¯Functionåˆ›å»ºå‡ºæ¥çš„ï¼Œæ‰€ä»¥// Objcet.__proto__ === Function.prototype// æœ€åå°±æ˜¯æ¯ä¸ªå‡½æ•°çš„åŸå‹prototypeéƒ½ä¼šæœ‰ä¸€ä¸ªconstructoræŒ‡å›å‡½æ•°æœ¬èº« æœ€å ä¸Šå›¾ï¼","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"V3","slug":"V3","permalink":"https://hillyee.github.io/tags/V3/"}]},{"title":"æ—¥å¸¸è®°å½•","slug":"æ—¥å¸¸è®°å½•","date":"2022-04-02T04:22:13.000Z","updated":"2022-04-02T08:38:34.824Z","comments":true,"path":"2022/04/02/æ—¥å¸¸è®°å½•/","link":"","permalink":"https://hillyee.github.io/2022/04/02/%E6%97%A5%E5%B8%B8%E8%AE%B0%E5%BD%95/","excerpt":"","text":"","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://hillyee.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"å¾…æ•´ç†æˆ–è§£å†³","slug":"å¾…æ•´ç†æˆ–è§£å†³","date":"2022-04-02T04:21:08.000Z","updated":"2022-04-03T03:20:09.044Z","comments":true,"path":"2022/04/02/å¾…æ•´ç†æˆ–è§£å†³/","link":"","permalink":"https://hillyee.github.io/2022/04/02/%E5%BE%85%E6%95%B4%E7%90%86%E6%88%96%E8%A7%A3%E5%86%B3/","excerpt":"","text":"åŸå‹å’ŒåŸå‹é“¾ å®ç°ç»§æ‰¿ JSæ•°æ®ç±»å‹åˆ¤æ–­","categories":[{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://hillyee.github.io/categories/%E5%85%B6%E4%BB%96/"}],"tags":[]},{"title":"07_ä¸¥æ ¼æ¨¡å¼","slug":"07_ä¸¥æ ¼æ¨¡å¼","date":"2022-04-01T16:47:09.000Z","updated":"2022-04-03T07:40:39.492Z","comments":true,"path":"2022/04/02/07_ä¸¥æ ¼æ¨¡å¼/","link":"","permalink":"https://hillyee.github.io/2022/04/02/07_%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/","excerpt":"","text":"ä¸¥æ ¼æ¨¡å¼ å¦‚ä½•å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Ÿ åœ¨æ–‡ä»¶æˆ–è€…å‡½æ•°å¼€å¤´ä½¿ç”¨ â€œuse strictâ€ ä¸¥æ ¼æ¨¡å¼å¸¸è§çš„é™åˆ¶ &quot;use strict&quot;&quot;use strict&quot;// 1.ç¦æ­¢æ„å¤–åˆ›å»ºå…¨å±€å˜é‡// åœ¨å…¨å±€ä¸­ä¸ä½¿ç”¨å…³é”®å­—ç›´æ¥å®šä¹‰å˜é‡message = &quot;hello&quot;message is not defined// 2. ä¸å…è®¸å‡½æ•°æœ‰ç›¸åŒçš„å‚æ•°åç§°function foo(x, y, x) &#123;&#125;// Duplicate parameter name not allowed in this context// 3.ä½¿é™é»˜é”™è¯¯(ä¸æŠ¥é”™ä½†ä¹Ÿæ²¡æœ‰ä»»ä½•æ•ˆæœ)çš„èµ‹å€¼æ“ä½œæŠ›å‡ºå¼‚å¸¸true.name = &quot;abc&quot;NaN = 123var obj = &#123;&#125;Object.defineProperty(obj, &quot;name&quot;, &#123; configurable: false, writable: false, // ä¸å¯å†™ value: &quot;hillyee&quot;&#125;)obj.name = &quot;jenny&quot;// è¯•å›¾åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼ŒæŠ¥é”™delete obj.name// Cannot delete property &#x27;name&#x27; of #&lt;Object&gt;// 4.ä¸å…è®¸ä½¿ç”¨åŸå…ˆçš„å…«è¿›åˆ¶æ ¼å¼var num = 0o123 // å…«è¿›åˆ¶var num2 = 0x123 // åå…­è¿›åˆ¶var num3 = 0b100 // äºŒè¿›åˆ¶ ä¸¥æ ¼æ¨¡å¼ä¸‹çš„this &quot;use strict&quot;// åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œç‹¬ç«‹å‡½æ•°è°ƒç”¨thisé»˜è®¤ç»‘å®šä¸æ˜¯windowï¼Œè€Œæ˜¯undefinedfunction foo() &#123; console.log(this); // undefined&#125;foo()var obj = &#123; name: &quot;hill&quot;, foo: foo&#125;var bar = obj.foobar()// setTimeoutçš„this// å†…éƒ¨ fn.apply(this=window)setTimeout(function() &#123; console.log(this); // window&#125;, 1000)","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"V2","slug":"V2","permalink":"https://hillyee.github.io/tags/V2/"}]},{"title":"06_çº¯å‡½æ•°-æŸ¯é‡ŒåŒ–-ç»„åˆ","slug":"06_çº¯å‡½æ•°-æŸ¯é‡ŒåŒ–-ç»„åˆ","date":"2022-04-01T16:44:34.000Z","updated":"2022-04-03T07:40:37.454Z","comments":true,"path":"2022/04/02/06_çº¯å‡½æ•°-æŸ¯é‡ŒåŒ–-ç»„åˆ/","link":"","permalink":"https://hillyee.github.io/2022/04/02/06_%E7%BA%AF%E5%87%BD%E6%95%B0-%E6%9F%AF%E9%87%8C%E5%8C%96-%E7%BB%84%E5%90%88/","excerpt":"","text":"çº¯å‡½æ•° - æŸ¯é‡ŒåŒ– - ç»„åˆ çº¯å‡½æ•° ä»€ä¹ˆæ˜¯çº¯å‡½æ•°ï¼Ÿ ç¡®å®šçš„è¾“å…¥ï¼Œä¸€å®šä¼šäº§ç”Ÿç¡®å®šçš„è¾“å‡º å‡½æ•°åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¸èƒ½äº§ç”Ÿå‰¯ä½œç”¨ ä»€ä¹ˆæ˜¯å‰¯ä½œç”¨ï¼Ÿ åœ¨æ‰§è¡Œä¸€ä¸ªå‡½æ•°æ—¶ï¼Œé™¤äº†è¿”å›å€¼å‡½æ•°ä¹‹å¤–ï¼Œè¿˜å¯¹è°ƒç”¨å‡½æ•°äº§ç”Ÿäº†é™„åŠ çš„å½±å“ï¼Œæ¯”å¦‚è¯´ä¿®æ”¹äº†å…¨å±€å˜é‡ï¼Œä¿®æ”¹å‚æ•°æˆ–è€…æ”¹å˜å¤–éƒ¨çš„å­˜å‚¨ çº¯å‡½æ•°ä¾‹å­ var names = [&quot;abc&quot;, &quot;cba&quot;, &quot;nba&quot;, &quot;dna&quot;]// sliceåªè¦ç»™å®ƒä¼ å…¥ä¸€ä¸ªstart/end, é‚£ä¹ˆå¯¹äºåŒä¸€ä¸ªæ•°ç»„æ¥è¯´, å®ƒä¼šç»™æˆ‘ä»¬è¿”å›ç¡®å®šçš„å€¼// sliceå‡½æ•°æœ¬èº«å®ƒæ˜¯ä¸ä¼šä¿®æ”¹åŸæ¥çš„æ•°ç»„// æ‰€ä»¥sliceå‡½æ•°æœ¬èº«å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°var newNames1 = names.slice(0, 3)console.log(newNames1)// spliceä¸æ˜¯ä¸€ä¸ªçº¯å‡½æ•°var newNames2 = names.splice(2)console.log(newNames2)console.log(names) // [ &#x27;abc&#x27;, &#x27;cba&#x27; ] æ”¹å˜äº†åŸæ•°ç»„ JavaScriptæŸ¯é‡ŒåŒ– ä»€ä¹ˆæ˜¯æŸ¯é‡ŒåŒ–ï¼Ÿ æŠŠæ¥æ”¶å¤šä¸ªå‚æ•°çš„å‡½æ•°å˜æˆæ¥æ”¶ä¸€ä¸ªå•ä¸€å‚æ•°çš„å‡½æ•° â€œå¦‚æœä½ å›ºå®šæŸäº›å‚æ•°ï¼Œä½ å°†å¾—åˆ°æ¥å—ä½™ä¸‹å‚æ•°çš„ä¸€ä¸ªå‡½æ•°â€ åªä¼ é€’ç»™å‡½æ•°ä¸€éƒ¨åˆ†å‚æ•°æ¥è°ƒç”¨å®ƒï¼Œè®©å®ƒè¿”å›ä¸€ä¸ªå‡½æ•°å»å¤„ç†å‰©ä½™çš„å‚æ•°ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¹‹ä¸ºæŸ¯é‡ŒåŒ– æŸ¯é‡ŒåŒ–çš„ç»“æ„ function add(x, y, z) &#123; return x + y + z&#125;var result = add(10, 20, 30)console.log(result); // 60function sum1(x) &#123; return function(y) &#123; return function(z) &#123; return x + y + z &#125; &#125;&#125;var result2 = sum1(10)(20)(30) // 60console.log(result2);// ç®€åŒ–var sum2 = x =&gt; y =&gt; z =&gt; x + y + z æŸ¯é‡ŒåŒ–è®©å‡½æ•°çš„èŒè´£å•ä¸€ æ¯æ¬¡æ¥æ”¶çš„ä¸€ä¸ªå‚æ•°ï¼Œéƒ½åšå®ƒè‡ªå·±çš„é€»è¾‘ å¯ä»¥æ›´å¥½çš„å¤ç”¨å‚æ•°é€»è¾‘ function makeAdder(count) &#123; count = count * count return function(num) &#123; return count + num &#125;&#125;// æ¯”å¦‚è¯´æˆ‘ä»¬æƒ³è¦æ¯æ¬¡çš„countéƒ½æ˜¯5var adder5 = makeAdder(5)adder5(10)adder5(13) æŸ¯é‡ŒåŒ–å‡½æ•°çš„å®ç° function add1(x, y, z) &#123; return x + y + z&#125;function myCurrying(fn) &#123; function curried(...args) &#123; // å½“å·²ç»ä¼ å…¥çš„å‚æ•° å¤§äºç­‰äº éœ€è¦çš„å‚æ•°æ—¶, å°±æ‰§è¡Œå‡½æ•° if (args.length &gt;= fn.length) &#123; // fn() return fn.apply(this, args) &#125; else &#123; // æ²¡æœ‰è¾¾åˆ°ä¸ªæ•°æ—¶, éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°,ç»§ç»­æ¥æ¥æ”¶å‚æ•° function curried2(...args2) &#123; // æ¥æ”¶åˆ°å‚æ•°å, éœ€è¦é€’å½’è°ƒç”¨curriedæ¥æ£€æŸ¥å‡½æ•°çš„ä¸ªæ•°æ˜¯å¦è¾¾åˆ° return curried.apply(this, [...args, ...args2]) &#125; return curried2 &#125; &#125; // è¿”å›ä¸€ä¸ªæŸ¯é‡ŒåŒ–çš„å‡½æ•° return curried&#125;var curryAdd = myCurrying(add1)console.log(curryAdd(10, 20, 30));console.log(curryAdd(10)(20, 30));console.log(curryAdd(10)(20)(30)); ç»„åˆå‡½æ•° ä»€ä¹ˆæ˜¯ç»„åˆå‡½æ•°ï¼Ÿ ç»„åˆå‡½æ•°æ˜¯åœ¨ JavaScript å¼€å‘è¿‡ç¨‹ä¸­ä¸€ç§å¯¹å‡½æ•°çš„ä½¿ç”¨æŠ€å·§ã€æ¨¡å¼ ç»„åˆå‡½æ•°çš„ä¾‹å­ function double(num) &#123; return num * 2&#125;function square(num) &#123; return num ** 2&#125;var count = 10var result = square((double(count))) å®ç°ç»„åˆå‡½æ•° function hyCompose(...fns) &#123; // å¦‚æœä¸æ˜¯å‡½æ•°,ç›´æ¥æŠ¥é”™ let length = fns.length for (let i = 0; i &lt; length; i++) &#123; if(typeof fns[i] !== &#x27;function&#x27;) &#123; throw new TypeError(&#x27;Expected a function&#x27;) &#125; &#125; // å–å‡ºæ‰€æœ‰çš„å‡½æ•°ä¸€æ¬¡è°ƒç”¨ return function(...args) &#123; let index = 0 let result = length ? fns[index].apply(this, args) : args while(++index &lt; length) &#123; result = fns[index].call(this, result) &#125; return result &#125;&#125;function double(m) &#123; return m * 2&#125;function square(n) &#123; return n ** 2&#125;let newFn = hyCompose(double, square)console.log(newFn(10))","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"V1","slug":"V1","permalink":"https://hillyee.github.io/tags/V1/"}]},{"title":"05_è®¤è¯†arguments","slug":"05_è®¤è¯†arguments","date":"2022-04-01T16:43:02.000Z","updated":"2022-04-03T07:40:35.522Z","comments":true,"path":"2022/04/02/05_è®¤è¯†arguments/","link":"","permalink":"https://hillyee.github.io/2022/04/02/05_%E8%AE%A4%E8%AF%86arguments/","excerpt":"","text":"è®¤è¯† arguments ä»€ä¹ˆæ˜¯ arguments arguments æ˜¯ä¸€ä¸ªå¯¹åº”äºä¼ é€’ç»™å‡½æ•°çš„å‚æ•°çš„ç±»æ•°ç»„å¯¹è±¡ã€‚(MDN) ç±»æ•°ç»„å¯¹è±¡ï¼Œå°±è¯´æ˜å®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªå¯¹è±¡ç±»å‹ ç±»æ•°ç»„è¡¨ç¤ºå®ƒé•¿å¾—åƒæ•°ç»„ï¼Œå¹¶ä¸”æ‹¥æœ‰æ•°ç»„çš„ä¸€äº›ç‰¹æ€§ï¼Œæ¯”å¦‚è¯´ lengthï¼Œå¯ä»¥é€šè¿‡ index è®¿é—® ä½†æ˜¯å´æ²¡æœ‰æ•°ç»„çš„ä¸€äº›æ–¹æ³•ï¼Œæ¯”å¦‚è¯´ forEachï¼Œmap ç­‰ function foo() &#123; // ä¼šå¸®ä½ æ¥æ”¶æ‰€æœ‰ä¼ é€’ç»™å‡½æ•°çš„å‚æ•° console.log(arguments); // [Arguments] &#123; &#x27;0&#x27;: 10, &#x27;1&#x27;: 20, &#x27;2&#x27;: 30 &#125; // è·å–å‚æ•°çš„é•¿åº¦ console.log(arguments.length); // 3 // æ ¹æ®ç´¢å¼•å€¼è·å–æŸä¸€ä¸ªå‚æ•° console.log(arguments[1]); // 20 // è·å–å½“å‰ arguments æ‰€åœ¨çš„å‡½æ•° console.log(arguments.callee); // [Function: foo] // arguments.forEach() æ˜¯ä¸å¯ä»¥çš„&#125;foo(10,20,30) arguments è½¬æˆæ•°ç»„ å¦‚æœæˆ‘ä»¬éœ€è¦éå†é‡Œé¢çš„å‚æ•°å‘¢ï¼Ÿæˆ–è€…è¯´ä½¿ç”¨ä¸€äº›æ•°ç»„çš„æ–¹æ³•å‘¢ï¼Ÿ æ‰€ä»¥åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæŠŠ arguments è½¬æˆæ•°ç»„ ç¬¬ä¸€ç§æ–¹æ³•: è‡ªå·±éå† function foo() &#123; // æˆ‘ä»¬å¯ä»¥é€šè¿‡ç´¢å¼•å€¼æ‹¿åˆ° arguments çš„æ¯ä¸€ä¸ªå€¼ // ç„¶åæ·»åŠ åˆ°æ–°çš„æ•°ç»„ let newArr = [] for (let i = 0; i &lt; arguments.length; i++) &#123; newArr.push(arguments[i]) &#125; console.log(newArr); // [ 10, 20, 30, 40, 50 ]&#125;foo(10, 20, 30, 40, 50) ç¬¬äºŒç§æ–¹æ³•ï¼šArray.prototype.slice function foo() &#123; let newArr = Array.prototype.slice.call(arguments) console.log(newArr); // [1, 2, 3, 4, 5, 6]&#125;foo(1,2,3,4,5,6) Array.prototype.slice.call(arguments) ï¼Ÿä»€ä¹ˆæ„æ€å‘€ï¼Ÿ é¦–å…ˆï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ slice çš„æ—¶å€™ï¼Œæ˜¯ arr.slice(start, end)ï¼Œé‚£å¦‚æœæ²¡æœ‰è¿™ä¸ªarrå‘¢ï¼Ÿæˆ‘ä»¬æ€ä¹ˆæ‰èƒ½æ‹¿åˆ° slice è¿™ä¸ªæ–¹æ³• æ˜¯ä¸æ˜¯å¯ä»¥åœ¨ Array çš„åŸå‹ä¸Šé¢æ‰¾è¿™ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ Array.prototype.slice() é‚£ä¸ºä»€ä¹ˆè¦ç”¨ call æ¥è°ƒç”¨ï¼Ÿ æˆ‘ä»¬å…ˆæ¥æ¨¡æ‹Ÿä¸€ä¸‹ Array ä¸­çš„ slice æ˜¯æ€ä¹ˆå®ç°çš„ Array.prototype.myslice = function(start, end) &#123; // å¦‚æœæˆ‘ä»¬ç›´æ¥ Array.prototype.myslice() è¿™æ ·è°ƒç”¨çš„è¯, this æŒ‡å‘çš„å°±æ˜¯prototypeäº† // è€Œæˆ‘ä»¬å¸Œæœ›çš„æ˜¯, è¿™é‡Œçš„ this æ˜¯æŒ‡å‘è°ƒç”¨ slice è¿™ä¸ªæ–¹æ³•çš„æ•°ç»„ let arr = this start = start || 0 end = end || arr.length let newArray = [] // ä»startåˆ°end(ä¸åŒ…æ‹¬end),æŠŠå…ƒç´ æ·»åŠ åˆ°æ•°ç»„ for (let i = start; i &lt; end; i++) &#123; newArray.push(arr[i]) &#125; return newArray&#125; æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ call æ¥æ˜¾å¼ç»‘å®šè¿™ä¸ª thisï¼Œè®©thisæŒ‡å‘æ•°ç»„ let newArr = Array.prototype.myslice.call([1,2,3,4,5,6])console.log(newArr); // [1, 2, 3, 4, 5, 6]// å½“ç„¶å¯ä»¥ä¼ é€’å‚æ•°let newArr2 = Array.prototype.myslice.call([1,2,3,4,5,6], 2, 4)console.log(newArr2); // [3, 4] é‚£è·Ÿæˆ‘ä»¬ arguments æœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ Arrayå†…éƒ¨ slice çš„å®ç°åªä¸è¿‡æ˜¯å¯¹ thisï¼Œä¹Ÿå°±æ˜¯éœ€è¦ä½¿ç”¨ slice çš„æ•°ç»„è¿›è¡Œéå†ï¼Œç„¶åæŠŠéœ€è¦çš„éƒ¨åˆ†åŠ å…¥åˆ°æ–°æ•°ç»„ é‚£éå† arguments ä¹Ÿå¯ä»¥å•Šï¼ŒæŠŠå…ƒç´ ä¸€ä¸ªä¸ªåŠ å…¥åˆ°ä¸€ä¸ªæ•°ç»„é‡Œé¢ï¼Œå†æŠŠè¿™ä¸ªæ•°ç»„è¿”å›ï¼Œæœ€åä¸å°±å®ç°äº† arguments è½¬æ•°ç»„äº†å— function foo() &#123; let newArr = Array.prototype.slice.call(arguments) console.log(newArr); // [1, 2, 3, 4, 5, 6] // åŒæ ·é“ç†çš„è¿˜æœ‰ä¸€ç§æ–¹æ³•, æˆ‘ä»¬ç›®çš„å°±æ˜¯æ‹¿åˆ° slice è¿™ä¸ªæ–¹æ³•,å¹¶ä¸”è®© this ç»‘å®š arguments,è®©å†…éƒ¨éå†arguments let newArr2 = [].slice.call(arguments)&#125;foo(1,2,3,4,5,6) å†çœ‹å›è¿™ä¸ªï¼Œåº”è¯¥ç†è§£äº†å§ Array.from (ES6) Array.from() æ–¹æ³•å¯¹ä¸€ä¸ªç±»ä¼¼æ•°ç»„æˆ–å¯è¿­ä»£å¯¹è±¡åˆ›å»ºä¸€ä¸ªæ–°çš„ï¼Œæµ…æ‹·è´çš„æ•°ç»„å®ä¾‹ï¼ˆMDNï¼‰ function foo() &#123; let newArr = Array.from(arguments) console.log(newArr); // [1, 2, 3, 4, 5, 6]&#125;foo(1,2,3,4,5,6) å±•å¼€è¿ç®—ç¬¦ (ES6) function foo() &#123; // å› ä¸ºå±•å¼€è¿ç®—ç¬¦å®é™…ä¸Šä¹Ÿæ˜¯éå†ï¼ŒæŠŠéå†çš„å…ƒç´ ä¸€ä¸ªä¸ªæ”¾åˆ°æ•°ç»„ let newArr = [...arguments] console.log(newArr); // [1, 2, 3, 4, 5, 6]&#125;foo(1,2,3,4,5,6) ç®­å¤´å‡½æ•°æ²¡æœ‰ arguments ç®­å¤´å‡½æ•°æ˜¯ä¸ç»‘å®š arguments çš„ï¼Œå¦‚æœåœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ argumentsï¼Œä¼šå»æ‰¾ä¸Šå±‚ä½œç”¨åŸŸä¸­çš„arguments æ³¨æ„ï¼Œå…¨å±€ä½œç”¨åŸŸæ˜¯æ²¡æœ‰ arguments çš„ var foo = () =&gt; &#123; // æ‰¾ä¸Šå±‚ä½œç”¨åŸŸï¼Œæ‰¾åˆ° window console.log(arguments); // arguments is not defined&#125;foo() function foo() &#123; // arguments æœ‰ 123 console.log(arguments); // Arguments [123] var bar = () =&gt; &#123; console.log(arguments); // Arguments [123] &#125; return bar&#125;var fn = foo(123)fn() é‚£å¦‚æœæƒ³ä¼ é€’å¤šä¸ªå‚æ•°å‘¢ï¼Ÿç”¨ ES6 çš„å‰©ä½™å‚æ•° var foo = (a, b, ...args) =&gt; &#123; console.log(a, b); // 1 2 console.log(args); // [3,4,5,6]&#125;foo(1,2,3,4,5,6)","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"V2","slug":"V2","permalink":"https://hillyee.github.io/tags/V2/"}]},{"title":"Vue3æºç å­¦ä¹ ","slug":"Vue3æºç å­¦ä¹ ","date":"2022-03-31T11:42:30.000Z","updated":"2022-03-31T14:43:32.549Z","comments":true,"path":"2022/03/31/Vue3æºç å­¦ä¹ /","link":"","permalink":"https://hillyee.github.io/2022/03/31/Vue3%E6%BA%90%E7%A0%81%E5%AD%A6%E4%B9%A0/","excerpt":"","text":"Vue3æºç å­¦ä¹  ç¬¬ä¸€æ¬¡è¿™æ ·å­¦ä¹ æºç è¿˜æ˜¯æŒºæœ‰éš¾åº¦çš„ï¼Œå¸Œæœ›åé¢å¯ä»¥æ…¢æ…¢æå‡ï¼Œæœ‰è‡ªå·±é˜…è¯»æºç çš„èƒ½åŠ›å­ çœŸå®çš„DOMæ¸²æŸ“ ä¼ ç»Ÿçš„å‰ç«¯å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ˜¯ç¼–å†™è‡ªå·±çš„HTMLï¼Œæœ€ç»ˆè¢«æ¸²æŸ“åˆ°æµè§ˆå™¨ä¸Šçš„ï¼Œè¿™ä¸ªè¿‡ç¨‹å¤§æ¦‚æ˜¯ï¼š è§£æ html è½¬åŒ–æˆ DOM æ ‘ï¼Œç„¶åæ¸²æŸ“åˆ°é¡µé¢ è™šæ‹ŸDOM æ¸²æŸ“è¿‡ç¨‹ æºç çš„ä¸‰å¤§æ ¸å¿ƒç³»ç»Ÿ Complieræ¨¡å—ï¼šç¼–è¯‘æ¨¡æ¿ç³»ç»Ÿ Runtimeæ¨¡å—ï¼šä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º Rendereræ¨¡å—ï¼ŒçœŸæ­£æ¸²æŸ“çš„æ¨¡å— Reactivityæ¨¡å—ï¼šå“åº”å¼ç³»ç»Ÿ ä¸‰å¤§ç³»ç»ŸååŒå·¥ä½œ å®ç° Mini-Vue mini-vueçš„å®ç°ä¹Ÿæ˜¯ï¼Œåé¢æœ‰æ—¶é—´å¾—å›æ¥é‡æ–°çœ‹çœ‹ åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š æ¸²æŸ“ç³»ç»Ÿæ¨¡å— å¯å“åº”å¼ç³»ç»Ÿæ¨¡å— åº”ç”¨ç¨‹åºå…¥å£æ¨¡å— æ¸²æŸ“ç³»ç»Ÿå®ç° åŒ…å«ä¸‰ä¸ªåŠŸèƒ½ï¼š h å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ª VNode å¯¹è±¡ mount å‡½æ•°ï¼Œç”¨äºå°† VNode æŒ‚è½½åˆ° DOM ä¸Š patch å‡½æ•°ï¼Œç”¨äºå¯¹æ¯”ä¸¤ä¸ª VNodeï¼Œå†³å®šå¦‚ä½•å¤„ç†æ–°çš„VNodeï¼ˆdiffï¼‰ hå‡½æ•°ç”Ÿæˆ VNode // ç”Ÿæˆ VNode// ç›´æ¥è¿”å›ä¸€ä¸ª VNodeå¯¹è±¡å³å¯const h = (tag, props, children) =&gt; &#123; return &#123; tag, props, children &#125;&#125; mountå‡½æ•°æŒ‚è½½ vnode // mountå‡½æ•°, æŒ‚è½½VNodeconst mount = (vnode, container) =&gt; &#123; // 1.æ ¹æ®tagåˆ›å»ºHTMLå…ƒç´ ,å¹¶ä¸”å­˜å‚¨åˆ°vnodeçš„elä¸­ const el = vnode.el = document.createElement(vnode.tag) // 2.å¤„ç†propså±æ€§ // 2.1 å¦‚æœä»¥onå¼€å¤´,é‚£ä¹ˆç›‘å¬äº‹ä»¶ // 2.2 æ™®é€šå±æ€§ç›´æ¥é€šè¿‡ setAttribute æ·»åŠ  if (vnode.props) &#123; for (const key in vnode.props) &#123; const value = vnode.props[key] if (key.startsWith(&quot;on&quot;)) &#123; el.addEventListener(key.slice(2).toLowerCase(), value) &#125; else &#123; el.setAttribute(key, value) &#125; &#125; &#125; // 3.å¤„ç†children if (vnode.children) &#123; if (typeof vnode.children === &#x27;string&#x27;) &#123; el.textContent = vnode.children &#125; else &#123; vnode.children.forEach(item =&gt; &#123; mount(item, el) &#125;); &#125; &#125; // 4.å°† elæŒ‚è½½åˆ°containerä¸Š container.appendChild(el)&#125; patchå‡½æ•° - å¯¹æ¯”ä¸¤ä¸ªVNode // patch,å¯¹æ¯”ä¸¤ä¸ª VNodeconst patch = (n1, n2) =&gt; &#123; // 1. tagä¸åŒ,ç›´æ¥åŠ å…¥æ–°çš„èŠ‚ç‚¹ if (n1.tag !== n2.tag) &#123; const n1Elparent = n1.el.parentElement n1Elparent.removeChild(n1.el) mount(n2, n1Elparent) &#125; else &#123; // 1. å–å‡ºelementå¯¹è±¡,å¹¶ä¸”åœ¨n2ä¸­è¿›è¡Œä¿å­˜ const el = n2.el = n1.el // 2. å¤„ç†props const oldProps = n1.props || &#123;&#125; const newProps = n2.props || &#123;&#125; // 2.1 è·å–æ‰€æœ‰çš„newPropsæ·»åŠ åˆ°el for (const key in newProps) &#123; const oldValue = oldProps[key] const newValue = newProps[key] if (newValue !== oldValue) &#123; if (key.startsWith(&quot;on&quot;)) &#123; // å¯¹äº‹ä»¶ç›‘å¬çš„åˆ¤æ–­ el.addEventListener(key.slice(2).toLowerCase(), newValue) &#125; else &#123; el.setAttribute(key, newValue) &#125; &#125; &#125; // 2.2åˆ é™¤æ—§çš„props for(const key in oldProps) &#123; if (key.startsWith(&quot;on&quot;)) &#123; const value = oldProps[key] el.removeEventListener(key.slice(2).toLowerCase(), value) &#125; if (!(key in newProps)) &#123; el.removeAttribute(key) &#125; &#125; // 3.å¤„ç†children const oldChildren = n1.children || [] const newChildren = n2.children || [] if (typeof newChildren === &quot;string&quot;) &#123; // 3.1newChildrenæœ¬èº«æ˜¯ä¸€ä¸ªstring // è¾¹ç•Œæƒ…å†µ å¦‚æœoldChildrenä¹Ÿæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² if (typeof oldChildren === &quot;string&quot;) &#123; if (newChildren !== oldChildren) &#123; el.textContent = newChildren &#125; &#125; else &#123; el.innerHTML = newChildren &#125; &#125; else &#123; // 3.2 newChildrenæœ¬èº«æ˜¯ä¸€ä¸ªæ•°ç»„ if (typeof oldChildren === &quot;string&quot;) &#123; el.innerHTML = &quot;&quot; newChildren.forEach(item =&gt; &#123; mount(item, el) &#125;) &#125; else &#123; // oldChildren ä¹Ÿæ˜¯æ•°ç»„ // 1. å‰é¢æœ‰ç›¸åŒèŠ‚ç‚¹çš„ const commonLength = Math.min(oldChildren.length, newChildren.length) for (let i = 0; i &lt; commonLength; i++) &#123; patch(oldChildren[i], newChildren[i]) &#125; // 2.å¦‚æœæ–°èŠ‚ç‚¹çš„lengthæ›´é•¿ï¼Œé‚£ä¹ˆå‰©ä½™çš„æ–°èŠ‚ç‚¹è¿›è¡ŒæŒ‚è½½æ“ä½œ if (newChildren.length &gt; oldChildren.length) &#123; newChildren.slice(oldChildren.length).forEach(item =&gt; &#123; mount(item, el) &#125;) &#125; // 3.å¦‚æœæ—§èŠ‚ç‚¹çš„lengthæ›´é•¿ï¼Œé‚£ä¹ˆç§»é™¤å‰©ä½™çš„æ—§èŠ‚ç‚¹è¿›è¡Œ if (newChildren.length &lt; oldChildren.length) &#123; oldChildren.slice(newChildren.length).forEach(item =&gt; &#123; el.removeChild(item.el) &#125;) &#125; &#125; &#125; &#125;&#125; å“åº”å¼ç³»ç»Ÿ ä¾èµ–æ”¶é›†ç³»ç»Ÿ + vue2å“åº”å¼ç³»ç»Ÿ class Dep &#123; constructor() &#123; // åªè¦new Dep,å°±ä¼šç»™ä½ æ·»åŠ subscribeså±æ€§ this.subscribers = new Set() // åˆ›å»ºé›†åˆ(é‡Œé¢æ”¾æŸå±æ€§ä¾èµ–çš„å‡½æ•°) &#125; depend() &#123; // æ”¶é›†ä¾èµ– if (activeEffect) &#123; this.subscribers.add(activeEffect) &#125; &#125; notify() &#123; this.subscribers.forEach(effect =&gt; &#123; effect() &#125;) &#125;&#125;let activeEffect = nullfunction watchEffect(effect) &#123; activeEffect = effect effect() // åŸå§‹æ•°æ®å…ˆæ‰§è¡Œä¸€æ¬¡ activeEffect = null&#125;const targetMap = new WeakMap()function getDep(target, key) &#123; // 1.æ ¹æ®å¯¹è±¡(target)å–å‡ºå¯¹åº”çš„Mapå¯¹è±¡ let depsMap = targetMap.get(target) if (!depsMap) &#123; depsMap = new Map() targetMap.set(target, depsMap) &#125; // 2.å–å‡ºå…·ä½“çš„depå¯¹è±¡ let dep = depsMap.get(key) if (!dep) &#123; dep = new Dep() depsMap.set(key, dep) &#125; return dep&#125;// vue2å¯¹rawè¿›è¡Œæ•°æ®åŠ«æŒfunction reactive(raw) &#123; // æ ¹æ®å¯¹è±¡æ‹¿åˆ°æ‰€æœ‰key,ç»„æˆæ•°ç»„ Object.keys(raw).forEach(key =&gt; &#123; // è·å–keyå¯¹åº”çš„ä¾èµ– const dep = getDep(raw, key) let value = raw[key] Object.defineProperty(raw, key, &#123; get() &#123; // ç”¨åˆ°äº†æŸä¸ªkey,è°ƒç”¨get,æ‰€ä»¥å¯ä»¥åœ¨è¿™é‡Œæ”¶é›†ä¾èµ– dep.depend() return value &#125;, set(newValue) &#123; // å½“å±æ€§è¢«é‡æ–°èµ‹å€¼çš„æ—¶å€™,ä¼šè°ƒç”¨set,æ‰€ä»¥åœ¨è¿™é‡Œæ‰§è¡Œè¿™ä¸ªå±æ€§ä¾èµ–çš„å‡½æ•° // raw[key] = newValue ä¸èƒ½è¿™æ ·è®¾ç½®,å¦åˆ™é€’å½’äº†(åˆå¯¹rawæ“ä½œ,åˆåŠ«æŒ,åˆæ¥åˆ°setè¿™é‡Œäº†) if (value !== newValue) &#123; value = newValue dep.notify() &#125; &#125; &#125;) &#125;) return raw&#125;// æµ‹è¯•ä»£ç const info = reactive(&#123; counter: 100, name: &#x27;hillyee&#x27;&#125;)// watchEffect1watchEffect(function () &#123; console.log(info.counter * 2, info.name, &#x27;w1&#x27;);&#125;)// watchEffect2watchEffect(function () &#123; console.log(info.counter * info.counter, &#x27;w2&#x27;);&#125;)// info.counter++ // ä¿®æ”¹æ•°æ®çš„æ—¶å€™,æ‰€æœ‰å¯¹è¿™ä¸ªæ•°æ®æœ‰ä¾èµ–çš„å‡½æ•°éƒ½åº”è¯¥è¢«æ‰§è¡Œä¸€æ¬¡// info.name = &quot;hahahhahah&quot; å“åº”å¼ç³»ç»Ÿ vue3-proxyå®ç° // vue3å¯¹rawè¿›è¡Œæ•°æ®åŠ«æŒfunction reactive(raw) &#123; // Proxy(åŸå¯¹è±¡,ä»£ç†å¯¹è±¡) return new Proxy(raw, &#123; get(target, key) &#123; const dep = getDep(target, key) // è·å–è¯¥å±æ€§çš„ä¾èµ– dep.depend() return target[key] &#125;, set(target, key, newValue) &#123; const dep = getDep(target, key) target[key] = newValue dep.notify() &#125; &#125;)&#125; ä¸ºä»€ä¹ˆ Vue3 é€‰æ‹© Proxy å‘¢ï¼Ÿ Object.definedProperty æ˜¯åŠ«æŒå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœæ–°å¢å…ƒç´ ï¼Œ é‚£ä¹ˆVue2éœ€è¦å†æ¬¡ è°ƒç”¨definedPropertyï¼Œè€Œ Proxy åŠ«æŒçš„æ˜¯æ•´ä¸ªå¯¹è±¡ï¼Œä¸éœ€è¦åšç‰¹æ®Šå¤„ç† ä¿®æ”¹å¯¹è±¡çš„ä¸åŒï¼š ä½¿ç”¨ defineProperty æ—¶ï¼Œæˆ‘ä»¬ä¿®æ”¹åŸæ¥çš„ obj å¯¹è±¡å°±å¯ä»¥è§¦å‘æ‹¦æˆªï¼› è€Œä½¿ç”¨ proxyï¼Œå°±å¿…é¡»ä¿®æ”¹ä»£ç†å¯¹è±¡ï¼Œå³ Proxy çš„å®ä¾‹æ‰å¯ä»¥è§¦å‘æ‹¦æˆªï¼› æ¡†æ¶å¤–å±‚ API è®¾è®¡ createApp() ç”¨äºåˆ›å»ºä¸€ä¸ªappå¯¹è±¡ï¼Œè¯¥appå¯¹è±¡æœ‰ä¸€ä¸ªmountæ–¹æ³•ï¼Œå¯ä»¥å°†æ ¹ç»„ä»¶æŒ‚è½½åˆ°æŸä¸€ä¸ªdomå…ƒç´ ä¸Š function createApp(rootComponent) &#123; return &#123; mount(selector) &#123; const container = document.querySelector(selector) let isMounted = false let oldVNode = null watchEffect(function() &#123; if (!isMounted) &#123; // rootComponent.render() è¿”å›æ ¹ç»„ä»¶çš„vnode oldVNode = rootComponent.render() mount(oldVNode, container) isMounted = true &#125; else &#123; const newVNode = rootComponent.render() patch(oldVNode, newVNode) oldVNode = newVNode &#125; &#125;) &#125; &#125;&#125; ä½¿ç”¨æ¡ˆä¾‹â€“è®¡æ•° &lt;body&gt; &lt;div id=&quot;app&quot;&gt;&lt;/div&gt; &lt;script src=&quot;../mini_vue/renderer.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;../mini_vue/reactive.js&quot;&gt;&lt;/script&gt; &lt;script src=&quot;./index.js&quot;&gt;&lt;/script&gt; &lt;script&gt; // 1.åˆ›å»ºæ ¹ç»„ä»¶ const App = &#123; data: reactive(&#123; counter: 0 &#125;), render() &#123; return h(&quot;div&quot;, null, [ h(&quot;h2&quot;, null, `å½“å‰è®¡æ•°:$&#123;this.data.counter&#125;`), h(&quot;button&quot;, &#123; onClick: () =&gt; &#123; this.data.counter++ console.log(this.data.counter); &#125; &#125;, &quot;+1&quot;) ]) &#125;, &#125; // 2.æŒ‚è½½æ ¹ç»„ä»¶ const app = createApp(App) app.mount(&#x27;#app&#x27;) &lt;/script&gt;&lt;/body&gt; Vue3æºç é˜…è¯» æ ¹æ®å›¾çš„æµç¨‹ï¼ŒåŠ ä¸Šæºç ï¼Œå¤šçœ‹çœ‹å­ï¼Œç¬¬ä¸€æ¬¡çœ‹æºç ç¡®å®æœ‰ç‚¹åƒåŠ›äº† å…ˆçœ‹ç†Ÿæ‚‰æµç¨‹ï¼Œç„¶åå¯ä»¥ debugger åœ¨æµè§ˆå™¨ä¸Šç®€å•è¿‡ä¸€ä¸‹æ•´ä¸ªæµç¨‹ createApp æºç é˜…è¯»ä¹‹æŒ‚è½½æ ¹ç»„ä»¶ const app = &#123;props: &#123;message: String&#125;instance// 1.å¤„ç†propså’Œattrsinstance.propsinstance.attrs// 2.å¤„ç†slotsinstance.slots// 3.æ‰§è¡Œsetupconst result = setup()instance.setupState = proxyRefs(result);// 4.ç¼–è¯‘template -&gt; compile&lt;template&gt; -&gt; renderå‡½æ•°instance.render = Component.render = renderå‡½æ•°// 5.å¯¹vue2çš„options apiè¿›è¡ŒçŸ¥è¯†data/methods/computed/ç”Ÿå‘½å‘¨æœŸ ç»„ä»¶åŒ–çš„åˆå§‹åŒ– Compileè¿‡ç¨‹ å¯¹äºä¸ä¼šæ”¹å˜çš„é™æ€èŠ‚ç‚¹è¿›è¡Œä½œç”¨äºæå‡ æˆ‘éƒ½æ²¡æ‰¾åˆ°è¿™éƒ¨åˆ†å‡½æ•°ã€‚ã€‚ã€‚ Block Tree åˆ†æ vue3çš„ä¸€ä¸ªä¼˜åŒ–ï¼šå¯¹äºä¸ä¼šæ”¹å˜çš„é™æ€èŠ‚ç‚¹è¿›è¡Œä½œç”¨åŸŸæå‡ï¼Œä»…å¯¹æ–°çš„vnodeè¿›è¡Œåˆ›å»º ç”Ÿå‘½å‘¨æœŸå›è°ƒ templateä¸­æ•°æ®çš„ä½¿ç”¨é¡ºåº å¦‚æœsetupè·Ÿdataä¸­æœ‰åŒä¸€ä¸ªå±æ€§,é¦–å…ˆé€‰æ‹©setupçš„,å†…éƒ¨åšäº†ä¸€ä¸ªåˆ¤æ–­å§","categories":[{"name":"æ·±å…¥Vue3+Typescriptå­¦ä¹ ","slug":"æ·±å…¥Vue3-Typescriptå­¦ä¹ ","permalink":"https://hillyee.github.io/categories/%E6%B7%B1%E5%85%A5Vue3-Typescript%E5%AD%A6%E4%B9%A0/"}],"tags":[{"name":"vue3","slug":"vue3","permalink":"https://hillyee.github.io/tags/vue3/"}]},{"title":"Vue3_compositionAPI","slug":"Vue3-compositionAPI","date":"2022-03-31T08:10:18.000Z","updated":"2022-04-01T00:46:20.039Z","comments":true,"path":"2022/03/31/Vue3-compositionAPI/","link":"","permalink":"https://hillyee.github.io/2022/03/31/Vue3-compositionAPI/","excerpt":"","text":"Composition API 1. setup 1.1 setupå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼špropsï¼Œcontext propsï¼šå…¶å®å°±æ˜¯çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å±æ€§ï¼Œä½†æ˜¯åœ¨setupå¤–é¢ä¾ç„¶éœ€è¦ç”¨propsæ¥æ”¶ contextï¼šé‡Œé¢åŒ…å«ä¸‰ä¸ªå±æ€§ï¼š attrsï¼šçˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ²¡æœ‰è¢«propæ¥æ”¶çš„å±æ€§ slotsï¼šçˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ’æ§½ emitï¼šå½“ç»„ä»¶å†…éƒ¨éœ€è¦å‘å‡ºäº‹ä»¶çš„æ—¶å€™ç”¨ï¼ˆvue2é‡Œé¢æ˜¯this.$emitï¼Œä½†æ˜¯vue3ä¸­ï¼Œsetupä¸èƒ½è®¿é—®thisï¼‰ 1.2 setup å‡½æ•°çš„è¿”å›å€¼ setup() &#123; let a = 1 return &#123; a &#125;&#125; setupçš„è¿”å›å€¼å¯ä»¥åœ¨æ¨¡æ¿ template ä¸­ä½¿ç”¨ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä»£æ›¿data ä½†æ˜¯ç›´æ¥è¿™ä¹ˆè¿”å›å˜é‡ï¼Œæ˜¯æ²¡æœ‰å“åº”å¼çš„ 1.3 setup ä¸å¯ä»¥ä½¿ç”¨ this this å¹¶æ²¡æœ‰æŒ‡å‘å½“å‰ç»„ä»¶å®ä¾‹ åœ¨ setup è¢«è°ƒç”¨ä¹‹å‰ï¼Œdataã€computedã€ç­‰éƒ½æ²¡æœ‰è¢«è§£æ æ‰€ä»¥æ— æ³•åœ¨ setup ä¸­è·å–this 2. reactive API ä¸ºsetupä¸­å®šä¹‰çš„æ•°æ®æä¾›å“åº”å¼çš„ç‰¹æ€§ reactive API ä¼ å…¥çš„ç±»å‹å¿…é¡»æ˜¯å¯¹è±¡æˆ–è€…æ•°ç»„ const state = reactive(&#123; name: &quot;why&quot; // è¿™æ—¶å€™è¿™ä¸ªnameå°±æ˜¯å“åº”å¼çš„&#125;) 3. ref API 3.1 ref API åŸºæœ¬ä½¿ç”¨ å¯ä»¥ä¼ å…¥åŸºæœ¬æ•°æ®ç±»å‹ï¼Œåœ¨å¼€å‘ä¸­æ¨èä½¿ç”¨ refï¼Œä¾¿äºä»£ç çš„æŠ½ç¦»ï¼Œå½“ç„¶å¦‚æœå±æ€§å…³ç³»å¾ˆç´§å¯†çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ reactive ref ä¼šè¿”å›ä¸€ä¸ªå¯å˜çš„å“åº”å¼å¯¹è±¡ const message = ref(&quot;hello world&quot;) åœ¨ template ä¸­å¼•ç”¨ ref çš„å€¼æ—¶ï¼ŒVueä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è¿›è¡Œè§£åŒ…ï¼Œå°±æ˜¯è¯´æˆ‘ä»¬ä¸éœ€è¦åœ¨æ¨¡æ¿ä¸­ xxx.value æ¥ä½¿ç”¨ ä½†æ˜¯åœ¨ setup å†…éƒ¨ï¼Œå®ƒä¾ç„¶æ˜¯ä¸€ä¸ª ref çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¦ä½¿ç”¨ ref.value 3.2 ref API çš„è¡¥å…… toRefs å’Œ toRef let info = reactive(&#123; name: &#x27;why&#x27;, age: 18&#125;)// å½“æˆ‘ä»¬æƒ³è§£æ„çš„æ—¶å€™// let &#123;name, age&#125; = info // ä¸å†æ˜¯å“åº”å¼çš„äº†// å¦‚æœå¸Œæœ›å“åº”å¼çš„è¯// 1. toRefs: å°† reactive å¯¹è±¡ä¸­æ‰€æœ‰å±æ€§éƒ½è½¬æˆ ref// let &#123;name, age&#125; = toRefs(info)// åªå¸Œæœ›å•ä¸ªå“åº”å¼çš„è¯// 2. toReflet &#123;name&#125; = info // ä¸æ˜¯å“åº”å¼let age = toRef(info, &quot;age&quot;)const change = () =&gt; &#123; age.value++&#125; shallowRefï¼šåˆ›å»ºä¸€ä¸ªè·Ÿè¸ªè‡ªèº« .value å˜åŒ–çš„ refï¼Œä½†ä¸ä¼šä½¿å…¶å€¼ä¹Ÿå˜æˆå“åº”å¼çš„ triggerRefï¼šæ‰‹åŠ¨è§¦å‘å’Œ shallowRef ç›¸å…³è”çš„å‰¯ä½œç”¨ let info = shallowRef(&#123; name: &quot;why&quot;&#125;)const change = () =&gt; &#123; // info.value = &quot;hello&quot; å“åº”å¼ info.value.name = &quot;james&quot; // ä¸æ˜¯å“åº”å¼ // æ‰‹åŠ¨è§¦å‘å’Œ shallowRef ç›¸å…³è”çš„å‰¯ä½œç”¨(å˜æˆå“åº”å¼) triggerRef(info)&#125; customRef è‡ªå®šä¹‰ ref 4. readonly å½“æˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬ç»™å…¶ä»–ç»„ä»¶ä¼ é€’æ•°æ®æ—¶ï¼Œå¸Œæœ›å…¶ä»–ç»„ä»¶åªæ˜¯ä½¿ç”¨æˆ‘ä»¬çš„å†…å®¹ï¼Œä½†æ˜¯ä¸å…è®¸å®ƒä»¬ä¿®æ”¹çš„æ—¶å€™ï¼Œå¯ä»¥ç”¨readonly å®é™…ä¸Šï¼Œreadonly ä¼šè¿”å›åŸç”Ÿå¯¹è±¡çš„åªè¯»ä»£ç†ï¼Œä¹Ÿå°±æ˜¯å®ƒä¾ç„¶æ˜¯ä¸€ä¸ª Proxyï¼Œä½†æ˜¯setæ–¹æ³•è¢«åŠ«æŒ å¼€å‘ä¸­å¸¸è§çš„readonlyæ–¹æ³•ä¼šä¼ å…¥ä¸‰ä¸ªç±»å‹çš„å€¼ æ™®é€šå¯¹è±¡ reactive è¿”å›çš„å¯¹è±¡ ref çš„å¯¹è±¡ readonly ä½¿ç”¨æ—¶ï¼Œreadonly è¿”å›çš„å¯¹è±¡ä¸å…è®¸ä¿®æ”¹ï¼Œä½†æ˜¯ç»è¿‡ readonly å¤„ç†çš„åŸæ¥çš„å¯¹è±¡æ˜¯å¯ä»¥ä¿®æ”¹çš„ const info = &#123; name: &quot;why&quot;&#125;const state = readonly(info)state.name = &quot;aaa&quot; // ä¸å¯ä»¥info.name = &quot;aaa&quot; // å¯ä»¥ 5. computed ç”¨æ³•ä¸€ï¼šä¼ å…¥ä¸€ä¸ªgetterå‡½æ•°,computedçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªåªè¯»çš„refå¯¹è±¡(ä¸èƒ½ä¿®æ”¹) const fullName = computed(() =&gt; firstName.value + &quot;-&quot; +lastName.value)const changeData = () =&gt; &#123; firstName.value = &quot;james&quot; // å¯ä¿®æ”¹ fullName.value = &quot;yuzi bing&quot; // ä¸å¯ä¿®æ”¹&#125; ç”¨æ³•äºŒï¼šä¼ å…¥ä¸€ä¸ªå¯¹è±¡,å¯¹è±¡åŒ…å« getter/setter,è¿”å›ä¸€ä¸ªå¯è¯»å†™çš„ref å¯¹è±¡ const fullName = computed(&#123; get: () =&gt; firstName.value + &quot;-&quot; +lastName.value, set(newValue) &#123; const names = newValue.split(&#x27; &#x27;) firstName.value = names[0] lastName.value = names[1] &#125;&#125;)const changeData = () =&gt; &#123; fullName.value = &quot;yuzi bing&quot; // å¯ä¿®æ”¹&#125; 6. watchEffect 6.1 watchEffect åŸºæœ¬ä½¿ç”¨ watchEffect ä¼ å…¥çš„å‡½æ•°ä¼šè¢«ç«‹å³æ‰§è¡Œä¸€æ¬¡, å¹¶åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è‡ªåŠ¨æ”¶é›†ä¾èµ–ï¼ˆç›¸å½“äºä½ åœ¨è¿™ä¸ªå‡½æ•°ä½¿ç”¨äº†ä»€ä¹ˆå˜é‡ï¼Œå®ƒä¼šè‡ªåŠ¨æ”¶é›†åˆ°ï¼‰ åªæœ‰æ”¶é›†çš„ä¾èµ–å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒwatchEffect ä¼ å…¥çš„å‡½æ•°æ‰ä¼šå†æ¬¡æ‰§è¡Œ ä¸‹é¢æ¡ˆä¾‹ä¸­ï¼Œname çš„æ”¹å˜ä¼šè¢«ä¾¦å¬åˆ°ï¼Œè€Œ age ä¸ä¼šè¢«ä¾¦å¬ // watchEffect: è‡ªåŠ¨æ”¶é›†å“åº”å¼çš„ä¾èµ–const name = ref(&quot;jenny&quot;)const age = ref(18)const changeName = () =&gt; name.value = &quot;tony&quot;const changeAge = () =&gt; age.value = 20watchEffect(() =&gt; &#123; console.log(&quot;name:&quot;, name.value);&#125;) 6.2 watchEffect åœæ­¢ä¾¦å¬ å¦‚æœåœ¨å‘ç”ŸæŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœæ­¢ä¾¦å¬ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥è·å–watchEffectçš„è¿”å›å€¼å‡½æ•°ï¼Œè°ƒç”¨è¯¥å‡½æ•°å³å¯ const age = ref(18)// watchEffect ä¼šè¿”å›ä¸€ä¸ªå‡½æ•°,ä¾›æˆ‘ä»¬åœæ­¢ä¾¦å¬ä½¿ç”¨const stop = watchEffect(() =&gt; &#123; console.log(&quot;age:&quot;, age.value);&#125;)const changeAge = () =&gt; &#123; age.value++ // æ¡ˆä¾‹ï¼šage åˆ°25çš„æ—¶å€™å°±åœæ­¢ä¾¦å¬ if (age.value &gt; 25) &#123; stop() &#125;&#125; 6.3 watchEffect æ¸…é™¤å‰¯ä½œç”¨ æ¸…é™¤å‰¯ä½œç”¨ï¼Ÿ æ¯”å¦‚æˆ‘ä»¬éœ€è¦åœ¨ä¾¦å¬å™¨ä¸­æ‰§è¡Œç½‘ç»œè¯·æ±‚ï¼Œä½†æ˜¯åœ¨ç½‘ç»œè¯·æ±‚è¿˜æ²¡å®Œæˆä¹‹å‰ï¼Œæˆ‘ä»¬åœæ­¢äº†ä¾¦å¬å™¨æˆ–è€…ä¿®æ”¹äº†æ•°æ®è®©ä¾¦å¬å™¨ä¾¦å¬å‡½æ•°å†æ¬¡æ‰§è¡Œäº†ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åº”è¯¥æ¸…é™¤ä¸Šä¸€æ¬¡çš„å‰¯ä½œç”¨ï¼ˆæ•°æ®æ”¹å˜äº†è¦é‡æ–°å‘é€è¯·æ±‚æˆ–è€…è¯´ä¸éœ€è¦å‘äº†ï¼‰ const stop = watchEffect((onInvalidate) =&gt; &#123; const timer = setTimeout(() =&gt; &#123; console.log(&#x27;ç½‘ç»œè¯·æ±‚æˆåŠŸ~&#x27;); // å®šæ—¶å™¨æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚ &#125;, 2000); // åœ¨ä¼ å…¥çš„å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œä¸€äº›æ¸…é™¤å·¥ä½œ onInvalidate(() =&gt; &#123; clearTimeout(timer) console.log(&#x27;onInvalidate&#x27;); &#125;) console.log(&quot;age:&quot;, age.value);&#125;) 6.4 watchEffect æ‰§è¡Œæ—¶æœº é¦–å…ˆè¡¥å……ä¸€ä¸‹ï¼šåœ¨ setup ä¸­å¦‚ä½•å±äº ref æˆ–è€…å…ƒç´ æˆ–è€…ç»„ä»¶ï¼Ÿ å®šä¹‰ä¸€ä¸ª ref å¯¹è±¡ï¼Œç»‘å®šåˆ°å…ƒç´ æˆ–ç»„ä»¶çš„refå±æ€§ä¸Š &lt;h2 ref=&quot;title&quot;&gt;hello&lt;/h2&gt; // ç»‘å®šåˆ°å…ƒç´ çš„refå±æ€§const title = ref(null) // å®šä¹‰ ref å¯¹è±¡ watchEffect æ‰§è¡Œæ—¶æœº å¦‚æœæˆ‘ä»¬å¸Œæœ›åœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­è·å–å…ƒç´ ï¼Œæˆ‘ä»¬ä¼šå‘ç°æ‰“å°ç»“æœæœ‰ä¸¤ä¸ª watchEffect(() =&gt; &#123; console.log(title.value);&#125;) è¿™æ˜¯å› ä¸º setup å‡½æ•°åœ¨æ‰§è¡Œæ—¶å°±ä¼šç«‹å³æ‰§è¡Œä¼ å…¥çš„å‰¯ä½œç”¨å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™ DOM å¹¶æ²¡æœ‰æŒ‚è½½ï¼Œæ‰€ä»¥æ‰“å°ä¸º null å½“ DOM æŒ‚è½½æ—¶ï¼Œä¼šç»™ title çš„ ref å¯¹è±¡èµ‹æ–°çš„å€¼ï¼Œå‰¯ä½œç”¨å‡½æ•°ä¼šå†æ¬¡æ‰§è¡Œ è°ƒæ•´ watchEffect çš„æ‰§è¡Œæ—¶æœº watchEffect(() =&gt; &#123; console.log(title.value);&#125;, &#123; // flush: &quot;pre&quot; // åœ¨å…ƒç´ æŒ‚è½½æˆ–æ›´æ–°ä¹‹å‰æ‰§è¡Œ flush: &quot;post&quot; // å…ƒç´ æŒ‚è½½æ›´æ–°ä¹‹åæ‰§è¡Œ, è¿™æ—¶å€™åªæ‰“å°ä¸€æ¬¡&lt;h2&gt;&lt;/h2&gt;&#125;) 7. watch 7.1 ä¾¦å¬å•ä¸ªæ•°æ®æº ä¾¦å¬ä¸€ä¸ª getter å‡½æ•° const info = reactive(&#123; name: &quot;jenny&quot;, age: 18&#125;)// 1. watchä¾¦å¬æ—¶,ä¼ å…¥ä¸€ä¸ªgetterå‡½æ•°, å…·ä½“ç›‘å¬æŸä¸ªå±æ€§watch(() =&gt; info.name, (newValue, oldValue) =&gt; &#123; console.log(newValue, oldValue); // Tom jenny&#125;)const changeData = () =&gt; &#123; info.name = &quot;Tom&quot;&#125; ç›´æ¥ä¾¦å¬ä¸€ä¸ªå¯å“åº”å¼çš„å¯¹è±¡ï¼Œreactive æˆ– ref ï¼ˆrefæ›´å¸¸ç”¨ï¼‰ // ä¼ å…¥ä¸€ä¸ªå¯å“åº”å¼å¯¹è±¡: reactiveå¯¹è±¡/refå¯¹è±¡const title = ref(&quot;hello&quot;)const info = reactive(&#123; name: &quot;jenny&quot;, age: 18&#125;)watch(info, (newValue, oldValue) =&gt; &#123; console.log(newValue, oldValue); // Proxy &#123;name: &#x27;Tom&#x27;, age: 18&#125;&#125;)watch(title, (newValue, oldValue) =&gt; &#123; console.log(newValue, oldValue); // world hello&#125;)const changeData = () =&gt; &#123; info.name = &quot;Tom&quot; title.value = &quot;world&quot;&#125; 7.2 ä¾¦å¬å¤šä¸ªæ•°æ®æº æ³¨ï¼šå¦‚æœæˆ‘ä»¬å¸Œæœ›ä¾¦å¬ä¸€ä¸ªæ•°ç»„æˆ–è€…å¯¹è±¡ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ä¸€ä¸ªgetterå‡½æ•°ï¼Œå¹¶ä¸”å¯¹å¯å“åº”å¯¹è±¡è¿›è¡Œè§£æ„ (ä¸è§£æ„ä¹Ÿè¡Œ,ä¸è§£æ„n,oå°±æ˜¯ä¸€ä¸ªProxyå¯¹è±¡) const info = reactive(&#123; name: &quot;jenny&quot;, age: 18&#125;)const title = ref(&quot;hello&quot;)// åŒæ—¶ä¾¦å¬å¤šä¸ªæ•°æ®æºwatch([() =&gt; (&#123;...info&#125;), title], ([newInfo, newTitle], [oldInfo, oldTitle]) =&gt; &#123; console.log(newInfo, newTitle, oldInfo, oldTitle); // &#123;name: &#x27;Tom&#x27;, age: 18&#125; &#x27;world&#x27; // &#123;name: &#x27;jenny&#x27;, age: 18&#125; &#x27;hello&#x27;&#125;)const changeData = () =&gt; &#123; info.name = &quot;Tom&quot; title.value = &quot;world&quot;&#125; 7.3 watch çš„é€‰é¡¹ const info = reactive(&#123; name: &quot;jenny&quot;, hobby: &#123; title: &#x27;haha&#x27; &#125;&#125;)watch(() =&gt; (&#123;...info&#125;), (newValue, oldValue) =&gt; &#123; console.log(newValue, oldValue);&#125;, &#123; deep: true, // æ·±åº¦ç›‘å¬ immediate: true // ç«‹å³æ‰§è¡Œä¸€æ¬¡&#125;)const changeData = () =&gt; &#123; // info.name = &quot;Tom&quot; info.hobby.title = &quot;hehe&quot; // å¼€å¯æ·±åº¦ç›‘å¬&#125; 8. ç”Ÿå‘½å‘¨æœŸé’©å­ // åœ¨æŒ‚è½½å¼€å§‹ä¹‹å‰è¢«è°ƒç”¨ï¼šç›¸å…³çš„ render å‡½æ•°é¦–æ¬¡è¢«è°ƒç”¨ã€‚onBeforeMount(() =&gt; &#123;&#125;)// å®ä¾‹æŒ‚è½½å®Œæ¯•åè°ƒç”¨onMounted(() =&gt; &#123;&#125;)// åœ¨æ•°æ®å‘ç”Ÿæ”¹å˜åï¼ŒDOM è¢«æ›´æ–°ä¹‹å‰è¢«è°ƒç”¨ã€‚è¿™é‡Œé€‚åˆåœ¨ç°æœ‰ DOM å°†è¦è¢«æ›´æ–°ä¹‹å‰è®¿é—®å®ƒï¼Œæ¯”å¦‚ç§»é™¤æ‰‹åŠ¨æ·»åŠ çš„äº‹ä»¶ç›‘å¬å™¨ã€‚onBeforeUpdate(() =&gt; &#123;&#125;)// åœ¨æ•°æ®æ›´æ”¹å¯¼è‡´çš„è™šæ‹Ÿ DOM é‡æ–°æ¸²æŸ“å’Œæ›´æ–°å®Œæ¯•ä¹‹åè¢«è°ƒç”¨ã€‚onUpdated(() =&gt; &#123;&#125;)// å¸è½½ç»„ä»¶å®ä¾‹å‰è°ƒç”¨, è¿™ä¸ªé˜¶æ®µ,å®ä¾‹ä»ç„¶æ˜¯å®Œå…¨æ­£å¸¸çš„onBeforeUnmount(() =&gt; &#123;&#125;)// å¸è½½ç»„ä»¶å®ä¾‹åè°ƒç”¨,è°ƒç”¨æ­¤é’©å­æ—¶ï¼Œç»„ä»¶å®ä¾‹çš„æ‰€æœ‰æŒ‡ä»¤éƒ½è¢«è§£é™¤ç»‘å®šï¼Œæ‰€æœ‰äº‹ä»¶ä¾¦å¬å™¨éƒ½è¢«ç§»é™¤ï¼Œæ‰€æœ‰å­ç»„ä»¶å®ä¾‹è¢«å¸è½½ã€‚onUnmounted(() =&gt; &#123;&#125;),// è¢« keep-alive ç¼“å­˜çš„ç»„ä»¶æ¿€æ´»æ—¶è°ƒç”¨ã€‚onActivated(() =&gt; &#123;&#125;)// è¢« keep-alive ç¼“å­˜çš„ç»„ä»¶å¤±æ´»æ—¶è°ƒç”¨ã€‚onDeactivated(()=&gt;&#123;&#125;) 9. Provide å’Œ Inject çˆ¶ç»„ä»¶é€šè¿‡ provide æ¥æä¾›æ•°æ®ï¼ˆå¿…é¡»è¦åœ¨çˆ¶ç»„ä»¶ä¸­ä½¿ç”¨è¿‡å­ç»„ä»¶ï¼Œå»ºç«‹è”ç³»æ‰èƒ½æä¾›æ•°æ®ï¼‰ provide(å±æ€§åï¼Œå±æ€§å€¼) const name = ref(&quot;jenny&quot;)// ç»™åä»£ç»„ä»¶æä¾›å±æ€§æˆ–æ–¹æ³•(ä¸ºäº†ä¸è®©å­ç»„ä»¶éšæ„ä¿®æ”¹çˆ¶ç»„ä»¶çš„æ•°æ®,å¯ä»¥ä½¿ç”¨readonly)provide(&quot;name&quot;, readonly(name)) åä»£ç»„ä»¶å¯ä»¥é€šè¿‡ Inject æ¥æ³¨å…¥éœ€è¦çš„å±æ€§å’Œå¯¹åº”å€¼ inject(è¦æ³¨å…¥çš„å±æ€§å, é»˜è®¤å€¼) ï¼Œé»˜è®¤å€¼å°±æ˜¯å¦‚æœçˆ¶ç»„ä»¶æ²¡æœ‰æä¾›æ”¹æ•°æ®çš„è¯å°±ä½¿ç”¨é»˜è®¤å€¼ const name = inject(&quot;name&quot;) 10. composition API ç»ƒä¹  è‡ªå®šä¹‰ hooks 1. useTitle æ”¹å˜é¡µé¢æ ‡é¢˜ import &#123; ref, watch &#125; from &#x27;vue&#x27;export default function(title = &quot;é»˜è®¤çš„title&quot;) &#123; const titleRef = ref(title) watch(titleRef, (newValue) =&gt; &#123; document.title = newValue &#125;, &#123; immediate: true &#125;) return titleRef&#125; 2. useScrollPosition ç›‘å¬é¡µé¢æ»šåŠ¨ä½ç½® import &#123; ref &#125; from &#x27;vue&#x27;export default function useScrollPosition() &#123; const scrollX = ref(0) const scrollY = ref(0) document.addEventListener(&quot;scroll&quot;, () =&gt; &#123; scrollX.value = window.scrollX scrollY.value = window.scrollY &#125;) return &#123; scrollX, scrollY &#125;&#125; 3. useMousePosition ç›‘å¬é¼ æ ‡ä½ç½® import &#123; ref &#125; from &#x27;vue&#x27;export default function useMousePosition() &#123; const mouseX = ref(0) const mouseY = ref(0) window.addEventListener(&#x27;mousemove&#x27;, (event) =&gt; &#123; mouseX.value = event.pageX mouseY.value = event.pageY &#125;) return &#123; mouseX, mouseY &#125;&#125; 4. useLocalStorage ä½¿ç”¨ localStorage å­˜å‚¨å’Œè·å–æ•°æ® export default function(key, value) &#123; const data = ref(value) // å¦‚æœæœ‰ä¼ value,è¡¨ç¤ºè¦å­˜å‚¨å€¼,å¦åˆ™æ˜¯è·å–å€¼ if (value) &#123; window.localStorage.setItem(key, JSON.stringify(value)) &#125; else &#123; data.value = JSON.parse(window.localStorage.getItem(key)) &#125; watch(data, (newValue) =&gt; &#123; window.localStorage.setItem(key, JSON.stringify(newValue)) &#125;) return data&#125; ä½¿ç”¨ï¼š // åœ¨æµè§ˆå™¨å­˜å–å€¼let data = useLocalStorage(&quot;name&quot;, &quot;jenny&quot;)const changeData = () =&gt; data.value = &quot;hahaha&quot; 5. useCounter import &#123; ref, computed &#125; from &#x27;vue&#x27;;export default function() &#123; const counter = ref(0); const doubleCounter = computed(() =&gt; counter.value * 2); const increment = () =&gt; counter.value++; const decrement = () =&gt; counter.value--; return &#123; counter, doubleCounter, increment, decrement &#125;&#125; 11. è®¤è¯†è‡ªå®šä¹‰æŒ‡ä»¤ 11.1 ç®€å•ä½¿ç”¨ é™¤äº† v-for, v-showï¼Œç­‰æŒ‡ä»¤ï¼ŒVueä¹Ÿå…è®¸æˆ‘ä»¬è‡ªå®šä¹‰æŒ‡ä»¤ è‡ªå®šä¹‰æŒ‡ä»¤åˆ†ä¸ºä¸¤ç§ è‡ªå®šä¹‰å±€éƒ¨æŒ‡ä»¤ï¼šç»„ä»¶ä¸­é€šè¿‡ directives é€‰é¡¹ï¼Œåªèƒ½åœ¨å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨ è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤ï¼šappçš„ directive æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä»»æ„ç»„ä»¶ä¸­è¢«ä½¿ç”¨ ç®€å•çš„æ¡ˆä¾‹ï¼šå½“æŸä¸ªå…ƒç´ æŒ‚è½½å®Œæˆåå¯ä»¥è‡ªå®šè·å–ç„¦ç‚¹ é»˜è®¤æ–¹å¼çš„å®ç° &lt;template&gt; &lt;div&gt; &lt;input type=&quot;text&quot; ref=&quot;input&quot;&gt; &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import &#123;ref, onMounted&#125; from &#x27;vue&#x27;export default &#123; setup() &#123; const input = ref(null) onMounted(() =&gt; &#123; input.value.focus() &#125;) return &#123; input &#125; &#125;&#125; è‡ªå®šä¹‰å±€éƒ¨æŒ‡ä»¤ v-focus &lt;input type=&quot;text&quot; ref=&quot;input&quot; v-focus&gt;export default &#123; directives: &#123; // è‡ªå®šä¹‰å±æ€§çš„åç§°(è¿™é‡Œä¸éœ€è¦å†™ v-) focus: &#123; mounted(el) &#123; el.focus() &#125; &#125; &#125;,&#125; è‡ªå®šä¹‰å…¨å±€æŒ‡ä»¤ v-focus (main.jsä¸­) app.directive(&quot;focus&quot;, &#123; mounted(el) &#123; el.focus() &#125;&#125;) 11.2 æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸ ä¸€ä¸ªæŒ‡ä»¤å®šä¹‰çš„å¯¹è±¡ï¼ŒVueæä¾›äº†å¦‚ä¸‹çš„å‡ ä¸ªé’©å­å‡½æ•°ï¼š createdï¼šåœ¨ç»‘å®šå…ƒç´ çš„ attribute æˆ–äº‹ä»¶ç›‘å¬å™¨è¢«åº”ç”¨ä¹‹å‰è°ƒç”¨ï¼› beforeMountï¼šå½“æŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ å¹¶ä¸”åœ¨æŒ‚è½½çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨ mountedï¼šåœ¨ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶è¢«æŒ‚è½½åè°ƒç”¨ beforeUpdateï¼šåœ¨æ›´æ–°åŒ…å«ç»„ä»¶çš„ VNode ä¹‹å‰è°ƒç”¨ updatedï¼šåœ¨åŒ…å«ç»„ä»¶çš„ VNode åŠå…¶å­ç»„ä»¶çš„ VNode æ›´æ–°åè°ƒç”¨ beforeUnmountï¼šåœ¨å¸è½½ç»‘å®šå…ƒç´ çš„çˆ¶ç»„ä»¶ä¹‹å‰è°ƒç”¨ unmountedï¼šå½“æŒ‡ä»¤ä¸å…ƒç´ è§£é™¤ç»‘å®šä¸”çˆ¶ç»„ä»¶å·²å¸è½½æ—¶ï¼Œåªè°ƒç”¨ä¸€æ¬¡ æŒ‡ä»¤çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥æ‹¿åˆ°å‡ ä¸ªå‚æ•° app.directive(&quot;focus&quot;, &#123; // el: &lt;input&gt; // bindings: åŒ…å«ä¸€äº›å±æ€§çš„å¯¹è±¡ // vnode: ä¸€ä¸ªçœŸå® DOM å…ƒç´  // preVnode: ä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ mounted(el, bindings, vnode, preVnode) &#123; console.log(&quot;focus created&quot;, el, bindings, vnode, preVnode); console.log(bindings.value); // æ‹¿åˆ°ä¼ å…¥çš„å‚æ•° console.log(bindings.modifiers); // æŒ‡ä»¤çš„ä¿®é¥°ç¬¦ el.focus() &#125;&#125;) 11.3 æŒ‡ä»¤çš„å‚æ•°å’Œä¿®é¥°ç¬¦ æŒ‡ä»¤æ¥å—å‚æ•°æˆ–è€…ä¿®é¥°ç¬¦ v-æŒ‡ä»¤å:å‚æ•°å.ä¿®é¥°ç¬¦=&quot;å…·ä½“å€¼&quot;&lt;button v-why:info.aaa.bbb=&quot;&#123;title: &#x27;hello&#x27;, name: &#x27;me&#x27;&#125;&quot;&gt;&lt;/button&gt; 11.4 è‡ªå®šä¹‰æŒ‡ä»¤ç»ƒä¹  è‡ªå®šä¹‰æ—¶é—´æ ¼å¼åŒ–çš„æŒ‡ä»¤ v-format-time import dayjs from &quot;dayjs&quot;;export default function(app) &#123; app.directive(&quot;format-time&quot;, &#123; created(el, bindings) &#123; // é»˜è®¤æ ¼å¼ bindings.formatString = &quot;YYYY-MM-DD HH:mm:ss&quot; // å¦‚æœæœ‰ä¼ å…¥æ ¼å¼çš„å‚æ•°ï¼Œé‚£ä¹ˆä½¿ç”¨ä¼ å…¥çš„æ ¼å¼ if (bindings.value) &#123; bindings.formatString = bindings.value &#125; &#125;, mounted(el, bindings) &#123; const textContent = el.textContent // èŠ‚ç‚¹åŠå…¶åä»£çš„æ–‡æœ¬å†…å®¹ let timestamp = parseInt(textContent) if (textContent.length === 10) &#123; timestamp = timestamp * 1000 // è½¬æˆæ¯«ç§’ &#125; el.textContent = dayjs(timestamp).format(bindings.formatString) &#125;, &#125;)&#125; å…¶ä»–è¡¥å…… 1. renderå‡½æ•° 1.1 è®¤è¯† h å‡½æ•° ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„HTMLéƒ½æ˜¯ç”¨æ¨¡æ¿&lt;template&gt;åˆ›å»ºçš„ï¼Œå¦‚æœåœ¨ä¸€äº›ç‰¹æ®Šçš„åœºæ™¯ï¼ŒçœŸçš„éœ€è¦JavaScriptçš„å®Œå…¨ç¼–ç¨‹èƒ½åŠ›ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥ä½¿ç”¨ æ¸²æŸ“å‡½æ•°ï¼Œå®ƒæ¯”æ¨¡æ¿æ›´æ¥è¿‘ç¼–è¯‘å™¨ Vueåœ¨ç”ŸæˆçœŸå®çš„ DOM ä¹‹å‰ï¼Œä¼šå°†æˆ‘ä»¬çš„èŠ‚ç‚¹è½¬æ¢æˆ VNodeï¼ˆè™šæ‹ŸèŠ‚ç‚¹ï¼‰ï¼Œè€ŒVNodeç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€æ£µæ ‘ç»“æ„ï¼Œå°±æ˜¯è™šæ‹ŸDOMï¼ˆVDOMï¼‰ ä½ æƒ³å……åˆ†çš„åˆ©ç”¨JavaScriptçš„ç¼–ç¨‹èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ¥ç¼–å†™ createVNode å‡½æ•°ï¼Œç”Ÿæˆå¯¹åº”çš„ VNode h()å‡½æ•°æ˜¯ä¸€ä¸ªç”¨äºåˆ›å»º VNode çš„å‡½æ•° 1.2 h å‡½æ•°åŸºæœ¬ä½¿ç”¨ h() å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œï¼ˆæ ‡ç­¾åï¼Œç»„ä»¶åâ€¦ï¼‰ï¼ˆå±æ€§ï¼‰ï¼ˆå­èŠ‚ç‚¹ï¼Œå†…å®¹ï¼‰ h å‡½æ•°å¯ä»¥åœ¨ä¸¤ä¸ªåœ°æ–¹ä½¿ç”¨ï¼Œrender å‡½æ•°é€‰é¡¹ä¸­æˆ–è€… setup å‡½æ•°é€‰é¡¹ä¸­ // render å‡½æ•°é€‰é¡¹ä¸­&lt;script&gt; import &#123; h &#125; from &#x27;vue&#x27; export default &#123; render() &#123; return h(&quot;h2&quot;, &#123;class: &quot;title&quot;&#125;, &quot;Hello Render&quot;) &#125;, &#125;&lt;/script&gt; setup() &#123; return () =&gt; h(&quot;h2&quot;, &#123;class: &quot;title&quot;&#125;, &quot;Hello Render&quot;)&#125; 1.3 h å‡½æ•°å®ç°è®¡æ•°å™¨æ¡ˆä¾‹ import &#123; h &#125; from &#x27;vue&#x27;;export default &#123; data() &#123; return &#123; counter: 0 &#125; &#125;, render() &#123; return h(&quot;div&quot;, &#123;class: &quot;app&quot;&#125;, [ h(&quot;h2&quot;, null, `å½“å‰è®¡æ•°:$&#123;this.counter&#125;`), h(&quot;button&quot;, &#123;onClick: () =&gt; this.counter++&#125;, &quot;+1&quot;), h(&quot;button&quot;, &#123;onClick: () =&gt; this.counter--&#125;, &quot;-1&quot;) ]) &#125;,&#125; 2. jsx åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ jsx éœ€è¦æ·»åŠ å¯¹ jsx çš„æ”¯æŒ å®‰è£…Babelæ”¯æŒVueçš„jsxæ’ä»¶ npm install @vue/babel-plugin-jsx -D åœ¨ babel.config.js é…ç½®æ–‡ä»¶ä¸­é…ç½®æ’ä»¶ module.exports = &#123; plugins: [ &quot;@vue/babel-plugin-jsx&quot; ]&#125; åŸºæœ¬ä½¿ç”¨ï¼šè®¡æ•°å™¨æ¡ˆä¾‹ export default &#123; data() &#123; return &#123; counter: 0 &#125; &#125;, render() &#123; const increment = () =&gt; this.counter++; const decrement = () =&gt; this.counter--; return ( &lt;div&gt; &lt;h2&gt;å½“å‰è®¡æ•°: &#123;this.counter&#125;&lt;/h2&gt; &lt;button onClick=&#123;increment&#125;&gt;+1&lt;/button&gt; &lt;button onClick=&#123;decrement&#125;&gt;-1&lt;/button&gt; &lt;/div&gt; ) &#125;&#125; 3. è®¤è¯† Teleport (å…ˆäº†è§£ä¸€ä¸‹) åœ¨ç»„ä»¶åŒ–å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å°è£…ä¸€ä¸ªç»„ä»¶Aï¼Œåœ¨å¦å¤–ä¸€ä¸ªç»„ä»¶Bä¸­ä½¿ç”¨ï¼Œp é‚£ä¹ˆç»„ä»¶Aä¸­templateçš„å…ƒç´ ï¼Œä¼šè¢«æŒ‚è½½åˆ°ç»„ä»¶Bä¸­templateçš„æŸä¸ªä½ç½®ï¼Œæœ€ç»ˆå½¢æˆä¸€æ£µ DOM æ ‘ç»“æ„ ä½†æ˜¯æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›ç»„ä»¶ä¸æ˜¯æŒ‚è½½åœ¨è¿™ä¸ªç»„ä»¶æ ‘ä¸Šçš„ï¼Œå¯èƒ½æ˜¯ç§»åŠ¨åˆ°Vue appä¹‹å¤–çš„å…¶ä»–ä½ç½®ï¼Œè¿™ä¸ªæ—¶å€™å°±å¯ä»¥é€šè¿‡teleportå®Œæˆ 4. è®¤è¯† Vue æ’ä»¶ é€šå¸¸æˆ‘ä»¬å‘Vueå…¨å±€æ·»åŠ ä¸€äº›åŠŸèƒ½æ—¶ï¼Œä¼šé‡‡ç”¨æ’ä»¶çš„æ¨¡å¼ï¼Œå®ƒæœ‰ä¸¤ç§ç¼–å†™æ–¹å¼ å¯¹è±¡ç±»å‹ï¼šä¸€ä¸ªå¯¹è±¡ï¼Œä½†æ˜¯å¿…é¡»åŒ…å«ä¸€ä¸ª install çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°ä¼šåœ¨å®‰è£…æ’ä»¶æ—¶æ‰§è¡Œ export default &#123; install(app) &#123; // app.config.globalProperties.$name = &quot;hillyee&quot; &#125;&#125; å‡½æ•°ç±»å‹ï¼šä¸€ä¸ªfunctionï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨å®‰è£…æ’ä»¶æ—¶è‡ªåŠ¨æ‰§è¡Œ // plugins_function.jsexport default function(app) &#123; console.log(app);&#125; main.js app.use(pluginsFunction)app.use(pluginsObject)","categories":[{"name":"æ·±å…¥Vue3+Typescriptå­¦ä¹ ","slug":"æ·±å…¥Vue3-Typescriptå­¦ä¹ ","permalink":"https://hillyee.github.io/categories/%E6%B7%B1%E5%85%A5Vue3-Typescript%E5%AD%A6%E4%B9%A0/"}],"tags":[]},{"title":"é¢è¯•é¢˜ â€” JSç¯‡","slug":"é¢è¯•é¢˜â€”JSç¯‡","date":"2022-03-31T01:17:39.000Z","updated":"2022-04-03T07:40:53.947Z","comments":true,"path":"2022/03/31/é¢è¯•é¢˜â€”JSç¯‡/","link":"","permalink":"https://hillyee.github.io/2022/03/31/%E9%9D%A2%E8%AF%95%E9%A2%98%E2%80%94JS%E7%AF%87/","excerpt":"","text":"é—®ï¼šJS åŸå§‹æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿå¼•ç”¨æ•°æ®ç±»å‹æœ‰å“ªäº›ï¼Ÿ ç­”ï¼šåœ¨JSä¸­,å­˜åœ¨7ä¸­åŸå§‹æ•°æ®ç±»å‹,åˆ†åˆ«æ˜¯ï¼š boolean,null,undefined,number,string,symbol,bigint å¼•ç”¨ç±»å‹ï¼šObject(åŒ…å«æ™®é€šå¯¹è±¡ Object, æ•°ç»„å¯¹è±¡ Array, æ­£åˆ™å¯¹è±¡ RegExp,æ—¥æœŸå¯¹è±¡ Date,æ•°å­—å‡½æ•° Math,å‡½æ•°å¯¹è±¡ Function) Symbolè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼ï¼Œä¸»è¦æ˜¯ç”¨æ¥å®šä¹‰å¯¹è±¡çš„å”¯ä¸€å±æ€§å bigint å¯ä»¥è¡¨ç¤ºä»»æ„å¤§å°çš„æ•´æ•° é—®ï¼šè¯·è¯´å‡ºä¸‹é¢ä»£ç çš„è¿è¡Œç»“æœï¼Œå¹¶è§£é‡ŠåŸå›  function test(person) &#123; person.age = 26 person = &#123; name: &#x27;hzj&#x27;, age: 18 &#125; return person&#125;const p1 = &#123; name: &#x27;fyq&#x27;, age: 19&#125;const p2 = test(p1)console.log(p1) // -&gt; &#123;name: &#x27;fyq&#x27;,age: 26&#125;console.log(p2) // -&gt; &#123; name: &#x27;hzj&#x27;,age: 18 &#125; ç­”ï¼šå› ä¸ºåœ¨testå‡½æ•°ä¼ å‚çš„æ—¶å€™ï¼Œå®é™…ä¸Šä¼ é€’çš„æ˜¯p1å¯¹è±¡åœ¨å †ä¸­çš„å†…å­˜åœ°å€å€¼ï¼Œæ‰€ä»¥é€šè¿‡è°ƒç”¨person.age = 26ç¡®å®æ”¹å˜äº†p1çš„å€¼ï¼Œä½†æ˜¯éšåpersonå˜æˆäº†å¦ä¸€å—å†…å­˜ç©ºé—´çš„åœ°å€ï¼Œå¹¶ä¸”åœ¨æœ€åå°†è¿™ä¸ªå†…å­˜ç©ºé—´çš„åœ°å€è¿”å›ï¼Œç„¶åèµ‹å€¼ç»™äº†p2 é—®ï¼šä¸‹é¢ä»£ç çš„è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿ(. å’Œ = æ“ä½œç¬¦çš„ä¼˜å…ˆçº§) let a = &#123;n : 1&#125;let b = aa.x = a = &#123;n: 2&#125; console.log(a.x) // undefinedconsole.log(b.x) // &#123;n:2&#125; é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ åœ¨jsçš„è¿ç®—ä¸­&quot;.â€œå’Œâ€=â€œè¿ç®—ç¬¦åŒæ—¶å‡ºç°æ—¶ï¼Œä¼šå…ˆæ‰§è¡Œâ€.&quot;è¿ç®— æ‰€ä»¥ a.x = a = {n:2} --&gt; a.x = {n:2} --&gt; a = {n:2} é—®ï¼š0.1+0.2ä¸ºä»€ä¹ˆä¸ç­‰äº0.3ï¼Ÿ ç­”ï¼š(è¿›åˆ¶è½¬æ¢) jsåœ¨åšæ•°å­—è®¡ç®—çš„æ—¶å€™ï¼Œ0.1å’Œ0.2éƒ½ä¼šè¢«è½¬æˆäºŒè¿›åˆ¶åæ— é™å¾ªç¯ï¼Œä½†æ˜¯jsé‡‡ç”¨çš„IEEE 754äºŒè¿›åˆ¶æµ®ç‚¹è¿ç®—ï¼Œæœ€å¤§å¯ä»¥å­˜å‚¨53ä½æœ‰æ•ˆæ•°å­—ï¼Œäºæ˜¯å¤§äº53ä½åé¢çš„ä¼šå…¨éƒ¨æˆªæ‰ï¼Œå°†ä¼šå¯¼è‡´ç²¾åº¦ç¼ºå¤±ã€‚ (å¯¹é˜¶è¿ç®—) ç”±äºæŒ‡æ•°ä½æ•°ä¸ç›¸åŒï¼Œè¿ç®—æ—¶éœ€è¦å¯¹é˜¶è¿ç®—ï¼Œè¿™éƒ¨åˆ†ä¹Ÿå¯èƒ½äº§ç”Ÿç²¾åº¦ç¼ºå¤± https://juejin.cn/post/6940405970954616839 https://juejin.cn/post/6844903680362151950 ä½ çœŸçš„äº†è§£ä½œç”¨åŸŸå— var a = 0,b = 0;function A(a) &#123; A = function (b) &#123; console.log(a + b++) &#125; console.log(a++)&#125;A(1) // 1A(2) // 4 å¦‚ä½•åˆ¤æ–­å˜é‡æ˜¯å¦ä¸ºæ•°ç»„ï¼Ÿ Array.isArray(arr); // truearr.__proto__ === Array.prototype; // truearr instanceof Array; // trueObject.prototype.toString.call(arr); // &quot;[object Array]&quot; instanceof è¿ç®—ç¬¦ç”¨äºæ£€æµ‹æ„é€ å‡½æ•°çš„ prototype å±æ€§æ˜¯å¦å‡ºç°åœ¨æŸä¸ªå®ä¾‹å¯¹è±¡çš„åŸå‹é“¾ä¸Šï¼ˆMDNï¼‰ å®é™…ä¸Šå°±æ˜¯åˆ¤æ–­ arr.proto === Array.prototype new åšäº†ä»€ä¹ˆï¼Ÿ å¦‚æœä¸€ä¸ªå‡½æ•°è¢«ä½¿ç”¨newæ“ä½œç¬¦è°ƒç”¨äº†ï¼Œé‚£ä¹ˆå®ƒä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ï¼ˆç©ºå¯¹è±¡ï¼‰ è¿™ä¸ªå¯¹è±¡å†…éƒ¨çš„ [[prototype]] å±æ€§ä¼šè¢«èµ‹å€¼ä¸ºè¯¥æ„é€ å‡½æ•°çš„ prototypeå±æ€§ æ„é€ å‡½æ•°çš„ this ï¼Œä¼šæŒ‡å‘åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡ æ‰§è¡Œå‡½æ•°çš„å†…éƒ¨ä»£ç  å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰è¿”å›éç©ºå¯¹è±¡ï¼Œåˆ™è¿”å›åˆ›å»ºå‡ºæ¥çš„æ–°å¯¹è±¡ å¸¦ç€æ˜é‡‘çš„å„ç§æ–‡ç« ä¸€èµ·çœ‹,æ‰¾åˆ°è‡ªå·±æƒ³è¦çš„ç­”æ¡ˆ åšäº†ä¸€ä»½å‰ç«¯é¢è¯•å¤ä¹ è®¡åˆ’ï¼Œä¿ç†Ÿï½ é“¾æ¥ï¼šhttps://juejin.cn/post/7061588533214969892 ç¥åä¸‰-åŸç”ŸJSçµé­‚ä¹‹é—®, è¯·é—®ä½ èƒ½æ¥å¾—ä½å‡ ä¸ª é“¾æ¥ï¼šhttps://juejin.cn/post/6844903974378668039 å­—èŠ‚è·³åŠ¨æœ€çˆ±è€ƒçš„å‰ç«¯é¢è¯•é¢˜ï¼šJavaScript åŸºç¡€ é“¾æ¥ï¼šhttps://juejin.cn/post/6934500357091360781 ã€ŒæŸ¥ç¼ºè¡¥æ¼ã€é€ä½  54 é“ JavaScript é¢è¯•é¢˜ é“¾æ¥ï¼šhttps://juejin.cn/post/6854573211443544078#comment","categories":[{"name":"ğŸ˜£é¢è¯•é¢˜-jsç¯‡","slug":"ğŸ˜£é¢è¯•é¢˜-jsç¯‡","permalink":"https://hillyee.github.io/categories/%F0%9F%98%A3%E9%9D%A2%E8%AF%95%E9%A2%98-js%E7%AF%87/"}],"tags":[]},{"title":"TCPä¸‰æ¬¡æ¡æ‰‹","slug":"TCPä¸‰æ¬¡æ¡æ‰‹","date":"2022-03-30T12:11:13.000Z","updated":"2022-04-01T00:36:00.738Z","comments":true,"path":"2022/03/30/TCPä¸‰æ¬¡æ¡æ‰‹/","link":"","permalink":"https://hillyee.github.io/2022/03/30/TCP%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/","excerpt":"","text":"1. TCP ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ ? ï¼ˆé¦–å…ˆï¼Œä¸¤ä¸ªæ¦‚å¿µï¼šSYNï¼šåŒæ­¥æ ‡å¿— ACKï¼šç¡®è®¤æ ‡å¿—ï¼‰ åˆšå¼€å§‹å®¢æˆ·ç«¯å¤„äº Closed çš„çŠ¶æ€ï¼ŒæœåŠ¡ç«¯å¤„äº Listen çŠ¶æ€ã€‚è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼š ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€ä¸€ä¸ªSYNæŠ¥æ–‡ï¼Œå¹¶æŒ‡æ˜å®¢æˆ·ç«¯çš„åˆå§‹åŒ–åºåˆ—å· ISNã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äº SYN_SEND çŠ¶æ€ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡å™¨æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šä»¥è‡ªå·±çš„ SYN æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯æŒ‡å®šäº†è‡ªå·±çš„åˆå§‹åŒ–åºåˆ—å·åºåˆ—å· ISNï¼ŒåŒæ—¶ä¼šæŠŠå®¢æˆ·ç«¯çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºè‡ªå·±å·²ç»æ”¶åˆ°äº†å®¢æˆ·ç«¯çš„ SYNï¼Œæ­¤æ—¶æœåŠ¡å™¨å¤„äº SYN_REVD çš„çŠ¶æ€ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ° SYN æŠ¥æ–‡ä¹‹åï¼Œä¼šå›åº”ä¸€ä¸ª ACK æŠ¥æ–‡ï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„æŠŠæœåŠ¡å™¨çš„ ISN + 1 ä½œä¸º ACK çš„å€¼ï¼Œè¡¨ç¤ºå·²ç»æ”¶åˆ°äº†æœåŠ¡ç«¯çš„ SYN æŠ¥æ–‡ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº established çŠ¶æ€ æœ€åæœåŠ¡å™¨æ”¶åˆ° ACK æŠ¥æ–‡ä¹‹åï¼Œä¹Ÿå¤„äº established çŠ¶æ€ï¼Œæ­¤æ—¶ï¼ŒåŒæ–¹å»ºç«‹è¿æ¥ 2. ä¸ºä»€ä¹ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼Ÿä¸¤æ¬¡ä¸è¡Œå—ï¼Ÿ å…¶å®è¿™æ˜¯ç”± TCP çš„è‡ªèº«ç‰¹ç‚¹å¯é ä¼ è¾“å†³å®šçš„ã€‚ ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘é€ç½‘ç»œåŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ï¼Œè¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„å‘é€èƒ½åŠ›ã€æœåŠ¡ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼ŒæœåŠ¡ç«¯å‘åŒ…ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·å®¢æˆ·ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šæœåŠ¡ç«¯çš„å‘é€èƒ½åŠ›ã€å®¢æˆ·ç«¯çš„æ¥æ”¶èƒ½åŠ›æ˜¯æ­£å¸¸çš„ã€‚ ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼Œå®¢æˆ·ç«¯å‘åŒ…ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°äº†ã€‚è¿™æ ·æœåŠ¡ç«¯å°±èƒ½å¾—å‡ºç»“è®ºï¼šå®¢æˆ·ç«¯çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ­£å¸¸ï¼ŒæœåŠ¡å™¨è‡ªå·±çš„å‘é€ï¼Œæ¥æ”¶èƒ½åŠ›ä¹Ÿæ­£å¸¸ã€‚ 3. (ISN) æ˜¯å›ºå®šçš„å—? ä¸‰æ¬¡æ¡æ‰‹çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤æ¢ ISN ï¼Œä»¥ä¾¿è®©å¯¹æ–¹çŸ¥é“æ¥ä¸‹æ¥æ¥å—æ•°æ®çš„æ—¶å€™å¦‚ä½•æŒ‰åºåˆ—å·ç»„è£…æ•°æ® å¦‚æœ ISN æ˜¯å›ºå®šçš„ï¼Œæ”»å‡»è€…å¾ˆå®¹æ˜“çŒœå‡ºåç»­çš„ç¡®è®¤å·ï¼Œå› æ­¤ ISN æ˜¯åŠ¨æ€ç”Ÿæˆçš„ 4. ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ä¸­å¯ä»¥æºå¸¦æ•°æ®å— ç¬¬ä¸‰æ¬¡æ¡æ‰‹çš„æ—¶å€™å¯ä»¥æºå¸¦æ•°æ®ã€‚å› ä¸ºå‡å¦‚ç¬¬ä¸€æ¬¡æ¡æ‰‹å¯ä»¥æºå¸¦æ•°æ®çš„è¯ï¼Œå¦‚æœæœ‰äººè¦æ¶æ„æ”»å‡»æœåŠ¡å™¨ï¼Œé‚£ä»–æ¯æ¬¡éƒ½åœ¨ç¬¬ä¸€æ¬¡æ¡æ‰‹ä¸­çš„ SYN æŠ¥æ–‡ä¸­æ”¾å…¥å¤§é‡çš„æ•°æ®ï¼Œå› ä¸ºæ”»å‡»è€…æ ¹æœ¬å°±ä¸ç†æœåŠ¡å™¨çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯å¦æ­£å¸¸ã€‚ç„¶åç–¯ç‹‚é‡å¤å‘ SYN æŠ¥æ–‡çš„è¯ï¼Œè¿™ä¼šè®©æœåŠ¡å™¨èŠ±è´¹å¾ˆå¤šæ—¶é—´ã€å†…å­˜ç©ºé—´æ¥æ¥æ”¶è¿™äº›æŠ¥æ–‡ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç¬¬ä¸€æ¬¡æ¡æ‰‹å¯ä»¥æ”¾æ•°æ®çš„è¯ï¼Œå¯èƒ½ä¼šè®©æœåŠ¡å™¨æ›´åŠ å®¹æ˜“å—åˆ°æ”»å‡»ã€‚ è€Œå¯¹äºç¬¬ä¸‰æ¬¡çš„è¯ï¼Œå®¢æˆ·ç«¯å·²ç»å»ºç«‹èµ·è¿æ¥äº†ï¼Œå¹¶ä¸”ä¹Ÿå·²ç»çŸ¥é“æœåŠ¡å™¨çš„æ¥æ”¶ã€å‘é€èƒ½åŠ›æ˜¯æ­£å¸¸çš„ï¼Œæ‰€ä»¥æºå¸¦æ•°æ®ä¹Ÿæ²¡é—®é¢˜ 5. å››æ¬¡æŒ¥æ‰‹ï¼Ÿä¸ºä»€ä¹ˆè¦å››æ¬¡ï¼Ÿ åˆšå¼€å§‹åŒæ–¹éƒ½å¤„äº established çŠ¶æ€ï¼Œå‡å¦‚æ˜¯å®¢æˆ·ç«¯å…ˆå‘èµ·å…³é—­è¯·æ±‚ï¼Œåˆ™ï¼š åˆšå¼€å§‹åŒæ–¹éƒ½å¤„äºestablishedçŠ¶æ€ï¼Œå‡å¦‚æ˜¯å®¢æˆ·ç«¯å…ˆå‘èµ·å…³é—­è¯·æ±‚ ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯å‘é€ä¸€ä¸ªFINæŠ¥æ–‡ï¼ŒæŠ¥æ–‡ä¸­ä¼šæŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶å®¢æˆ·ç«¯å¤„äºFIN_WAIT1çŠ¶æ€ ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šæœåŠ¡ç«¯æ”¶åˆ°FINä¹‹åï¼Œä¼šå‘é€ACKæŠ¥æ–‡ï¼Œä¸”æŠŠå®¢æˆ·ç«¯çš„åºåˆ—å·å€¼+1ä½œä¸ºACKæŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œè¡¨æ˜å·²ç»æ”¶åˆ°å®¢æˆ·ç«¯çš„æŠ¥æ–‡äº†ï¼Œæ­¤æ—¶æœåŠ¡ç«¯å¤„äºCLOSE_WAITçŠ¶æ€ ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šå¦‚æœæœåŠ¡ç«¯ä¹Ÿæƒ³æ–­å¼€è¿æ¥äº†ï¼Œå’Œå®¢æˆ·ç«¯çš„ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ä¸€æ ·ï¼Œå‘é€FINæŠ¥æ–‡ï¼Œä¸”æŒ‡å®šä¸€ä¸ªåºåˆ—å·ã€‚æ­¤æ—¶æœåŠ¡ç«¯å¤„äºLAST_ACKçš„çŠ¶æ€ ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šå®¢æˆ·ç«¯æ”¶åˆ° FIN ä¹‹åï¼Œä¸€æ ·å‘é€ä¸€ä¸ª ACK æŠ¥æ–‡ä½œä¸ºåº”ç­”ï¼Œä¸”æŠŠæœåŠ¡ç«¯çš„åºåˆ—å·å€¼ +1 ä½œä¸ºè‡ªå·± ACK æŠ¥æ–‡çš„åºåˆ—å·å€¼ï¼Œæ­¤æ—¶å®¢æˆ·ç«¯å¤„äº TIME_WAIT çŠ¶æ€ã€‚éœ€è¦è¿‡ä¸€é˜µå­ä»¥ç¡®ä¿æœåŠ¡ç«¯æ”¶åˆ°è‡ªå·±çš„ACKæŠ¥æ–‡ä¹‹åæ‰ä¼šè¿›å…¥CLOSEDçŠ¶æ€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°ACKæŠ¥æ–‡ä¹‹åï¼Œå°±å¤„äºå…³é—­è¿æ¥äº†ï¼Œå¤„äºCLOSEDçŠ¶æ€ã€‚ 6. SYN æ”»å‡»æ˜¯ä»€ä¹ˆï¼Ÿ æœåŠ¡å™¨ç«¯çš„èµ„æºåˆ†é…æ˜¯åœ¨äºŒæ¬¡æ¡æ‰‹æ—¶åˆ†é…çš„ï¼Œè€Œå®¢æˆ·ç«¯çš„èµ„æºæ˜¯åœ¨å®Œæˆä¸‰æ¬¡æ¡æ‰‹æ—¶åˆ†é…çš„ï¼Œæ‰€ä»¥æœåŠ¡å™¨å®¹æ˜“å—åˆ° SYN æ´ªæ³›æ”»å‡»ã€‚SYN æ”»å‡»å°±æ˜¯ Client åœ¨çŸ­æ—¶é—´å†…ä¼ªé€ å¤§é‡ä¸å­˜åœ¨çš„ IP åœ°å€ï¼Œå¹¶å‘ Server ä¸æ–­åœ°å‘é€ SYN åŒ…ï¼ŒServer åˆ™å›å¤ç¡®è®¤åŒ…ï¼Œå¹¶ç­‰å¾… Client ç¡®è®¤ï¼Œç”±äºæºåœ°å€ä¸å­˜åœ¨ï¼Œå› æ­¤ Server éœ€è¦ä¸æ–­é‡å‘ç›´è‡³è¶…æ—¶ï¼Œè¿™äº›ä¼ªé€ çš„ SYN åŒ…å°†é•¿æ—¶é—´å ç”¨æœªè¿æ¥é˜Ÿåˆ—ï¼Œå¯¼è‡´æ­£å¸¸çš„ SYN è¯·æ±‚å› ä¸ºé˜Ÿåˆ—æ»¡è€Œè¢«ä¸¢å¼ƒï¼Œä»è€Œå¼•èµ·ç½‘ç»œæ‹¥å¡ç”šè‡³ç³»ç»Ÿç˜«ç—ªã€‚ æ£€æµ‹ SYN æ”»å‡»ï¼Ÿ æ£€æµ‹ SYN æ”»å‡»éå¸¸çš„æ–¹ä¾¿ï¼Œå½“ä½ åœ¨æœåŠ¡å™¨ä¸Šçœ‹åˆ°å¤§é‡çš„åŠè¿æ¥çŠ¶æ€æ—¶ï¼Œç‰¹åˆ«æ˜¯æº IP åœ°å€æ˜¯éšæœºçš„ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ–­å®šè¿™æ˜¯ä¸€æ¬¡ SYN æ”»å‡»ã€‚ å¸¸è§çš„é˜²å¾¡ SYN æ”»å‡»çš„æ–¹æ³•ï¼Ÿ ç¼©çŸ­è¶…æ—¶æ—¶é—´ å¢åŠ æœ€å¤§åŠè¿æ¥æ•° è¿‡æ»¤ç½‘å…³é˜²æŠ¤ SYN cookiesæŠ€æœ¯ 7. ä»€ä¹ˆæ˜¯åŠè¿æ¥é˜Ÿåˆ—ï¼Ÿ æœåŠ¡å™¨ç¬¬ä¸€æ¬¡æ”¶åˆ°å®¢æˆ·ç«¯çš„ SYN ä¹‹åï¼Œå°±ä¼šå¤„äº SYN_REVD çŠ¶æ€ï¼Œæ­¤æ—¶åŒæ–¹è¿˜æ²¡æœ‰å®Œå…¨å»ºç«‹èµ·è¿æ¥ï¼ŒæœåŠ¡å™¨ä¼šæŠŠæ­¤ç§çŠ¶æ€ä¸‹è¯·æ±‚è¿æ¥æ”¾åœ¨ä¸€ä¸ªé˜Ÿåˆ—é‡Œï¼Œè¿™ç§é˜Ÿåˆ—ç§°ä¹‹ä¸ºåŠè¿æ¥é˜Ÿåˆ—ã€‚","categories":[{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://hillyee.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"var_let_conståŒºåˆ«","slug":"var-let-conståŒºåˆ«","date":"2022-03-30T12:08:54.000Z","updated":"2022-03-31T10:46:51.382Z","comments":true,"path":"2022/03/30/var-let-conståŒºåˆ«/","link":"","permalink":"https://hillyee.github.io/2022/03/30/var-let-const%E5%8C%BA%E5%88%AB/","excerpt":"","text":"varã€letã€const ç›¸å…³ varï¼ˆES5ï¼‰let,constï¼ˆES6ï¼‰ 1. ä½œç”¨åŸŸï¼Ÿ ç®€å•æ¥è¯´ï¼Œä½œç”¨åŸŸå°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åœ°ç›˜ï¼Œå¤–å±‚ä½œç”¨åŸŸæ— æ³•è¯»å–å†…å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œä½†æ˜¯å†…å±‚ä½œç”¨åŸŸå¯ä»¥è®¿é—®å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡æˆ–è€…å®šä¹‰å¤–å±‚ä½œç”¨åŸŸçš„åŒåå˜é‡ã€‚ 2. var å˜é‡æå‡ï¼Ÿ var ç‰¹ç‚¹ï¼Ÿ æ— è®ºåœ¨å…¨å±€ä½œç”¨åŸŸè¿˜æ˜¯åœ¨å±€éƒ¨ä½œç”¨åŸŸä¸­ï¼Œä½¿ç”¨ var å…³é”®å­—å£°æ˜çš„å˜é‡éƒ½ä¼šè¢«æå‡åˆ°è¯¥ä½œç”¨åŸŸçš„æœ€é¡¶éƒ¨ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å˜é‡æå‡ åœ¨ä»£ç é¢„ç¼–è¯‘çš„æ—¶å€™ï¼ŒJavaScript å¼•æ“ä¼šè‡ªåŠ¨å°†æ‰€æœ‰ä»£ç é‡Œé¢ä»¥var å…³é”®å­—å£°æ˜çš„è¯­å¥æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶ç«¯ function fn1() &#123; var name = &quot;jack&quot;&#125;// ç­‰ä»·äºfunction fn1() &#123; var name; name = &quot;jack&quot;&#125; console.log(name) // undefinedvar name = &quot;jack&quot; var çš„ç‰¹ç‚¹ å­˜åœ¨å˜é‡æå‡ åœ¨å˜é‡æœªèµ‹å€¼æ—¶ï¼Œå˜é‡ä¸º undefined ä¸€ä¸ªå˜é‡å¯ä»¥å¤šæ¬¡å£°æ˜ï¼Œåé¢çš„å£°æ˜ä¼šè¦†ç›–å‰é¢çš„å£°æ˜ åœ¨å‡½æ•°ä¸­ä½¿ç”¨ var å£°æ˜å˜é‡çš„æ—¶å€™ï¼Œè¯¥å˜é‡æ˜¯å±€éƒ¨çš„ï¼ˆå› ä¸ºåœ¨ä½¿ç”¨ var å£°æ˜å˜é‡æ—¶ï¼Œå˜é‡ä¼šè¢«è‡ªåŠ¨æ·»åŠ åˆ°æœ€æ¥è¿‘çš„ä¸Šä¸‹æ–‡ã€‚åœ¨å‡½æ•°ä¸­ï¼Œæœ€æ¥è¿‘çš„ä¸Šä¸‹æ–‡å°±æ˜¯å‡½æ•°çš„å±€éƒ¨ä¸Šä¸‹æ–‡ï¼‰ function add(num1, num2) &#123; var sum = num1 + num2; return sum&#125;let result = add(10, 20) // 30console.log(sum) // æŠ¥é”™ sum is not defined å¦‚æœå‡½æ•°å†…ä¸ä½¿ç”¨ var å£°æ˜ï¼Œè¯¥å˜é‡æ˜¯å…¨å±€çš„ï¼Œsum è¢«æ·»åŠ åˆ°å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆwindowï¼‰window.sum function add(num1, num2) &#123; sum = num1 + num2; return sum&#125;let result = add(10, 20) // 30console.log(sum) // 30 3. let let ä¸å­˜åœ¨å˜é‡æå‡ï¼Œlet å£°æ˜å˜é‡å‰ï¼Œè¯¥å˜é‡ä¸èƒ½ä½¿ç”¨(æš‚æ—¶æ€§æ­»åŒº) let ä¸ºå—çº§ä½œç”¨åŸŸï¼Œæ‰€æœ‰å¤–é¢çš„è¯­å¥å—è®¿é—®ä¸åˆ° console.log(value) // æŠ¥é”™let value = &#x27;hello&#x27; let ä¸å…è®¸é‡å¤å£°æ˜ï¼Œå¦‚æœåœ¨åŒä¸€ä¸ªä½œç”¨åŸŸä¸­æŸä¸ªå˜é‡å·²ç»å­˜åœ¨ï¼Œå†æ¬¡ä½¿ç”¨ let å…³é”®å­—å£°æ˜çš„è¯ä¼šæŠ¥é”™ 4. const ä¸ let æ²¡ä»€ä¹ˆå¤§ä¸åŒ const å£°æ˜çš„æ˜¯å¸¸é‡ï¼Œå¸¸é‡å°±æ˜¯ä¸€æ—¦å®šä¹‰å®Œå°±ä¸èƒ½ä¿®æ”¹çš„å€¼ã€‚ å¿…é¡»åˆå§‹åŒ–å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼šconst å˜é‡ä¸èƒ½å†è¢«é‡æ–°èµ‹å€¼ä¸ºå…¶ä»–å¼•ç”¨å€¼ï¼Œä½†å¯¹è±¡çš„é”®ä¸å—é™åˆ¶ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯å˜é‡çš„å€¼ä¸èƒ½æ”¹åŠ¨ï¼Œè€Œæ˜¯å˜é‡æŒ‡å‘çš„é‚£ä¸ªå†…å­˜åœ°å€ä¸å¾—æ”¹åŠ¨ const obj1 = &#123;&#125;obj1 = &#123;&#125; // æŠ¥é”™ï¼Œä¸èƒ½ç»™å¸¸é‡èµ‹å€¼const obj2 = &#123; name: &quot;jack&quot; &#125;obj2.name = &quot;tony&quot; // æ²¡é—®é¢˜ 5. æš‚æ—¶æ€§æ­»åŒºï¼Ÿ å¦‚æœåŒºå—ä¸­å­˜åœ¨ let å’Œ const å‘½ä»¤ï¼Œä»¥è¿™ä¸ªå‘½ä»¤å£°æ˜çš„å˜é‡ä»ä¸€å¼€å§‹å°±å½¢æˆäº†å°é—­ä½œç”¨åŸŸã€‚å‡¡æ˜¯åœ¨å£°æ˜ä¹‹å‰å°±æ˜¯ç”¨è¿™äº›å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ æ€»ä¹‹ï¼Œåœ¨ä»£ç å—å†…ï¼Œä½¿ç”¨ let å‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ã€‚è¿™åœ¨è¯­æ³•ä¸Šï¼Œç§°ä¸º â€œæš‚æ—¶æ€§æ­»åŒºâ€(temporal dead zone ç®€ç§° TDZ ) if (true) &#123; // TDZ å¼€å§‹ tmp = &quot;abc&quot;; console.log(tmp); // æŠ¥é”™ let tmp; // TDZ ç»“æŸ console.log(tmp) tmp = 123; console.log(tmp); // 123&#125; ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨ let å‘½ä»¤å£°æ˜å˜é‡ tmp ä¹‹å‰ï¼Œéƒ½å±äºå˜é‡ tmp çš„æ­»åŒº 6. åœ¨ for å¾ªç¯ä¸­ä½¿ç”¨ varï¼Œlet çš„åŒºåˆ« for(var i = 0;i&lt;10;i++)&#123; setTimeout(function()&#123; console.log(i) &#125;,100)&#125; // è¾“å‡ºå…¨æ˜¯10// å› ä¸º i æ˜¯å…¨å±€å˜é‡ï¼Œæœ€åè®¿é—®çš„éƒ½æ˜¯å…¨å±€å˜é‡ for(let i = 0;i&lt;10;i++)&#123; setTimeout(function()&#123; console.log(i) &#125;,100)&#125; // 0123456789; // i æ˜¯å±€éƒ¨å˜é‡ï¼Œæ¯æ¬¡å¾ªç¯æ”¹å˜çš„æ˜¯å¯¹å±€éƒ¨å˜é‡èµ‹å€¼","categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hillyee.github.io/categories/JavaScript/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"04_å®ç°call_apply_bind","slug":"04_æ‰‹å†™call-apply-bind","date":"2022-03-30T11:49:46.000Z","updated":"2022-04-03T07:40:31.531Z","comments":true,"path":"2022/03/30/04_æ‰‹å†™call-apply-bind/","link":"","permalink":"https://hillyee.github.io/2022/03/30/04_%E6%89%8B%E5%86%99call-apply-bind/","excerpt":"","text":"callã€applyã€bind å®ç° 1. call å®ç° é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ç³»ç»Ÿçš„ call æ–¹æ³•ä¸»è¦å®ç°äº†ä»€ä¹ˆ æ‰§è¡Œäº†å‡½æ•° æ”¹å˜äº† this çš„æŒ‡å‘ å…ˆçœ‹ç³»ç»Ÿçš„callæ–¹æ³• function foo() &#123; console.log(&quot;fooå‡½æ•°è¢«æ‰§è¡Œ&quot;, this);&#125;function sum(num1, num2) &#123; console.log(&quot;sumå‡½æ•°è¢«æ‰§è¡Œ&quot;, this); return num1 + num2&#125;// 1. ä¼ å…¥å¯¹è±¡foo.call(&#123;&#125;) // 2. ä¼ å…¥null/undefinedfoo.call(null) // thisè‡ªåŠ¨æ›¿æ¢ä¸ºæŒ‡å‘å…¨å±€å¯¹è±¡// 3. ä¼ å…¥å…¶ä»–ï¼Œå­—ç¬¦ä¸²ï¼Œæ•°å­—ï¼Œå¸ƒå°”å€¼ç­‰ç­‰foo.call(&quot;abc&quot;) // this æŒ‡å‘ç›¸åº”çš„å¯¹è±¡let res = sum.call(&quot;123&quot;, 10,20)console.log(res) // 30 æ¥ä¸‹æ¥æˆ‘ä»¬å¼€å§‹å®ç°è‡ªå·±çš„callï¼ˆä¸»è¦æ˜¯å®ç°æ€è·¯ï¼Œæ²¡æœ‰æŠŠæ‰€æœ‰çš„è¾¹ç¼˜æ¡ä»¶è€ƒè™‘å®Œå…¨ï¼Œä½†æ˜¯åŸºæœ¬éƒ½æœ‰ï¼‰ 1.1 è®©å‡½æ•°æ‰§è¡Œèµ·æ¥ Function.prototype.mycall = function() &#123; let fn = this // thiså°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å‡½æ•° foo,æŠŠå®ƒä¿å­˜åˆ° fn // æ¥ç€è®©å‡½æ•°æ‰§è¡Œèµ·æ¥ fn() // ä½†æ˜¯è¿™é‡Œæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨ï¼ŒthisæŒ‡å‘window&#125;foo.mycall() // è¿™é‡Œç›¸å½“äºmycalléšå¼ç»‘å®šäº†foo,å› æ­¤ mycallä¸­çš„thiså°±æ˜¯foo 2.2 æ˜¾å¼ç»‘å®šthis ç°åœ¨æˆ‘ä»¬è¦ç»‘å®šæˆ‘ä»¬æŒ‡å®šçš„this å…ˆçœ‹ç¬¬ä¸€ç§ï¼šfoo.mycall(&#123;name: 'hello'&#125;)ï¼Œç»‘å®šä¸€ä¸ªå¯¹è±¡ Function.prototype.mycall = function(thisArg) &#123; let fn = this // thiså°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å‡½æ•° foo,æŠŠå®ƒä¿å­˜åˆ° fn // æ¥ç€è°ƒç”¨è¿™ä¸ªå‡½æ•° // æˆ‘ä»¬çš„ç›®çš„æ˜¯è®©å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ç»‘å®šthisArgè¿™ä¸ªå¯¹è±¡æ‰§è¡Œå³thisArg.fn()(éšå¼ç»‘å®š) // ä½†æ˜¯ç°åœ¨ thisArgæ²¡æœ‰ fn è¿™ä¸ªå±æ€§å‘€ï¼Œæ€ä¹ˆè°ƒç”¨å‘¢ // æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç»™thisArgæ·»åŠ ä¸€ä¸ªå±æ€§ fn, å€¼å°±æ˜¯æˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„å‡½æ•° thisArg.fn = fn // ç„¶åå†è°ƒç”¨ thisArg.fn() // ä½†æ˜¯è¿™æ ·æˆ‘ä»¬ä¸å°±è®©thisArgå¤šå‡ºæ¥ä¸€ä¸ªå±æ€§fnäº†å—ï¼Ÿ // æ²¡å…³ç³»ï¼Œå‡½æ•°æ‰§è¡Œå®Œ åˆ æ‰å°±å¥½ delete thisArg.fn&#125; å¦‚æœæˆ‘ä»¬ä¼ å…¥çš„ä¸æ˜¯å¯¹è±¡å‘¢ï¼Ÿé‚£å°±ä¸èƒ½ç»™thisArgæ·»åŠ å±æ€§å•¦ foo.mycall(&quot;123&quot;) Function.prototype.mycall = function(thisArg) &#123; let fn = this // æ‰€ä»¥è¦æŠŠ thisArg è½¬æˆå¯¹è±¡ç±»å‹(Objectæ„é€ å‡½æ•°å¯ä»¥å°†ç»™å®šçš„å€¼åŒ…è£…ä¸ºä¸€ä¸ªæ–°å¯¹è±¡) thisArg = Object(thisArg) thisArg.fn = fn thisArg.fn() delete thisArg.fn&#125; å¦‚æœä¼ å…¥çš„æ˜¯ null / undefined å‘¢ Function.prototype.mycall = function(thisArg) &#123; let fn = this // å¦‚æœthisArgä¼ å…¥çš„æ˜¯ undefined / null, åº”è¯¥è®©å®ƒæŒ‡å‘å…¨å±€å¯¹è±¡ // æ‰€ä»¥æˆ‘ä»¬è¦åšä¸€ä¸ªåˆ¤æ–­ thisArg = (thisArg !== null &amp;&amp; thisArg !== undefined) ? Object(thisArg) : window thisArg.fn = fn thisArg.fn() delete thisArg.fn&#125; 2.3 æ¥ä¸‹æ¥è¦è€ƒè™‘å‚æ•°äº† // restè¿ç®—ç¬¦// ...args ä¼šæŠŠæˆ‘ä»¬ä¼ å…¥çš„å‚æ•°åˆ—è¡¨ç»„åˆåˆ°ä¸€ä¸ªæ•°ç»„ [num1,num2]// ...args ä¹Ÿå¯ä»¥å±•å¼€æ•°ç»„, ç›¸å½“äºå¯¹æ•°ç»„çš„ä¸€ä¸ªéå†Function.prototype.mycall = function(thisArg, ...args) &#123; let fn = this thisArg = (thisArg !== null &amp;&amp; thisArg !== undefined) ? Object(thisArg) : window thisArg.fn = fn // æŠŠå‚æ•°ä¼ å…¥å‡½æ•°ï¼Œå¹¶ç”¨ result æ¥æ”¶å‡½æ•°æ‰§è¡Œå®Œçš„ç»“æœ(ä¾‹å­ä¸­å°±æ˜¯sumå‡½æ•°æ‰§è¡Œå®Œçš„ç»“æœ) let result = thisArg.fn(...args) // ...[num1, num2] --&gt; num1, num2 delete thisArg.fn // æœ€åæŠŠç»“æœè¿”å›å‡ºå» return result&#125; åˆ°æ­¤ï¼ŒåŸºæœ¬çš„callå°±å·²ç»å®ç°äº† æ£€éªŒä¸€ä¸‹å­ foo.mycall(&#123;name: &#x27;hello&#x27;&#125;)foo.mycall(&quot;123&quot;)foo.mycall(undefined)foo.mycall(null)sum.mycall(&#123;name: &quot;hello&quot;&#125;, 10, 20)let res1 = sum.mycall(123, 10, 20)console.log(res1); 2. apply å®ç° è·Ÿ call ç±»ä¼¼ï¼Œåªä¸è¿‡å‚æ•°çš„å¤„ç†æœ‰ä¸åŒ Function.prototype.myapply = function(thisArg, argsArray) &#123; let fn = this thisArg = (thisArg !== null &amp;&amp; thisArg !== undefined) ? Object(thisArg) : window thisArg.fn = fn // æ²¡æœ‰ä¼ argArray,é‚£ä¹ˆargsArrayé»˜è®¤ä¸º undefined,é‚£ä¹ˆå°±ä¸èƒ½ä½¿ç”¨å±•å¼€è¿ç®—ç¬¦äº† // æ‰€ä»¥å¦‚æœæ²¡æœ‰ä¼ å…¥å‚æ•°, é‚£ä¹ˆæŠŠå®ƒåˆå§‹åŒ–ä¸º [], ç©ºæ•°ç»„ä¹Ÿæ˜¯å¯ä»¥å±•å¼€çš„ ...[] argsArray = argsArray || [] let result = thisArg.fn(...argsArray) delete thisArg.fn return result&#125; 3. bind å®ç° bind éœ€è¦æˆ‘ä»¬è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œå¹¶ä¸”è°ƒç”¨ bind çš„æ—¶å€™ä¸éœ€è¦æ‰§è¡Œå‡½æ•° Function.prototype.mybind = function(thisArg, ...args) &#123; var fn = this thisArg = (thisArg !== null &amp;&amp; thisArg !== undefined) ? Object(thisArg) : window function newFn() &#123; thisArg.fn = fn let result = thisArg.fn(...args) delete thisArg.fn // è¿”å›ç»“æœ return result &#125; // bind éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„å‡½æ•° ä½ ä¹Ÿå¯ä»¥ç›´æ¥ return function() &#123;...&#125; return newFn&#125; å¤§ä½“ä¸Šä¹Ÿå·®ä¸å¤šï¼Œä½†æˆ‘ä»¬å¯ä»¥å°±ä¸‹é¢è¿™ç§æƒ…å†µæ”¹è¿›ä¸€ä¸‹ function sum2(num1, num2, num3, num4) &#123; console.log(&quot;sum2å‡½æ•°è¢«æ‰§è¡Œ&quot;, this); return num1 + num2 + num3 + num4&#125;let newSum2 = sum2.mybind(&quot;abc&quot;, 10,20) // ç»‘å®šçš„æ—¶å€™ä¼ å…¥äº†ä¸¤ä¸ªå‚æ•°console.log(newSum2(30,40)); // ä½¿ç”¨æ–°è¿”å›çš„å‡½æ•°çš„æ—¶å€™å†ä¼ å…¥å‰©ä½™çš„å‚æ•° è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±éœ€è¦æŠŠä¸¤æ¬¡ä¼ å…¥çš„å‚æ•°åˆå¹¶èµ·æ¥ï¼Œå†è°ƒç”¨ Function.prototype.mybind = function(thisArg, ...args) &#123; var fn = this thisArg = (thisArg !== null &amp;&amp; thisArg !== undefined) ? Object(thisArg) : window function newFn(...newArgs) &#123; // åˆå¹¶ä¼ å…¥çš„å‚æ•° let allArgs = [...args, ...newArgs] thisArg.fn = fn let result = thisArg.fn(...allArgs) delete thisArg.fn // è¿”å›ç»“æœ return result &#125; return newFn&#125; åˆ°æ­¤ï¼ŒåŸºæœ¬çš„bindä¹Ÿå®ç°äº† æœ€åè¯´æ˜ä¸€ä¸‹ï¼Œå®ç°çš„æ€è·¯æ˜¯è¿™æ ·ï¼Œä½†æ˜¯æ–¹æ³•ä¸å”¯ä¸€çš„ï¼Œå¯èƒ½è¿˜æœ‰ä¸€äº›è¾¹è¾¹è§’è§’æ²¡æœ‰è€ƒè™‘åˆ°çš„è¯ï¼Œå¯ä»¥è‡ªå·±æ·»åŠ è¿›å»","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"03_JSå‡½æ•°çš„thisæŒ‡å‘","slug":"03_JSå‡½æ•°çš„thisæŒ‡å‘","date":"2022-03-30T10:50:46.000Z","updated":"2022-04-03T07:40:29.589Z","comments":true,"path":"2022/03/30/03_JSå‡½æ•°çš„thisæŒ‡å‘/","link":"","permalink":"https://hillyee.github.io/2022/03/30/03_JS%E5%87%BD%E6%95%B0%E7%9A%84this%E6%8C%87%E5%90%91/","excerpt":"","text":"JS å‡½æ•°çš„ this æŒ‡å‘ 1. this åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹çš„æŒ‡å‘ åœ¨æµè§ˆå™¨ä¸­ï¼Œthisåœ¨å…¨å±€ä½œç”¨åŸŸä¸‹æŒ‡å‘ window console.log(this) // windowvar title = &quot;hello&quot;console.log(this.title) // helloconsole.log(window.title) // hello 2. this çš„å››ä¸ªç»‘å®šè§„åˆ™ 2.1 è§„åˆ™ä¸€ï¼šé»˜è®¤ç»‘å®š åœ¨ç‹¬ç«‹å‡½æ•°è°ƒç”¨çš„æƒ…å†µä¸‹ä¼šä½¿ç”¨é»˜è®¤ç»‘å®š ç‹¬ç«‹å‡½æ•°è°ƒç”¨ç®€å•æ¥è¯´å°±æ˜¯å®ƒæ²¡æœ‰ç»‘å®šåˆ°æŸä¸ªå¯¹è±¡ä¸Šè¿›è¡Œè°ƒç”¨ï¼Œç®€å•çœ‹å‡ ä¸ªä¾‹å­ // ä¾‹1function foo() &#123; console.log(this)&#125;foo() // window // ä¾‹2function foo1() &#123; console.log(this);&#125;function foo2() &#123; foo1()&#125;function foo3() &#123; foo2()&#125;foo3() // window // ä¾‹3var obj = &#123; name: &#x27;hello&#x27;, foo: function() &#123; console.log(this); &#125;&#125;var bar = obj.foobar() // window ä»¥ä¸Šçš„å‡½æ•°è°ƒç”¨çš„æ—¶å€™ï¼Œéƒ½æ˜¯æ²¡æœ‰è¢«ç»‘å®šåˆ°å¯¹è±¡ä¸­è°ƒç”¨çš„ï¼Œæ‰€ä»¥ this éƒ½æŒ‡å‘ window 2.2 è§„åˆ™äºŒï¼šéšå¼ç»‘å®š å‡½æ•°é€šè¿‡æŸä¸ªå¯¹è±¡è¿›è¡Œè°ƒç”¨çš„æ—¶å€™ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šè¢« js å¼•æ“ç»‘å®šåˆ°å‡½æ•°ä¸­çš„ this é‡Œ ä¸‹é¢çœ‹å‡ ä¸ªä¾‹å­ï¼š // 1.function foo() &#123; console.log(this);&#125;var obj = &#123; name: &#x27;hello&#x27;, fn: foo&#125;obj.fn() // obj å¯¹è±¡ // 2.var obj1 = &#123; foo: function() &#123; console.log(this); &#125;&#125;var obj2 = &#123; title: &#x27;hello&#x27;, bar: obj1.foo&#125;obj2.bar() // obj2å¯¹è±¡ 2.3 æ˜¾å¼ç»‘å®š åˆ©ç”¨ callï¼Œapplyï¼Œbindæ‰‹åŠ¨æŒ‡å®š this çš„ç»‘å®šï¼Œè¿™ç§æ˜ç¡®çš„ç»‘å®šç§°ä¸ºæ˜¾å¼ç»‘å®š (1) callï¼Œapply callï¼Œapply éƒ½æ˜¯å¯ä»¥è°ƒç”¨å‡½æ•°çš„ fn.call(è‡ªå®šçš„thisæŒ‡å‘ï¼Œå‚æ•°1ï¼Œå‚æ•°2) fn.apply(thisæŒ‡å‘ï¼Œ[å‚æ•°1ï¼Œå‚æ•°2]) ä¸¤è€…çš„åŒºåˆ«åœ¨äºä¼ å‚çš„æ–¹å¼ï¼Œä¸‹é¢ä¾‹å­å¯ä»¥çœ‹å‡ºæ¥ call ä¼ å…¥å‚æ•°åˆ—è¡¨ï¼Œapplyæ˜¯æ•°ç»„ function sum(num1, num2, num3) &#123; console.log(num1 + num2 + num3, this);&#125;var obj = &#123; title: &quot;hello&quot;&#125;sum.call(&quot;123&quot;, 20,30,40) // æ‰‹åŠ¨è®©thisæŒ‡å‘&quot;123&quot;sum.apply(obj, [20,30,40]) // æ‰‹åŠ¨è®©thisæŒ‡å‘obj (2) bind bindä¸ä¼šè°ƒç”¨å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚ function sum(num1, num2, num3) &#123; console.log(num1 + num2 + num3, this);&#125;// var obj = &#123;// title: &quot;hello&quot;// &#125;// sum.call(&quot;123&quot;, 20,30,40) // æ‰‹åŠ¨è®©thisæŒ‡å‘&quot;123&quot;// sum.apply(obj, [20,30,40]) // æ‰‹åŠ¨è®©thisæŒ‡å‘objvar newSum = sum.bind(&#x27;aaa&#x27;,10,20,30)newSum() // 60 String &#123;&#x27;aaa&#x27;&#125; å’¦ï¼ŸnewSum ä¸ä¹Ÿæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨å—ï¼Œæ€ä¹ˆä¸æŒ‡å‘ window äº† è¿™å°±æ˜¯é»˜è®¤ç»‘å®šå’Œæ˜¾å¼ç»‘å®šbindçš„å†²çªï¼Œæ˜¾å¼ç»‘å®šçš„ä¼˜å…ˆçº§æ›´é«˜ï¼ 2.4 newç»‘å®š function Person(name, age) &#123; this.name = name this.age = age // å®é™…ä¸Šè¿™é‡Œæ˜¯ä¼šæŠŠ this è¿”å›å‡ºå»çš„,å³return thisï¼ˆé»˜è®¤ï¼‰ // this = åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡&#125;// new ä¼šåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡var p1 = new Person(&quot;jenny&quot;, 12)var p2 = new Person(&quot;tony&quot;, 15) 3. ä¸€äº›å†…ç½®å‡½æ•°çš„ this ç»‘å®š æœ‰æ—¶å€™æˆ‘ä»¬ä¼šè°ƒç”¨ä¸€äº› JS çš„å†…ç½®å‡½æ•°ï¼Œè¿™äº›å‡½æ•°è¦æ±‚æˆ‘ä»¬ä¼ å…¥å¦å¤–ä¸€ä¸ªå‡½æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸ä¼šè‡ªå·±å»è°ƒç”¨è¿™äº›å‡½æ•°ï¼Œè€Œæ˜¯ JS å†…éƒ¨ä¼šå¸®åŠ©æˆ‘ä»¬æ‰§è¡Œã€‚ è¿™ä¸ªæ—¶å€™ï¼Œthis çš„ç»‘å®šå°±è·Ÿå†…éƒ¨å¸®æˆ‘ä»¬æŒ‡å‘å‡½æ•°çš„æ–¹å¼æœ‰å…³ç³»äº†ã€‚ çœ‹å‡ ä¸ªä¾‹å­å§ 3.1 setTimeout å†…éƒ¨é€šè¿‡ apply è°ƒç”¨å‡½æ•°ï¼Œå¹¶ç»‘å®šäº†thiså¯¹è±¡ï¼Œæ˜¯window setTimeout(function() &#123; console.log(this); // window&#125;, 2000) 3.2 æ•°ç»„çš„å†…ç½®å‡½æ•° forEach é»˜è®¤æƒ…å†µä¸‹ä¼ å…¥çš„å‡½æ•°æ˜¯è‡ªåŠ¨è°ƒç”¨å‡½æ•°ï¼ˆé»˜è®¤ç»‘å®šï¼‰ var names = [&#x27;aaa&#x27;, &#x27;bbb&#x27;,&#x27;ccc&#x27;]names.forEach(function(item) &#123; console.log(this); // ä¸‰æ¬¡ window&#125;) ä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œæ”¹å˜thisæŒ‡å‘ var names = [&#x27;aaa&#x27;, &#x27;bbb&#x27;,&#x27;ccc&#x27;]names.forEach(function(item) &#123; console.log(this); // ä¸‰æ¬¡ &#x27;obj&#x27;&#125;, &#x27;obj&#x27;) 3.3 ç‚¹å‡»äº‹ä»¶ åœ¨å‘ç”Ÿç‚¹å‡»æ—¶ï¼Œå›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œä¼šå°† this ç»‘å®šåˆ°è¯¥å‡½æ•°ä¸­ &lt;div class=&quot;box&quot;&gt; &lt;/div&gt; var box = document.querySelector(&quot;.box&quot;)box.onclick = function() &#123; console.log(this); // boxå¯¹è±¡&#125; æ‰€ä»¥è¯´ï¼ŒæŸäº›å†…ç½®çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¾ˆéš¾ç¡®å®šå®ƒå†…éƒ¨æ˜¯å¦‚ä½•è°ƒç”¨ä¼ å…¥çš„å›è°ƒå‡½æ•°çš„ï¼Œå¯ä»¥è‡ªå·±æµ‹è¯•ä¸€ä¸‹ï¼Œè®°ä¸€ä¸‹ï¼Œçœ‹æºç å½“ç„¶æ›´å¥½å•¦ 4. å‡ ä¸ªè§„åˆ™çš„ä¼˜å…ˆçº§ ä»é«˜åˆ°ä½ï¼šnewç»‘å®š &gt; æ˜¾å¼ç»‘å®š(bind) &gt; éšå¼ç»‘å®š &gt; é»˜è®¤ç»‘å®š newç»‘å®šå’Œcallï¼Œapplyæ˜¯ä¸å…è®¸åŒæ—¶ä½¿ç”¨çš„ï¼Œï¼ˆæ¯•ç«Ÿéƒ½ä¼šè°ƒç”¨å‡½æ•°ï¼‰ï¼Œæ‰€ä»¥ä¸å­˜åœ¨è°çš„ä¼˜å…ˆçº§æ›´é«˜ æ˜¾å¼ç»‘å®šé«˜äºéšå¼ç»‘å®š // æ˜¾å¼ç»‘å®šå’Œéšå¼ç»‘å®šfunction foo() &#123; console.log(this);&#125;var obj = &#123; name: &#x27;obj&#x27;, foo: foo&#125;obj.foo() // obj å¯¹è±¡obj.foo.call(&quot;aaa&quot;) // &#x27;aaa&#x27; new ç»‘å®šé«˜äºéšå¼ç»‘å®š function foo() &#123; console.log(this);&#125;var obj = &#123; name: &#x27;hello&#x27;, foo: foo&#125;new obj.foo() // è¾“å‡º foo å¯¹è±¡è€Œä¸æ˜¯ obj new ç»‘å®šé«˜äºbind function foo() &#123; console.log(this, title);&#125;var obj = &#123; name: &#x27;hello&#x27;&#125;var bar = foo.bind(obj) // æ˜¾å¼ç»‘å®šobjnew bar() // æ‰“å° fooå¯¹è±¡ è€Œä¸æ˜¯ obj 5. ä¸¤ç§ç‰¹æ®Šæƒ…å†µ 5.1 åœ¨æ˜¾å¼ç»‘å®šä¸­ä¼ å…¥ null æˆ– undefined è¿™æ—¶å€™ï¼Œæ˜¾å¼ç»‘å®šä¼šè¢«å¿½ç•¥ï¼Œä½¿ç”¨é»˜è®¤è§„åˆ™ function foo() &#123; console.log(this);&#125;var obj = &#123; name: &quot;hello&quot;, foo: foo&#125;foo.call(obj) // objfoo.call(null) // windowfoo.call(undefined) // window 5.2 é—´æ¥å‡½æ•°å¼•ç”¨ function foo() &#123; console.log(this);&#125;var obj1 = &#123; name: &#x27;obj1&#x27;, foo: foo&#125;var obj2 = &#123; name: &#x27;obj2&#x27;,&#125;// å…ˆæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªèµ‹å€¼çš„ç»“æœ, æ˜¯ foo å‡½æ•°console.log((obj2.foo = obj1.foo)); // fooå‡½æ•°// è¿™ç§å«åšé—´æ¥å‡½æ•°å¼•ç”¨ï¼Œæ˜¯ä¼šæŠŠèµ‹å€¼è¯­å¥å³è¾¹çš„ç»“æœè¿”å›ï¼Œç„¶åç›´æ¥è°ƒç”¨ï¼Œæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨(obj2.foo = obj1.foo)() // ç›¸å½“äºç›´æ¥è°ƒç”¨ foo å‡½æ•°ï¼Œæ‰€ä»¥æ˜¯é»˜è®¤ç»‘å®šï¼Œè¾“å‡ºwindow 6. ç®­å¤´å‡½æ•°çš„this ç®­å¤´å‡½æ•°ä¸ç»‘å®š thisï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ²¡æœ‰è‡ªå·±çš„ thisï¼Œè€Œæ˜¯æ ¹æ®å¤–å±‚ä½œç”¨åŸŸæ¥å†³å®šthis var name = &quot;hello&quot;var foo = () =&gt; &#123; console.log(this); // åœ¨è¿™é‡Œthisçš„å¤–å±‚ä½œç”¨åŸŸå°±æ˜¯ window&#125;var obj = &#123; foo: foo&#125;obj.foo() // windowobj.foo.call(&quot;aaa&quot;) // window å†æ¥çœ‹ä¸€ä¸ªæ¡ˆä¾‹ï¼š ä½¿ç”¨setTimeoutæ¨¡æ‹Ÿä¸€ä¸ªç½‘ç»œè¯·æ±‚ï¼Œå¦‚æœæˆ‘ä»¬æƒ³æŠŠè¿”å›æ¥çš„æ•°æ®ä¿å­˜åˆ° data ä¸­ï¼Œè¯¥æ€ä¹ˆåš var obj = &#123; data: &#x27;&#x27;, getData: function() &#123; setTimeout(() =&gt; &#123; console.log(this); // obj å¯¹è±¡ // è¿™é‡Œçš„ this ä¸æ˜¯åº”è¯¥æŒ‡å‘windowå—ï¼Ÿ // å¦‚æœæˆ‘ä»¬è¿™é‡Œä½¿ç”¨çš„æ˜¯æ™®é€šçš„å‡½æ•° function() &#123;console.log(this)&#125; // é‚£ä¹ˆè¿™ä¸ªå‡½æ•°åœ¨å†…éƒ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šç»‘å®šthisï¼Œå°±æ˜¯window // ä½†æ˜¯æˆ‘ä»¬ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œå®ƒä¸ç»‘å®šthisï¼Œä¼šå¾€ä¸Šå±‚ä½œç”¨åŸŸä¸­æ‰¾åˆ°å¯¹åº”çš„this // æ‰€ä»¥æ‰¾åˆ°äº† obj this.data = &#x27;hello&#x27; // --&gt; obj.data = &quot;hello&quot; &#125;, 2000); &#125;&#125;obj.getData() 7. this çš„é¢è¯•é¢˜ å¦‚æœæ¯é¢˜éƒ½ä¼šäº†ï¼Œé‚£ä¹ˆ this ç»‘å®šçš„é—®é¢˜ï¼Œå°±æ˜¯ä½ çš„é€åˆ†é¢˜è€Œä¸æ˜¯é€å‘½é¢˜äº†å“ˆå“ˆå“ˆ å»ºè®®æŠŠæˆ‘çš„ç­”æ¡ˆè·Ÿæ³¨é‡Šéƒ½åˆ æ‰ï¼Œè‡ªå·±ä¸€ç‚¹ç‚¹ç†æ¸…å“¦ é¢˜ä¸€ var name = &quot;window&quot;; // window.name = &quot;window&quot;var person = &#123; name: &quot;person&quot;, sayName: function () &#123; console.log(this.name); &#125;&#125;;function sayName() &#123; var sss = person.sayName; sss(); // window å¾ˆæ˜æ˜¾æ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨,æ²¡æœ‰ä¸ä»»ä½•å¯¹è±¡å…³è” person.sayName(); // person éšå¼ç»‘å®š,ä¸personå…³è” (person.sayName)(); // person åŒä¸Š(åŠ æ‹¬å·åªæ˜¯ä»£è¡¨è¿™æ˜¯ä¸€ä¸ªæ•´ä½“) // console.log((b = person.sayName)); // è¿™é‡Œå®é™…ä¸Šå°±æ˜¯sayNameè¿™ä¸ªå‡½æ•° (b = person.sayName)(); // é—´æ¥å‡½æ•°å¼•ç”¨ï¼Œæ˜¯ç‹¬ç«‹å‡½æ•°è°ƒç”¨, è¾“å‡º window&#125;sayName(); é¢˜äºŒ var name = &#x27;window&#x27;var person1 = &#123; name: &#x27;person1&#x27;, foo1: function () &#123; console.log(this.name) &#125;, foo2: () =&gt; console.log(this.name), foo3: function () &#123; return function () &#123; console.log(this.name) &#125; &#125;, foo4: function () &#123; return () =&gt; &#123; console.log(this.name) &#125; &#125;&#125;var person2 = &#123; name: &#x27;person2&#x27; &#125;// éšå¼ç»‘å®šperson1å¯¹è±¡person1.foo1(); // person1// æ˜¾å¼ç»‘å®šperson2person1.foo1.call(person2); // person2// ç®­å¤´å‡½æ•°ä¸é€‚ç”¨ä»»ä½•è§„åˆ™, å‘ä¸Šå±‚ä½œç”¨åŸŸä¸­æ‰¾thisperson1.foo2(); // windowperson1.foo2.call(person2); // window// person1.foo3()è¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç‹¬ç«‹è°ƒç”¨person1.foo3()(); // window// person1.foo3.call(person2) è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åç‹¬ç«‹è°ƒç”¨person1.foo3.call(person2)(); // window// person1.foo3()è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åæ˜¾å¼ç»‘å®šåˆ° person2person1.foo3().call(person2); // person2// person1.foo4()è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå¾€ä¸Šå±‚ä½œç”¨åŸŸæ‰¾ï¼Œæ‰¾åˆ°foo4ä¸­ç»‘å®šçš„this,æ˜¯ person1person1.foo4()(); // person1// foo4æ˜¾å¼ç»‘å®šåˆ° person2person1.foo4.call(person2)(); // person2// person1.foo4()è¿”å›ç®­å¤´å‡½æ•°ï¼Œå¾€ä¸Šå±‚ä½œç”¨åŸŸæ‰¾person1.foo4().call(person2); // person1 é¢˜ä¸‰ var name = &#x27;window&#x27;function Person (name) &#123; this.name = name this.foo1 = function () &#123; console.log(this.name) &#125;, this.foo2 = () =&gt; console.log(this.name), this.foo3 = function () &#123; return function () &#123; console.log(this.name) &#125; &#125;, this.foo4 = function () &#123; return () =&gt; &#123; console.log(this.name) &#125; &#125;&#125;var person1 = new Person(&#x27;person1&#x27;)var person2 = new Person(&#x27;person2&#x27;)person1.foo1() // person1 éšå¼ç»‘å®šperson1.foo1.call(person2) // person2 æ˜¾å¼ç»‘å®šperson1.foo2() // person1 éšå¼ç»‘å®š// ç®­å¤´å‡½æ•°ä¸é€‚ç”¨æ˜¾å¼ç»‘å®šè§„åˆ™ï¼Œç›´æ¥å‘ä¸Šå±‚ä½œç”¨åŸŸæ‰¾person1.foo2.call(person2) // person1 // person1.foo3() è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å…¨å±€è°ƒç”¨person1.foo3()() // windowperson1.foo3.call(person2)() // window // åŒç†// person1.foo3() è¿”å›çš„å‡½æ•°ä½¿ç”¨ .call æ˜¾å¼ç»‘å®š person2person1.foo3().call(person2) //person2 // person1.foo4() è¿”å›ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œå†è°ƒç”¨ï¼Œå‘ä¸Šå±‚ä½œç”¨åŸŸæ‰¾person1.foo4()() // person1// person1.foo4.call(person2) è¿”å›ç®­å¤´å‡½æ•°ï¼Œå¹¶ä¸”foo4æ˜¾å¼ç»‘å®šthisä¸ºperson2// å†è°ƒç”¨è¿™ä¸ªç®­å¤´å‡½æ•°ï¼Œå‘ä¸Šæ‰¾å°±æ‰¾åˆ° foo4 çš„this ä¸ºperson2person1.foo4.call(person2)() // person2 // person1.foo4() è¿”å›ç®­å¤´å‡½æ•°,ä¸é€‚ç”¨æ˜¾å¼ç»‘å®šï¼Œå‘ä¸Šæ‰¾åˆ° person1// æ³¨æ„è¿™é‡Œè·Ÿä¸Šé¢çš„åŒºåˆ«ï¼Œè¿™é‡Œçš„foo4è°ƒç”¨ä¸æ˜¯.callè°ƒç”¨çš„ï¼Œè€Œæ˜¯.foo4()è¿™æ ·è°ƒç”¨çš„// callæ˜¯æ¥è°ƒç”¨ç®­å¤´å‡½æ•°çš„ï¼Œè€Œç®­å¤´å‡½æ•°ä¸é€‚ç”¨æ˜¾å¼ç»‘å®šï¼Œå‘ä¸Šæ‰¾åˆ°çš„æ˜¯person1person1.foo4().call(person2) // person1 é¢˜å›› var name = &#x27;window&#x27;function Person (name) &#123; this.name = name this.obj = &#123; name: &#x27;obj&#x27;, foo1: function () &#123; return function () &#123; console.log(this.name) &#125; &#125;, foo2: function () &#123; return () =&gt; &#123; console.log(this.name) &#125; &#125; &#125;&#125;var person1 = new Person(&#x27;person1&#x27;)var person2 = new Person(&#x27;person2&#x27;)// person1.obj.foo1()è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨å…¨å±€ä¸­è°ƒç”¨person1.obj.foo1()() // window// person1.obj.foo1.call(person2) è¿”å›ä¸€ä¸ªå‡½æ•° åœ¨å…¨å±€ä¸­è°ƒç”¨person1.obj.foo1.call(person2)() // window// person1.obj.foo1() è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæ˜¾å¼ç»‘å®šperson2person1.obj.foo1().call(person2) // person2// ç®­å¤´å‡½æ•°è°ƒç”¨ï¼Œå‘ä¸Šæ‰¾åˆ° foo2 ä¸­çš„thisæ˜¯objperson1.obj.foo2()() // obj// foo2è°ƒç”¨çš„æ—¶å€™æ˜¾å¼ç»‘å®šperson2ï¼Œç®­å¤´å‡½æ•°å‘ä¸Šå±‚æ‰¾åˆ°çš„å°±æ˜¯person2person1.obj.foo2.call(person2)() // person2// ç®­å¤´å‡½æ•°ä¸é€‚ç”¨ æ˜¾å¼ç»‘å®šï¼Œå‘ä¸Šæ‰¾æ‰¾åˆ° objperson1.obj.foo2().call(person2) // obj","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"02_JSå†…å­˜ç®¡ç†å’Œé—­åŒ…","slug":"02_JSå†…å­˜ç®¡ç†å’Œé—­åŒ…","date":"2022-03-30T10:49:50.000Z","updated":"2022-04-03T07:40:20.371Z","comments":true,"path":"2022/03/30/02_JSå†…å­˜ç®¡ç†å’Œé—­åŒ…/","link":"","permalink":"https://hillyee.github.io/2022/03/30/02_JS%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E9%97%AD%E5%8C%85/","excerpt":"","text":"ä¸€ã€JS çš„å†…å­˜ç®¡ç† 1. JS çš„å†…å­˜ç®¡ç† JavaScript ä¼šåœ¨å®šä¹‰å˜é‡æ—¶ä¸ºæˆ‘ä»¬åˆ†é…å†…å­˜ å†…å­˜åˆ†é…çš„æ–¹å¼æ˜¯ä¸€æ ·çš„å—ï¼Ÿ JS å¯¹äºåŸºæœ¬æ•°æ®ç±»å‹å†…å­˜çš„åˆ†é…ï¼Œä¼šåœ¨æ‰§è¡Œæ—¶ç›´æ¥åœ¨æ ˆç©ºé—´è¿›è¡Œåˆ†é… JS å¯¹äºå¤æ‚æ•°æ®ç±»å‹å†…å­˜çš„åˆ†é…ï¼Œä¼šåœ¨å †å†…å­˜ä¸­å¼€è¾Ÿä¸€å—ç©ºé—´ï¼Œå¹¶ä¸”å°†è¿™å—ç©ºé—´çš„åœ°å€ä¿å­˜åœ¨æ ˆç©ºé—´ 2. JS çš„åƒåœ¾å›æ”¶ åƒåœ¾å›æ”¶çš„è‹±æ–‡æ˜¯ Garbage Collectionï¼Œç®€ç§° GC å¯¹äºé‚£äº›ä¸å†ä½¿ç”¨çš„å¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½ç§°ä¹‹ä¸ºåƒåœ¾ï¼Œå®ƒéœ€è¦è¢«å›æ”¶ï¼Œä»¥é‡Šæ”¾å‡ºæ›´å¤šçš„å†…å­˜ç©ºé—´ JavaScriptçš„è¿è¡Œç¯å¢ƒ jså¼•æ“éƒ½ä¼šå†…å­˜åƒåœ¾å›æ”¶å™¨ 3. å¸¸è§çš„ä¸¤ä¸ª GC ç®—æ³• GCæ€ä¹ˆçŸ¥é“å“ªäº›å¯¹è±¡æ˜¯ä¸å†ä½¿ç”¨çš„å‘¢ï¼Ÿè¿™é‡Œå°±è¦ç”¨åˆ° GC ç®—æ³•äº† 3.1 å¼•ç”¨è®¡æ•° å½“ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªå¼•ç”¨æŒ‡å‘å®ƒçš„æ—¶å€™ï¼Œé‚£ä¹ˆè¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨å°± +1ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ä¸º 0 æ—¶ï¼Œè¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¢«å›æ”¶æ‰ ä½†æ˜¯è¿™ä¸ªç®—æ³•æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯ï¼Œå°±æ˜¯ä¼šäº§ç”Ÿå¾ªç¯å¼•ç”¨ var obj1 = &#123;friend: obj2&#125;var obj2 = &#123;friend: obj1&#125; 3.2 æ ‡è®°æ¸…é™¤ è¿™ä¸ªç®—æ³•æ˜¯è®¾ç½®ä¸€ä¸ªæ ¹å¯¹è±¡ï¼ˆroot objectï¼‰ï¼Œåƒåœ¾å›æ”¶å™¨ä¼šå®šæœŸä»è¿™ä¸ªæ ¹å¼€å§‹ï¼Œæ‰¾åˆ°æ‰€æœ‰ä»æ ¹å¼€å§‹æœ‰å¼•ç”¨åˆ°çš„å¯¹è±¡ï¼Œå¯¹äºé‚£äº›æ²¡æœ‰å¼•ç”¨åˆ°çš„å¯¹è±¡ï¼Œå°±è®¤ä¸ºæ˜¯ä¸å¯ç”¨çš„å¯¹è±¡ â€‹ å›¾ä¸­ä» A å¼€å§‹æ‰¾ï¼Œæ‰¾åˆ° D çš„æ—¶å€™ç»“æŸï¼ŒM,Nä¸å¯è¾¾ï¼Œè¢«è®¤ä¸ºæ˜¯ä¸å¯ç”¨çš„å¯¹è±¡ è¿™ä¸ªç®—æ³•å¯ä»¥å¾ˆå¥½çš„è§£å†³å¾ªç¯å¼•ç”¨çš„é—®é¢˜ æ³¨ï¼šJS å¼•æ“æ¯”è¾ƒå¹¿æ³›é‡‡ç”¨çš„å°±æ˜¯æ ‡è®°æ¸…é™¤ç®—æ³•ï¼Œå½“ç„¶ç±»ä¼¼äº V8 å¼•æ“ä¸ºäº†è¿›è¡Œæ›´å¥½çš„ä¼˜åŒ–ï¼Œåœ¨ç®—æ³•çš„å®ç°ç»†èŠ‚ä¸Šä¹Ÿä¼šç»“åˆä¸€äº›å…¶ä»–çš„ç®—æ³• äºŒã€JSä¸­çš„é—­åŒ… 1. ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ JavaScript ä¸­çš„ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚æœå®ƒè®¿é—®äº†å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ MDNä¸­çš„ä¸€ä¸ªè§£é‡Šï¼šä¸€ä¸ªå‡½æ•°å’Œå¯¹å…¶å‘¨å›´çŠ¶æ€ï¼ˆlexical environmentï¼Œè¯æ³•ç¯å¢ƒï¼‰çš„å¼•ç”¨æ†ç»‘åœ¨ä¸€èµ·ï¼ˆæˆ–è€…è¯´å‡½æ•°è¢«å¼•ç”¨åŒ…å›´ï¼‰ï¼Œè¿™æ ·çš„ç»„åˆå°±æ˜¯é—­åŒ…ï¼ˆclosureï¼‰ function foo() &#123; var name = &quot;foo&quot; var age = 18 function bar() &#123; console.log(name)// nameè®¿é—®äº†å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡name console.log(age) // ageè®¿é—®äº†å¤–å±‚ä½œç”¨åŸŸçš„å˜é‡age &#125; return bar // è¿”å›ä¸€ä¸ªå‡½æ•°&#125;var fn = foo()fn() 2. é—­åŒ…çš„è®¿é—®è¿‡ç¨‹ ç®€å•æè¿°ä¸Šé¢å‡½æ•°çš„æ‰§è¡Œè¿‡ç¨‹ï¼š 1. GO: &#123;foo:åœ°å€1, fn:undefined&#125;2. æ‰§è¡Œä»£ç ï¼š 2.1 foo():åªè¦æ‰§è¡Œå‡½æ•°ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ (1)VO: &#123;AOå¯¹è±¡:&#123;name: undefined;age:undefined;bar:åœ°å€2&#125;&#125; scopechain:[VO+parent scopes] (2)å¼€å§‹æ‰§è¡Œä»£ç  &#123;name: &quot;foo&quot;, age:18;&#125; return baråœ°å€2 (3)fooæ‰§è¡Œå®Œæ¯• 2.2 fn: baråœ°å€2 2.3 fn(),å³æ‰§è¡Œ baråœ°å€2ä¸­çš„å‡½æ•°æ‰§è¡Œä½“,åˆ›å»ºbarçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ (1)&#123;AO:&#123;&#125;,scopechain&#125; (2)æ‰§è¡Œä»£ç : console.log(name):åœ¨è‡ªå·±çš„AOä¸­æ‰¾ä¸åˆ°ï¼Œé€šè¿‡ä½œç”¨åŸŸé“¾æ‰¾åˆ°fooçš„AOï¼Œæ‰¾åˆ°name:&quot;foo&quot;,è¾“å‡º &quot;foo&quot; console.log(age)åŒç† (3)fn()æ‰§è¡Œå®Œæ¯•3.æ‰§è¡Œå®Œæ¯•åœ°å€1:fooå‡½æ•°å¯¹è±¡: &#123;parentScope: GO&#125;,&#123;fooå‡½æ•°çš„æ‰§è¡Œä½“&#125;åœ°å€2:barå‡½æ•°å¯¹è±¡: &#123;parentScope: fooçš„AOå¯¹è±¡&#125;,&#123;barå‡½æ•°çš„æ‰§è¡Œä½“&#125; ä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼šfooå‡½æ•°æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œä¸æ˜¯åº”è¯¥å¼¹å‡ºæ ˆå—ï¼Œfooçš„AOå¯¹è±¡ä¸åº”è¯¥è¢«é‡Šæ”¾äº†å—ï¼Ÿæ€ä¹ˆbarè¿˜èƒ½æ‰¾åˆ° nameï¼Œæ‰¾åˆ° age å‘¢ï¼Ÿ çœ‹ä¸‹å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬æ‰§è¡Œå®Œ foo å‡½æ•°çš„æ—¶å€™ï¼Œè¿”å›çš„æ˜¯ bar å‡½æ•°(æˆ–è€…è¯´æ˜¯barçš„åœ°å€)ï¼Œç„¶åå› ä¸º fn = foo()ï¼ŒæŠŠè¿™ä¸ªåœ°å€èµ‹å€¼ç»™äº†fnï¼Œå› æ­¤ä¼šå­˜åœ¨ fn æŒ‡å‘ barå‡½æ•°å¯¹è±¡ï¼Œè€Œbarçš„çˆ¶ä½œç”¨åŸŸåˆæŒ‡å‘äº† foo çš„AOå¯¹è±¡ï¼Œå› æ­¤fooçš„AOæ˜¯ä¸ä¼šè¢«é‡Šæ”¾çš„ 3. é—­åŒ…çš„å†…å­˜æ³„æ¼ ä¸ºä»€ä¹ˆæ€»è¯´é—­åŒ…æ˜¯æœ‰å†…å­˜æ³„æ¼çš„å‘¢ï¼Ÿä»€ä¹ˆæ˜¯å†…å­˜æ³„æ¼ï¼Ÿ æ‹¿ä¸Šé¢çš„ä¾‹å­è¯´ï¼Œå¦‚æœåç»­æˆ‘ä»¬ä¸ä¼šå†ç”¨ fooï¼Œbar è¿™äº›å‡½æ•°äº†ï¼Œä½†æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ fn å˜é‡å¯¹barå‡½æ•°å¯¹è±¡æœ‰å¼•ç”¨ï¼Œè€Œbarçš„ä½œç”¨åŸŸä¸­AOå¯¹fooçš„AOæœ‰å¼•ç”¨ï¼Œæ‰€ä»¥ä¼šé€ æˆè¿™äº›å†…å­˜éƒ½æ˜¯æ— æ³•è¢«é‡Šæ”¾çš„ã€‚ è¿™å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„å†…å­˜æ³„æ¼ï¼Œå…¶å®å°±æ˜¯åˆšæ‰çš„å¼•ç”¨é“¾ä¸­çš„å¯¹è±¡æ— æ³•é‡Šæ”¾ æ€ä¹ˆè§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œè®¾ç½® fn = nullï¼Œå°±ä¸å†å¯¹ bar å‡½æ•°å¯¹è±¡æœ‰å¼•ç”¨ï¼Œé‚£ä¹ˆä»GOå‡ºå‘ï¼Œbaræ˜¯ä¸å¯è¾¾çš„ï¼Œé‚£ä¹ˆå¯¹åº”çš„AOå¯¹è±¡(foo) åŒæ ·ä¹Ÿå°±ä¸å¯è¾¾ã€‚ åœ¨ä¸‹ä¸€æ¬¡ GC çš„çš„æ£€æµ‹ä¸­ï¼Œå®ƒä»¬å°±ä¼šè¢«é”€æ¯æ‰ è¿˜æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå½¢æˆé—­åŒ…ä¹‹åï¼Œæ˜¯ä¸æ˜¯æ‰€æœ‰çš„å±æ€§éƒ½ä¸ä¼šè¢«é‡Šæ”¾å‘¢ï¼Ÿ è¿˜æ˜¯è¿™ä¸ªä¾‹å­ function foo() &#123; var name = &quot;why&quot; var age = 18 function bar() &#123; console.log(name) // console.log(age) &#125; return bar&#125;var fn = foo()fn() å¦‚æœageä¸ä½¿ç”¨äº†ï¼Œä¼šä¸ä¼šè¢«é”€æ¯æ‰å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯ä¼šçš„ï¼Œæµ‹è¯•å¦‚ä¸‹ï¼š è¿™æ˜¯å› ä¸º V8 å¼•æ“åšçš„ä¼˜åŒ–ï¼Œå› ä¸ºè§„èŒƒä¸­é—­åŒ…çš„å±æ€§åº”è¯¥æ˜¯ä¸ä¼šè¢«é”€æ¯çš„","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"01_æ·±å…¥JSè¿è¡ŒåŸç†","slug":"01_æ·±å…¥JSè¿è¡ŒåŸç†","date":"2022-03-30T10:49:46.000Z","updated":"2022-04-03T07:40:14.023Z","comments":true,"path":"2022/03/30/01_æ·±å…¥JSè¿è¡ŒåŸç†/","link":"","permalink":"https://hillyee.github.io/2022/03/30/01_%E6%B7%B1%E5%85%A5JS%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86/","excerpt":"","text":"1. ä»è¾“å…¥ URL åˆ°é¡µé¢å±•ç¤º å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ æ€»ä½“åˆ†ä¸ºä»¥ä¸‹è¿‡ç¨‹ï¼š DNS åŸŸåè§£æï¼šå°†åŸŸåè§£ææˆ IP åœ°å€ TCP è¿æ¥ï¼šTCP ä¸‰æ¬¡æ¡æ‰‹ å‘é€ HTTP è¯·æ±‚ æœåŠ¡å™¨å¤„ç†è¯·æ±‚å¹¶è¿”å› HTTP æŠ¥æ–‡ æµè§ˆå™¨è§£ææ¸²æŸ“é¡µé¢ æ–­å¼€è¿æ¥ï¼šTCP å››æ¬¡æŒ¥æ‰‹ 2. æµè§ˆå™¨å·¥ä½œåŸç† åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æŸ¥æ‰¾å†…å®¹ï¼Œæµè§ˆå™¨æ˜¯æ€æ ·å°†é¡µé¢åŠ è½½å‡ºæ¥çš„ï¼Ÿ å¤§è‡´æµç¨‹å¦‚ä¸‹ï¼š é¦–å…ˆï¼Œç”¨æˆ·è¾“å…¥æœåŠ¡å™¨åœ°å€ï¼Œä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥ æœåŠ¡å™¨è¿”å›å¯¹åº”çš„é™æ€èµ„æºï¼ˆindex.htmlï¼‰ ç„¶åæµè§ˆå™¨æ‹¿åˆ° index.html åè¿›è¡Œè§£æ å½“è§£ææ—¶é‡åˆ° css æˆ– js æ–‡ä»¶ï¼Œå°±å‘æœåŠ¡å™¨è¯·æ±‚å¹¶ä¸‹è½½å¯¹åº”çš„ css å’Œ js æ–‡ä»¶ æœ€åæµè§ˆå™¨å¯¹é¡µé¢è¿›è¡Œæ¸²æŸ“ï¼Œæ‰§è¡Œ js ä»£ç  3. æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹ HTML Parser å°† HTMLè§£æè½¬æ¢æˆ DOM æ ‘ CSS Parser å°† æ ·å¼è¡¨è½¬æ¢æˆ CSS è§„åˆ™æ ‘ åˆå¹¶ DOM æ ‘å’Œ CSS è§„åˆ™æ ‘ï¼Œç”Ÿæˆ renderï¼ˆæ¸²æŸ“ï¼‰ æ ‘ å¸ƒå±€ render æ ‘ï¼ˆLayoutï¼‰ é€šè¿‡æ¸²æŸ“æ ‘ä¸­æ¸²æŸ“å¯¹è±¡çš„ä¿¡æ¯ï¼Œè®¡ç®—å‡ºæ¯ä¸€ä¸ªæ¸²æŸ“å¯¹è±¡çš„ä½ç½®å’Œå°ºå¯¸ ç»˜åˆ¶ render æ ‘ï¼ˆpaintingï¼‰ï¼Œè¿›è¡Œ Display å±•ç¤º æ³¨æ„å›¾ä¸­é¡¶éƒ¨çš„ç´«è‰² DOM ä¸‰è§’å½¢ï¼Œå®é™…ä¸Šæ˜¯ js å¯¹ DOM çš„ç›¸å…³æ“ä½œã€‚ 4. ä¸€ä¸ªå¼ºå¤§çš„ JavaScript å¼•æ“ â€” V8 å¼•æ“ åœ¨è§£æ HTML çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº† JavaScript æ ‡ç­¾ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ ä¼šåœæ­¢è§£æ HTML ï¼Œè€Œå»åŠ è½½å’Œæ‰§è¡Œ JavaScript ä»£ç  é‚£ä¹ˆï¼ŒJavaScript ä»£ç ç”±è°æ¥æ‰§è¡Œå‘¢ï¼Ÿ JavaScript å¼•æ“ é«˜çº§çš„ç¼–ç¨‹è¯­è¨€æœ€ç»ˆéƒ½è¦è½¬æˆæœºå™¨æŒ‡ä»¤æ¥æ‰§è¡Œçš„ï¼Œ æ‰€ä»¥æˆ‘ä»¬éœ€è¦ JavaScript å¼•æ“å¸®åŠ©æˆ‘ä»¬å°† JavaScript ä»£ç ç¿»è¯‘æˆ CPU æŒ‡ä»¤æ¥æ‰§è¡Œ ï¼ˆ1ï¼‰V8 å¼•æ“çš„æ¶æ„ V8 çš„åº•å±‚æ¶æ„ä¸»è¦æœ‰ä¸‰ä¸ªæ ¸å¿ƒæ¨¡å—ï¼ˆParseã€Ignitionã€TurboFanï¼‰ 1. Parseï¼š è¯¥è¿‡ç¨‹ä¸»è¦æ˜¯å¯¹ JavaScript æºä»£ç è¿›è¡Œè¯æ³•åˆ†æå’Œè¯­æ³•åˆ†æã€‚ è¯æ³•åˆ†æï¼šå¯¹ä»£ç ä¸­çš„æ¯ä¸€ä¸ªè¯æ¯ä¸€ä¸ªç¬¦å·è¿›è¡Œè§£æï¼Œæœ€ç»ˆç”Ÿæˆå¾ˆå¤š tokens ä¾‹å¦‚ï¼šå¯¹ const name = â€œcurryâ€ // é¦–å…ˆå¯¹constè¿›è¡Œè§£æï¼Œå› ä¸ºconstä¸ºä¸€ä¸ªå…³é”®å­—ï¼Œæ‰€ä»¥ç±»å‹ä¼šè¢«è®°ä¸ºä¸€ä¸ªå…³é”®è¯ï¼Œå€¼ä¸ºconsttokens: [ &#123; type: &#x27;keyword&#x27;, value: &#x27;const&#x27; &#125;]// æ¥ç€å¯¹nameè¿›è¡Œè§£æï¼Œå› ä¸ºnameä¸ºä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œæ‰€ä»¥ç±»å‹ä¼šè¢«è®°ä¸ºä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå€¼ä¸ºnametokens: [ &#123; type: &#x27;keyword&#x27;, value: &#x27;const&#x27; &#125;, &#123; type: &#x27;identifier&#x27;, value: &#x27;name&#x27; &#125;]// ä»¥æ­¤ç±»æ¨... è¯­æ³•åˆ†æï¼šåœ¨è¯æ³•åˆ†æçš„åŸºç¡€ä¸Šï¼Œæ‹¿åˆ° tokens ä¸­çš„ä¸€ä¸ªä¸ªå¯¹è±¡ï¼Œæ ¹æ®ä¸åŒç±»å‹ï¼Œå†è¿›ä¸€æ­¥åˆ†æå…·ä½“è¯­æ³•ï¼Œæœ€ç»ˆç”Ÿæˆ AST æŠ½è±¡è¯­æ³•æ ‘ å¯ä»¥è¯¦ç»†æŸ¥çœ‹é€šè¿‡ Parse è½¬æ¢åçš„ AST çš„å·¥å…·ï¼šAST Explorer 2. Ignition ä¸€ä¸ªè§£æå™¨ï¼Œå¯ä»¥å°† AST è½¬æ¢æˆ ByteCodeï¼ˆå­—èŠ‚ç ï¼‰ 3. TurboFan ä¸€ä¸ªç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†å­—èŠ‚ç ç¼–è¯‘ä¸º CPU è®¤è¯†çš„æœºå™¨ç  ï¼ˆ2ï¼‰V8 å¼•æ“çš„æ‰§è¡Œè¿‡ç¨‹ Blink å†…æ ¸å°† JS æºç äº¤ç»™ V8 å¼•æ“ Stream è·å–åˆ° JS æºç è¿›è¡Œç¼–ç è½¬æ¢ Scanner è¿›è¡Œè¯æ³•åˆ†æï¼Œå°†ä»£ç è½¬æ¢æˆ tokens Parser å’Œ PreParser Parser ï¼šç›´æ¥è§£æï¼Œå°† tokens è½¬æˆ AST æ ‘ PreParserï¼šé¢„è§£æï¼Œå¯¹ä¸å¿…è¦çš„å‡½æ•°è¿›è¡Œé¢„è§£æï¼Œä¹Ÿå°±æ˜¯åªè§£ææš‚æ—¶éœ€è¦çš„å†…å®¹ï¼Œè€Œåœ¨å‡½æ•°è¢«è°ƒç”¨æ—¶æ‰è¿›è¡Œå‡½æ•°çš„å…¨é‡è§£æ ç”Ÿæˆ AST æ ‘åï¼Œä¼šè¢« Ignition è½¬æˆå­—èŠ‚ç ï¼Œä¹‹åå°±æ˜¯ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ 5. JavaScript çš„æ‰§è¡Œè¿‡ç¨‹ å‡å¦‚è¦æ‰§è¡Œå¦‚ä¸‹ä»£ç ï¼š var title = &quot;hello&quot;console.log(num1)var num1 = 20var num2 = 30var result = num1 + num2console.log(result) ï¼ˆ1ï¼‰é¦–å…ˆï¼Œä»£ç è¢«è§£æï¼ŒV8 å¼•æ“å†…éƒ¨ä¼šå¸®åŠ©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå…¨å±€å¯¹è±¡ï¼šGlobal Objectï¼ˆGOï¼‰ GO å¯ä»¥è®¿é—®æ‰€æœ‰çš„ä½œç”¨åŸŸ é‡Œé¢ä¼šåŒ…å« Dateã€Arrayã€Stringã€setTimeoutç­‰ç­‰ï¼ˆæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ new Date() ï¼‰ GO è¿˜æœ‰ä¸€ä¸ªwindow å±æ€§æŒ‡å‘è‡ªå·±ï¼ˆæ‰€ä»¥window.window.windowè¿˜æ˜¯æŒ‡å‘ GOè‡ªå·±ï¼‰ ç”¨ä¼ªä»£ç è¡¨ç¤ºä¸ºï¼š var globalObject = &#123; String: ç±», setTimeout: å‡½æ•°, ... window: globalObject&#125; ï¼ˆ2ï¼‰ç„¶åè¿è¡Œä»£ç  é¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“ js å¼•æ“å†…éƒ¨æœ‰ä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆï¼ˆExecution Context Stackï¼Œç®€ç§° ESCï¼‰ï¼Œå®ƒæ˜¯ç”¨äºæ‰§è¡Œä»£ç çš„è°ƒç”¨æ ˆã€‚ ä¸ºäº†å…¨å±€ä»£ç èƒ½å¤Ÿæ­£å¸¸æ‰§è¡Œï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ª å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ˆGlobal Execution Contextï¼Œç®€ç§°GECï¼‰ï¼Œå…¨å±€ä»£ç éœ€è¦è¢«æ‰§è¡Œæ—¶æ‰ä¼šåˆ›å»º ç„¶åå…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¼šè¢«æ”¾å…¥æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­æ‰§è¡Œï¼ŒåŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼š åœ¨ä»£ç æ‰§è¡Œå‰ï¼Œä¼šå°†å…¨å±€å®šä¹‰çš„å˜é‡ï¼Œå‡½æ•°ç­‰åŠ å…¥åˆ° GlobalOject ä¸­ï¼Œä½†æ˜¯å¹¶ä¸ä¼šèµ‹å€¼ï¼ˆä¹Ÿç§°ä¸ºå˜é‡çš„ä½œç”¨åŸŸæå‡ï¼‰ å¼€å§‹ä¾æ¬¡æ‰§è¡Œä»£ç ï¼š title = â€œhelloâ€ // èµ‹å€¼ console.log(num1) // undefined, ä¸ä¼šæŠ¥é”™ num1= 20 â€¦ é‡åˆ°å‡½æ•°å¦‚ä½•æ‰§è¡Œ? å…ˆæ ¹æ®å‡½æ•°ä½“åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”å‹å…¥åˆ°æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆä¸­ ä½œç”¨åŸŸé“¾ï¼Ÿ ç”± VO(å˜é‡å¯¹è±¡ï¼Œåœ¨å‡½æ•°ä¸­å°±æ˜¯ AO å¯¹è±¡)å’Œ çˆ¶çº§ VOç»„æˆï¼ŒæŸ¥æ‰¾æ—¶ä¼šä¸€å±‚å±‚æŸ¥æ‰¾ çœ‹ä¸€ä¸ªä¾‹å­ï¼š var message = &quot;Hello Global&quot;function foo() &#123; console.log(message) // Hello Global&#125;function bar() &#123; var message = &quot;Hello Bar&quot; foo()&#125;bar() æ¯”å¦‚è¯´è¿™é‡Œï¼Œå½“æ‰§è¡Œ foo å‡½æ•°çš„æ—¶å€™ï¼Œ foo çš„ AO ä¸­æ²¡æœ‰messageï¼Œå°±ä¼šå»å®ƒçš„çˆ¶çº§ VO ä¸­æŸ¥æ‰¾ã€‚ä¸€å®šè¦æ³¨æ„ï¼å½“ç¬¬ä¸€æ¬¡ä»£ç è§£æçš„æ—¶å€™ï¼Œ foo çš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°±å·²ç»ç¡®å®šäº†ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼š ç¬¬ä¸€éƒ¨åˆ†ï¼šåœ¨è§£æå‡½æ•°æˆä¸º AST æ ‘ç»“æ„çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸€ä¸ª AOï¼ˆActivationï¼‰ å…¶ä¸­åŒ…å«å½¢å‚ã€argumentsã€å‡½æ•°å®šä¹‰ã€æŒ‡å‘å‡½æ•°å¯¹è±¡æˆ–å®šä¹‰çš„å˜é‡ ç¬¬äºŒéƒ¨åˆ†ï¼šå°±æ˜¯ä½œç”¨åŸŸé“¾ ç¬¬ä¸‰éƒ¨åˆ†ï¼šthis ç»‘å®šçš„å€¼ å› æ­¤ï¼å½“fooåœ¨è‡ªå·±çš„AOæ‰¾ä¸åˆ°messageçš„æ—¶å€™ï¼Œå»çˆ¶çº§ VO æ‰¾ï¼Œè¿™ä¸ªçˆ¶çº§ VO å°±æ˜¯ä¸€å¼€å§‹è§£ææ—¶å€™ä¿å­˜çš„ GOï¼Œæ‰€ä»¥messageä¸º â€œHello Globalâ€ ç®€å•æè¿°ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹å§ï¼š(æˆ‘ä¸ä¸“ä¸šçš„è¡¨è¾¾) // åˆå§‹åŒ– GOGO: &#123;window; message:undefined; foo: åœ°å€1; bar: åœ°å€2;&#125;// æ‰§è¡Œä»£ç GO: &#123;window; message:&quot;Hello Global&quot;; foo: åœ°å€1; bar: åœ°å€2;&#125;barå‡½æ•°æ‰§è¡Œ,åˆ›å»ºä¸€ä¸ªå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡, å…¶ä¸­åŒ…æ‹¬ VOå¯¹è±¡: AO:&#123;message: undefined&#125; ç„¶åå¼€å§‹æ‰§è¡Œ barå‡½æ•° message:&quot;Hello Bar&quot; (èµ‹å€¼) foo() fooå‡½æ•°æ‰§è¡Œï¼Œåˆ›å»ºä¸€ä¸ªfooçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ å…¶ä¸­åŒ…æ‹¬ï¼šVO: AO: &#123;&#125; ç„¶åå¼€å§‹æ‰§è¡Œä»£ç  console.log(message) å‘ç°è‡ªå·±çš„AOæ²¡æœ‰message,ä¼šå‘ä¸Šæ‰¾ï¼Œå³ä»è‡ªå·±ä¿å­˜çš„çˆ¶çº§VOä¸­æŸ¥æ‰¾ï¼Œæ‰¾åˆ°GOä¸­çš„messageä¸º &quot;Hello Global&quot; (å›¾æ¥æºäºcoderwhy) å‡ é“å¸¸è§çš„ä½œç”¨åŸŸæå‡é¢è¯•é¢˜ï¼š var n = 100function foo() &#123; n = 200&#125;foo()console.log(n) // 200 function foo() &#123; console.log(n) // undefined var n = 200 console.log(n) // 200&#125;var n = 100foo() var a = 100function foo() &#123; console.log(a) // undefined return var a = 200&#125;foo() function foo() &#123; m = 100&#125;foo()console.log(m) // 100 function foo() &#123; var a = b = 10 // =&gt; è½¬æˆä¸‹é¢çš„ä¸¤è¡Œä»£ç  // var a = 10 // b = 10&#125;foo() //console.log(a) // æŠ¥é”™ a is not defined(å› ä¸ºå½“ fooå‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œfooçš„å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡å°±ä¼šå¼¹å‡ºæ ˆ(æ²¡å•¦ï¼å“ªé‡Œè¿˜ä¼šæœ‰aå‘¢))console.log(b) // 10","categories":[{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"}]},{"title":"Hello World","slug":"hello-world","date":"2022-03-29T14:25:03.367Z","updated":"2022-03-29T14:25:03.367Z","comments":true,"path":"2022/03/29/hello-world/","link":"","permalink":"https://hillyee.github.io/2022/03/29/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick Start Create a new post $ hexo new &quot;My New Post&quot; More info: Writing Run server $ hexo server More info: Server Generate static files $ hexo generate More info: Generating Deploy to remote sites $ hexo deploy More info: Deployment","categories":[],"tags":[]}],"categories":[{"name":"JavaScript","slug":"JavaScript","permalink":"https://hillyee.github.io/categories/JavaScript/"},{"name":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","slug":"ğŸ”«æ·±å…¥JSé«˜çº§è¯­æ³•","permalink":"https://hillyee.github.io/categories/%F0%9F%94%AB%E6%B7%B1%E5%85%A5JS%E9%AB%98%E7%BA%A7%E8%AF%AD%E6%B3%95/"},{"name":"å…¶ä»–","slug":"å…¶ä»–","permalink":"https://hillyee.github.io/categories/%E5%85%B6%E4%BB%96/"},{"name":"æ·±å…¥Vue3+Typescriptå­¦ä¹ ","slug":"æ·±å…¥Vue3-Typescriptå­¦ä¹ ","permalink":"https://hillyee.github.io/categories/%E6%B7%B1%E5%85%A5Vue3-Typescript%E5%AD%A6%E4%B9%A0/"},{"name":"ğŸ˜£é¢è¯•é¢˜-jsç¯‡","slug":"ğŸ˜£é¢è¯•é¢˜-jsç¯‡","permalink":"https://hillyee.github.io/categories/%F0%9F%98%A3%E9%9D%A2%E8%AF%95%E9%A2%98-js%E7%AF%87/"},{"name":"è®¡ç®—æœºç½‘ç»œ","slug":"è®¡ç®—æœºç½‘ç»œ","permalink":"https://hillyee.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"}],"tags":[{"name":"é¢è¯•","slug":"é¢è¯•","permalink":"https://hillyee.github.io/tags/%E9%9D%A2%E8%AF%95/"},{"name":"V3","slug":"V3","permalink":"https://hillyee.github.io/tags/V3/"},{"name":"V2","slug":"V2","permalink":"https://hillyee.github.io/tags/V2/"},{"name":"V1","slug":"V1","permalink":"https://hillyee.github.io/tags/V1/"},{"name":"vue3","slug":"vue3","permalink":"https://hillyee.github.io/tags/vue3/"}]}